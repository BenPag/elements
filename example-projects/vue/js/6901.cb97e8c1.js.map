{"version":3,"file":"js/6901.cb97e8c1.js","mappings":";;;;AAGA,MAAMA,EACJC,IAAIC,EAAKC,GACP,MAAMC,EAAQC,KAAKC,SAAWD,KAAKC,QAAQJ,GAC3C,OAAiB,OAAVE,QAA4B,IAAVA,EAAmBA,EAAQD,EAEtDI,MAAML,EAAKE,GACLC,KAAKC,SAAWD,KAAKC,QAAQJ,KAC/BG,KAAKC,QAAQJ,GAAOE,GAGpBE,cACF,GAAsB,qBAAXE,OAAwB,CACjC,MAAMC,EAAgBD,OAAOE,YAC7B,GAAID,GAAiBA,EAAcE,OACjC,OAAOF,EAAcE,OAGzB,OAAO,MAGX,MAAMA,EAAS,IAAIX,ECjBbY,EAAsB,GAE5B,IAAIC,EAAgB,MAClBC,YAAYC,IACVC,EAAAA,EAAAA,GAAiBX,KAAMU,GACvBV,KAAKY,aAAcC,EAAAA,EAAAA,GAAYb,KAAM,cAAe,GACpDA,KAAKc,cAAgB,QAGrBd,KAAKe,kBAAqBC,IACxB,IAAIjB,EAAQiB,EAAEC,OAEdlB,EAASA,EAAeC,KAAKkB,mBAAmBnB,GAA/B,KAIZoB,OAAOC,MAAMrB,KAChBC,KAAKqB,YAActB,EACnBC,KAAKY,YAAYU,KAAKvB,IAExBiB,EAAEO,mBAEJvB,KAAKwB,YAAc,KACjBxB,KAAKyB,WAAW1B,MAAQC,KAAK0B,mBAAmB1B,KAAKyB,WAAW1B,QAElEC,KAAK2B,WAAa,KAChB,MAAM5B,EAAQC,KAAK4B,cAAc7B,MAC7BA,GAAkB,QAATA,IACXC,KAAKyB,WAAW1B,MAAQC,KAAK6B,iBAAiB9B,KAIpD+B,aAAa/B,GACX,IAAIgC,GACEhC,GAAmB,IAAVA,GAA0B,SAAVA,GAC7BC,KAAKqB,YAAc,KACnBrB,KAAKgC,WAAa,MAGXjC,IAAwC,QAA7BgC,EAAK/B,KAAK4B,qBAAkC,IAAPG,OAAgB,EAASA,EAAGhC,SACnFC,KAAKqB,YAActB,EAAMkC,WACzBjC,KAAKgC,WAAahC,KAAK6B,iBAAiB9B,IAG5CmC,mBACE,IAAIH,EACJ/B,KAAKyB,WAAazB,KAAKmC,GAAGC,cAAc,aACb,QAA1BL,EAAK/B,KAAKyB,kBAA+B,IAAPM,GAAyBA,EAAGM,yBAAyBtC,GAAUC,KAAK0B,mBAAmB3B,KACrHC,KAAKyB,YACRa,QAAQC,MAAM,8CAEa,SAAzBvC,KAAKyB,WAAWe,MAClBF,QAAQC,MAAM,2CAEhBvC,KAAKyC,aAEPC,oBAEE1C,KAAKyC,aAEPE,uBACE,IAAIZ,EAAIa,EAAIC,EACe,QAA1Bd,EAAK/B,KAAKyB,kBAA+B,IAAPM,GAAyBA,EAAGe,oBAAoB,WAAY9C,KAAKwB,aACzE,QAA1BoB,EAAK5C,KAAKyB,kBAA+B,IAAPmB,GAAyBA,EAAGE,oBAAoB,UAAW9C,KAAK2B,YACxE,QAA1BkB,EAAK7C,KAAKyB,kBAA+B,IAAPoB,GAAyBA,EAAGC,oBAAoB,cAAe9C,KAAKe,mBAEzG0B,aACE,IAAIV,EAAIa,EAAIC,EAER7C,KAAK4B,eACP5B,KAAK+C,mBAIoB,QAA1BhB,EAAK/B,KAAKyB,kBAA+B,IAAPM,GAAyBA,EAAGiB,iBAAiB,WAAYhD,KAAKwB,aACtE,QAA1BoB,EAAK5C,KAAKyB,kBAA+B,IAAPmB,GAAyBA,EAAGI,iBAAiB,UAAWhD,KAAK2B,YACrE,QAA1BkB,EAAK7C,KAAKyB,kBAA+B,IAAPoB,GAAyBA,EAAGG,iBAAiB,cAAehD,KAAKe,mBAIlGM,gBAAYtB,GACVC,KAAK4B,gBACP5B,KAAK4B,cAAc7B,MAAQA,GAG3BiC,eAAWjC,GACTC,KAAKyB,aACPzB,KAAKyB,WAAW1B,MAAQA,GAG5BgD,mBACE/C,KAAKqB,YAAc4B,OAAOjD,KAAKD,OAC/BC,KAAK4B,cAAcsB,KAAOlD,KAAKyB,WAAWyB,KAC1ClD,KAAKyB,WAAWyB,KAAO,KACvBlD,KAAKyB,WAAW0B,eAAgB,EAChCnD,KAAK4B,cAAcwB,IAAMpD,KAAKyB,WAAW2B,IACzCpD,KAAK4B,cAAcyB,IAAMrD,KAAKyB,WAAW4B,IACzCrD,KAAK4B,cAAc0B,SAAWtD,KAAKyB,WAAW6B,SAC9CtD,KAAK4B,cAAc2B,SAAWvD,KAAKyB,WAAW8B,SAC9CvD,KAAKyB,WAAW1B,MAAQC,KAAK6B,iBAAiB7B,KAAKD,OAIrDyD,eACE,OAAOxD,KAAK6B,iBAAiB,GAAG4B,OAAO,GAEzC5B,iBAAiB9B,GACf,IAAIgC,EACJ,IAAKhC,GAAmB,IAAVA,EACZ,OAAO,KACT,MAAM2D,GAAyC,QAA9B3B,EAAK/B,KAAK2D,sBAAmC,IAAP5B,OAAgB,EAASA,EAAG6B,QAAU,EACzF5D,KAAK2D,eACLrD,EAAOV,IAAI,iBAAkBI,KAAKc,eAChC+C,EAAO,CAAEC,sBAAuB,EAAGC,sBAAuB,GAChE,OAAOC,KAAKC,aAAaP,EAAQG,GAAMK,OAAO/C,OAAOpB,IAEvD2B,mBAAmB3B,GACjB,IAAKA,EACH,OAAOA,EAET,MAAMoE,EAAgBnE,KAAKoE,qBAAqBrE,GAC1CsE,EAAYrE,KAAKwD,eACjBc,EAActE,KAAKuE,uBAAuBxE,GAAOyE,MAAMH,GAQ7D,OANAtE,EAAQuE,EAAY,GAEhBA,EAAYV,OAAS,IAEvB7D,GAASsE,EAAYC,EAAY,GAAGG,UAAU,EAAG,IAE5CN,EAAgBpE,EAEzBmB,mBAAmBnB,GACjB,MAAMoE,EAAgBnE,KAAKoE,qBAAqBrE,GAC1CsE,EAAYrE,KAAKwD,eACjBkB,EAAW1E,KAAKuE,uBAAuBxE,GAAO4E,QAAQN,EAAW,KACvE,OAAOlD,OAAOgD,EAAgBO,GAEhCN,qBAAqBrE,GACnB,IAAIgC,EACJ,MAAMqB,EAAiC,QAA1BrB,EAAK/B,KAAKyB,kBAA+B,IAAPM,OAAgB,EAASA,EAAGqB,IACrEwB,EAAkBxB,GAAOjC,OAAOiC,IAAQ,EAC9C,OAAOwB,EAAkB,GAAK7E,EAAM8E,WAAW,KAAO,IAAM,GAE9DN,uBAAuBxE,GACrB,MAAM+E,EAAgB,IAAIC,OAAQ,KAAI/E,KAAKwD,qBAAsB,KACjE,OAAOzD,EAAM4E,QAAQG,EAAe,IAEtCE,SACE,OAAQC,EAAAA,EAAAA,GAAEC,EAAAA,EAAM,MAAMD,EAAAA,EAAAA,GAAE,QAAS,CAAEzC,KAAM,SAAU2C,IAAMhD,GAAQnC,KAAK4B,cAAgBO,EAAKpC,MAAOC,KAAKD,SAAUkF,EAAAA,EAAAA,GAAE,OAAQ,OAEzH9C,SAAO,OAAOiD,EAAAA,EAAAA,GAAWpF,MAClBqF,sBAAa,MAAO,CAC7B,MAAS,CAAC,mBAGd7E,EAAc8E,MAAQ/E","sources":["webpack://elements-vue-example/../elements/dist/esm/config-5f0f1b9e.js","webpack://elements-vue-example/../elements/dist/esm/ino-currency-input.entry.js"],"sourcesContent":["/*!\n * Crafted with ❤ by inovex GmbH\n */\nclass Config {\n  get(key, fallback) {\n    const value = this.storage && this.storage[key];\n    return value !== null && value !== void 0 ? value : fallback;\n  }\n  patch(key, value) {\n    if (this.storage && this.storage[key]) {\n      this.storage[key] = value;\n    }\n  }\n  get storage() {\n    if (typeof window !== 'undefined') {\n      const configWrapper = window.inoElements;\n      if (configWrapper && configWrapper.config) {\n        return configWrapper.config;\n      }\n    }\n    return null;\n  }\n}\nconst config = new Config();\n/**\n * Setups the config. Function to be called during intialization to set config / user preferences.\n *\n * @param config A given config\n */\nconst setupConfig = (config) => {\n  const win = window;\n  const namespace = win.inoElements;\n  if (namespace && namespace.config && namespace.config.constructor.name !== 'Object') {\n    console.error('inovex elements config was already initialized');\n    return;\n  }\n  win.inoElements = win.inoElements || {};\n  win.inoElements.config = config;\n};\n\nexport { config as c, setupConfig as s };\n","/*!\n * Crafted with ❤ by inovex GmbH\n */\nimport { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-5082bac1.js';\nimport { c as config } from './config-5f0f1b9e.js';\n\nconst inoCurrencyInputCss = \"\";\n\nlet CurrencyInput = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.valueChange = createEvent(this, \"valueChange\", 7);\n    this.defaultLocale = 'de-DE';\n    // -------\n    // Event Handler\n    this.handleValueChange = (e) => {\n      let value = e.detail;\n      // value is string => !\"0\" == true\n      value = !value ? null : this.fromCurrencyString(value);\n      // Set the hidden input value here and emit the event. This is not fully unmanaged,\n      // but ensures that the value is always up-to-date and the value watcher doesn't format\n      // the input (see valueChanged function).\n      if (!Number.isNaN(value)) {\n        this.hiddenValue = value;\n        this.valueChange.emit(value);\n      }\n      e.stopPropagation();\n    };\n    this.handleFocus = () => {\n      this.inoInputEl.value = this.trimCurrencyString(this.inoInputEl.value);\n    };\n    this.handleBlur = () => {\n      const value = this.hiddenInputEl.value;\n      if (value && value != 'null') {\n        this.inoInputEl.value = this.toCurrencyString(value);\n      }\n    };\n  }\n  valueChanged(value) {\n    var _a;\n    if ((!value && value !== 0) || value === 'null') {\n      this.hiddenValue = null;\n      this.inputValue = null;\n    }\n    // Only set value if not from user input (has been set before)\n    else if (value != ((_a = this.hiddenInputEl) === null || _a === void 0 ? void 0 : _a.value)) {\n      this.hiddenValue = value.toString();\n      this.inputValue = this.toCurrencyString(value);\n    }\n  }\n  componentDidLoad() {\n    var _a;\n    this.inoInputEl = this.el.querySelector('ino-input');\n    (_a = this.inoInputEl) === null || _a === void 0 ? void 0 : _a.setUserInputInterceptor((value) => this.trimCurrencyString(value));\n    if (!this.inoInputEl) {\n      console.error('currency input requires ino-input as child');\n    }\n    if (this.inoInputEl.type !== 'text') {\n      console.error('currency input has to be of type \"text\"');\n    }\n    this.initialize();\n  }\n  connectedCallback() {\n    // This is needed if the currency input is reattached to the dom (for instance in a popover)\n    this.initialize();\n  }\n  disconnectedCallback() {\n    var _a, _b, _c;\n    (_a = this.inoInputEl) === null || _a === void 0 ? void 0 : _a.removeEventListener('inoFocus', this.handleFocus);\n    (_b = this.inoInputEl) === null || _b === void 0 ? void 0 : _b.removeEventListener('inoBlur', this.handleBlur);\n    (_c = this.inoInputEl) === null || _c === void 0 ? void 0 : _c.removeEventListener('valueChange', this.handleValueChange);\n  }\n  initialize() {\n    var _a, _b, _c;\n    // This is needed if the currency input is reattached to the dom (for instance in a popover)\n    if (this.hiddenInputEl) {\n      this.setupHiddenInput();\n    }\n    // Setup listener manually to only handle child events and catch non-bubbeling focus / blur.\n    // @Listen would also trigger on valueChange of currency-input.\n    (_a = this.inoInputEl) === null || _a === void 0 ? void 0 : _a.addEventListener('inoFocus', this.handleFocus);\n    (_b = this.inoInputEl) === null || _b === void 0 ? void 0 : _b.addEventListener('inoBlur', this.handleBlur);\n    (_c = this.inoInputEl) === null || _c === void 0 ? void 0 : _c.addEventListener('valueChange', this.handleValueChange);\n  }\n  // -------\n  // Utils\n  set hiddenValue(value) {\n    if (this.hiddenInputEl) {\n      this.hiddenInputEl.value = value;\n    }\n  }\n  set inputValue(value) {\n    if (this.inoInputEl) {\n      this.inoInputEl.value = value;\n    }\n  }\n  setupHiddenInput() {\n    this.hiddenValue = String(this.value);\n    this.hiddenInputEl.name = this.inoInputEl.name;\n    this.inoInputEl.name = null;\n    this.inoInputEl.resetOnChange = false;\n    this.hiddenInputEl.min = this.inoInputEl.min;\n    this.hiddenInputEl.max = this.inoInputEl.max;\n    this.hiddenInputEl.disabled = this.inoInputEl.disabled;\n    this.hiddenInputEl.required = this.inoInputEl.required;\n    this.inoInputEl.value = this.toCurrencyString(this.value);\n  }\n  // -----\n  // Currency logic\n  getSeperator() {\n    return this.toCurrencyString(0).charAt(1);\n  }\n  toCurrencyString(value) {\n    var _a;\n    if (!value && value !== 0)\n      return null;\n    const locale = ((_a = this.currencyLocale) === null || _a === void 0 ? void 0 : _a.length) > 0\n      ? this.currencyLocale\n      : config.get('currencyLocale', this.defaultLocale);\n    const opts = { minimumFractionDigits: 2, maximumFractionDigits: 2 };\n    return Intl.NumberFormat(locale, opts).format(Number(value));\n  }\n  trimCurrencyString(value) {\n    if (!value) {\n      return value;\n    }\n    const leadingSymbol = this.extractLeadingSymbol(value);\n    const separator = this.getSeperator();\n    const numberParts = this.removeNonDecimalValues(value).split(separator);\n    // Always keep the first part\n    value = numberParts[0];\n    // Decimals\n    if (numberParts.length > 1) {\n      // Only keep the first decimal occurence and only the given precision\n      value += separator + numberParts[1].substring(0, 2);\n    }\n    return leadingSymbol + value;\n  }\n  fromCurrencyString(value) {\n    const leadingSymbol = this.extractLeadingSymbol(value);\n    const separator = this.getSeperator();\n    const newValue = this.removeNonDecimalValues(value).replace(separator, '.');\n    return Number(leadingSymbol + newValue);\n  }\n  extractLeadingSymbol(value) {\n    var _a;\n    const min = (_a = this.inoInputEl) === null || _a === void 0 ? void 0 : _a.min;\n    const requirePositive = min && Number(min) >= 0;\n    return requirePositive ? '' : value.startsWith('-') ? '-' : '';\n  }\n  removeNonDecimalValues(value) {\n    const currencyRegex = new RegExp(`[^${this.getSeperator()}0-9]`, 'g');\n    return value.replace(currencyRegex, '');\n  }\n  render() {\n    return (h(Host, null, h(\"input\", { type: \"hidden\", ref: (el) => (this.hiddenInputEl = el), value: this.value }), h(\"slot\", null)));\n  }\n  get el() { return getElement(this); }\n  static get watchers() { return {\n    \"value\": [\"valueChanged\"]\n  }; }\n};\nCurrencyInput.style = inoCurrencyInputCss;\n\nexport { CurrencyInput as ino_currency_input };\n"],"names":["Config","get","key","fallback","value","this","storage","patch","window","configWrapper","inoElements","config","inoCurrencyInputCss","CurrencyInput","constructor","hostRef","registerInstance","valueChange","createEvent","defaultLocale","handleValueChange","e","detail","fromCurrencyString","Number","isNaN","hiddenValue","emit","stopPropagation","handleFocus","inoInputEl","trimCurrencyString","handleBlur","hiddenInputEl","toCurrencyString","valueChanged","_a","inputValue","toString","componentDidLoad","el","querySelector","setUserInputInterceptor","console","error","type","initialize","connectedCallback","disconnectedCallback","_b","_c","removeEventListener","setupHiddenInput","addEventListener","String","name","resetOnChange","min","max","disabled","required","getSeperator","charAt","locale","currencyLocale","length","opts","minimumFractionDigits","maximumFractionDigits","Intl","NumberFormat","format","leadingSymbol","extractLeadingSymbol","separator","numberParts","removeNonDecimalValues","split","substring","newValue","replace","requirePositive","startsWith","currencyRegex","RegExp","render","h","Host","ref","getElement","watchers","style"],"sourceRoot":""}