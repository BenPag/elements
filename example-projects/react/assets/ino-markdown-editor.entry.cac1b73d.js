var nl=Object.defineProperty,ol=Object.defineProperties;var sl=Object.getOwnPropertyDescriptors;var Qr=Object.getOwnPropertySymbols;var pi=Object.prototype.hasOwnProperty,hi=Object.prototype.propertyIsEnumerable;var fi=(r,t,e)=>t in r?nl(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,x=(r,t)=>{for(var e in t||(t={}))pi.call(t,e)&&fi(r,e,t[e]);if(Qr)for(var e of Qr(t))hi.call(t,e)&&fi(r,e,t[e]);return r},Et=(r,t)=>ol(r,sl(t));var di=(r,t)=>{var e={};for(var n in r)pi.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&Qr)for(var n of Qr(r))t.indexOf(n)<0&&hi.call(r,n)&&(e[n]=r[n]);return e};import{r as il,c as ho,h as J}from"./index.8a29c9ac.js";import{c as je}from"./index-7e3a00fd.39ad80ca.js";import{c as al}from"./_commonjsHelpers-6ccee0aa.3580eb33.js";/*!
 * Crafted with ❤ by inovex GmbH
 */function dt(r){this.content=r}dt.prototype={constructor:dt,find:function(r){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===r)return t;return-1},get:function(r){var t=this.find(r);return t==-1?void 0:this.content[t+1]},update:function(r,t,e){var n=e&&e!=r?this.remove(e):this,o=n.find(r),s=n.content.slice();return o==-1?s.push(e||r,t):(s[o+1]=t,e&&(s[o]=e)),new dt(s)},remove:function(r){var t=this.find(r);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new dt(e)},addToStart:function(r,t){return new dt([r,t].concat(this.remove(r).content))},addToEnd:function(r,t){var e=this.remove(r).content.slice();return e.push(r,t),new dt(e)},addBefore:function(r,t,e){var n=this.remove(t),o=n.content.slice(),s=n.find(r);return o.splice(s==-1?o.length:s,0,t,e),new dt(o)},forEach:function(r){for(var t=0;t<this.content.length;t+=2)r(this.content[t],this.content[t+1])},prepend:function(r){return r=dt.from(r),r.size?new dt(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=dt.from(r),r.size?new dt(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var t=this;r=dt.from(r);for(var e=0;e<r.content.length;e+=2)t=t.remove(r.content[e]);return t},get size(){return this.content.length>>1}};dt.from=function(r){if(r instanceof dt)return r;var t=[];if(r)for(var e in r)t.push(e,r[e]);return new dt(t)};var mi=dt;function Ka(r,t,e){for(var n=0;;n++){if(n==r.childCount||n==t.childCount)return r.childCount==t.childCount?null:e;var o=r.child(n),s=t.child(n);if(o==s){e+=o.nodeSize;continue}if(!o.sameMarkup(s))return e;if(o.isText&&o.text!=s.text){for(var i=0;o.text[i]==s.text[i];i++)e++;return e}if(o.content.size||s.content.size){var a=Ka(o.content,s.content,e+1);if(a!=null)return a}e+=o.nodeSize}}function Wa(r,t,e,n){for(var o=r.childCount,s=t.childCount;;){if(o==0||s==0)return o==s?null:{a:e,b:n};var i=r.child(--o),a=t.child(--s),c=i.nodeSize;if(i==a){e-=c,n-=c;continue}if(!i.sameMarkup(a))return{a:e,b:n};if(i.isText&&i.text!=a.text){for(var u=0,l=Math.min(i.text.length,a.text.length);u<l&&i.text[i.text.length-u-1]==a.text[a.text.length-u-1];)u++,e--,n--;return{a:e,b:n}}if(i.content.size||a.content.size){var f=Wa(i.content,a.content,e-1,n-1);if(f)return f}e-=c,n-=c}}var C=function(t,e){if(this.content=t,this.size=e||0,e==null)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Kn={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};C.prototype.nodesBetween=function(t,e,n,o,s){o===void 0&&(o=0);for(var i=0,a=0;a<e;i++){var c=this.content[i],u=a+c.nodeSize;if(u>t&&n(c,o+a,s,i)!==!1&&c.content.size){var l=a+1;c.nodesBetween(Math.max(0,t-l),Math.min(c.content.size,e-l),n,o+l)}a=u}};C.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)};C.prototype.textBetween=function(t,e,n,o){var s="",i=!0;return this.nodesBetween(t,e,function(a,c){a.isText?(s+=a.text.slice(Math.max(t,c)-c,e-c),i=!n):a.isLeaf&&o?(s+=typeof o=="function"?o(a):o,i=!n):!i&&a.isBlock&&(s+=n,i=!0)},0),s};C.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,o=this.content.slice(),s=0;for(e.isText&&e.sameMarkup(n)&&(o[o.length-1]=e.withText(e.text+n.text),s=1);s<t.content.length;s++)o.push(t.content[s]);return new C(o,this.size+t.size)};C.prototype.cut=function(t,e){if(e==null&&(e=this.size),t==0&&e==this.size)return this;var n=[],o=0;if(e>t)for(var s=0,i=0;i<e;s++){var a=this.content[s],c=i+a.nodeSize;c>t&&((i<t||c>e)&&(a.isText?a=a.cut(Math.max(0,t-i),Math.min(a.text.length,e-i)):a=a.cut(Math.max(0,t-i-1),Math.min(a.content.size,e-i-1))),n.push(a),o+=a.nodeSize),i=c}return new C(n,o)};C.prototype.cutByIndex=function(t,e){return t==e?C.empty:t==0&&e==this.content.length?this:new C(this.content.slice(t,e))};C.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var o=this.content.slice(),s=this.size+e.nodeSize-n.nodeSize;return o[t]=e,new C(o,s)};C.prototype.addToStart=function(t){return new C([t].concat(this.content),this.size+t.nodeSize)};C.prototype.addToEnd=function(t){return new C(this.content.concat(t),this.size+t.nodeSize)};C.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0};Kn.firstChild.get=function(){return this.content.length?this.content[0]:null};Kn.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};Kn.childCount.get=function(){return this.content.length};C.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e};C.prototype.maybeChild=function(t){return this.content[t]};C.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var o=this.content[e];t(o,n,e),n+=o.nodeSize}};C.prototype.findDiffStart=function(t,e){return e===void 0&&(e=0),Ka(this,t,e)};C.prototype.findDiffEnd=function(t,e,n){return e===void 0&&(e=this.size),n===void 0&&(n=t.size),Wa(this,t,e,n)};C.prototype.findIndex=function(t,e){if(e===void 0&&(e=-1),t==0)return Xr(0,t);if(t==this.size)return Xr(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,o=0;;n++){var s=this.child(n),i=o+s.nodeSize;if(i>=t)return i==t||e>0?Xr(n+1,i):Xr(n,o);o=i}};C.prototype.toString=function(){return"<"+this.toStringInner()+">"};C.prototype.toStringInner=function(){return this.content.join(", ")};C.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null};C.fromJSON=function(t,e){if(!e)return C.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new C(e.map(t.nodeFromJSON))};C.fromArray=function(t){if(!t.length)return C.empty;for(var e,n=0,o=0;o<t.length;o++){var s=t[o];n+=s.nodeSize,o&&s.isText&&t[o-1].sameMarkup(s)?(e||(e=t.slice(0,o)),e[e.length-1]=s.withText(e[e.length-1].text+s.text)):e&&e.push(s)}return new C(e||t,n)};C.from=function(t){if(!t)return C.empty;if(t instanceof C)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new C([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))};Object.defineProperties(C.prototype,Kn);var mo={index:0,offset:0};function Xr(r,t){return mo.index=r,mo.offset=t,mo}C.empty=new C([],0);function cn(r,t){if(r===t)return!0;if(!(r&&typeof r=="object")||!(t&&typeof t=="object"))return!1;var e=Array.isArray(r);if(Array.isArray(t)!=e)return!1;if(e){if(r.length!=t.length)return!1;for(var n=0;n<r.length;n++)if(!cn(r[n],t[n]))return!1}else{for(var o in r)if(!(o in t)||!cn(r[o],t[o]))return!1;for(var s in t)if(!(s in r))return!1}return!0}var V=function(t,e){this.type=t,this.attrs=e};V.prototype.addToSet=function(t){for(var e,n=!1,o=0;o<t.length;o++){var s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))e||(e=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!n&&s.type.rank>this.type.rank&&(e||(e=t.slice(0,o)),e.push(this),n=!0),e&&e.push(s)}}return e||(e=t.slice()),n||e.push(this),e};V.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t};V.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1};V.prototype.eq=function(t){return this==t||this.type==t.type&&cn(this.attrs,t.attrs)};V.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t};V.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)};V.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0};V.setFrom=function(t){if(!t||t.length==0)return V.none;if(t instanceof V)return[t];var e=t.slice();return e.sort(function(n,o){return n.type.rank-o.type.rank}),e};V.none=[];function re(r){var t=Error.call(this,r);return t.__proto__=re.prototype,t}re.prototype=Object.create(Error.prototype);re.prototype.constructor=re;re.prototype.name="ReplaceError";var S=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Ga={size:{configurable:!0}};Ga.size.get=function(){return this.content.size-this.openStart-this.openEnd};S.prototype.insertAt=function(t,e){var n=Za(this.content,t+this.openStart,e,null);return n&&new S(n,this.openStart,this.openEnd)};S.prototype.removeBetween=function(t,e){return new S($a(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)};S.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd};S.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"};S.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t};S.fromJSON=function(t,e){if(!e)return S.empty;var n=e.openStart||0,o=e.openEnd||0;if(typeof n!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new S(C.fromJSON(t,e.content),n,o)};S.maxOpen=function(t,e){e===void 0&&(e=!0);for(var n=0,o=0,s=t.firstChild;s&&!s.isLeaf&&(e||!s.type.spec.isolating);s=s.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)o++;return new S(t,n,o)};Object.defineProperties(S.prototype,Ga);function $a(r,t,e){var n=r.findIndex(t),o=n.index,s=n.offset,i=r.maybeChild(o),a=r.findIndex(e),c=a.index,u=a.offset;if(s==t||i.isText){if(u!=e&&!r.child(c).isText)throw new RangeError("Removing non-flat range");return r.cut(0,t).append(r.cut(e))}if(o!=c)throw new RangeError("Removing non-flat range");return r.replaceChild(o,i.copy($a(i.content,t-s-1,e-s-1)))}function Za(r,t,e,n){var o=r.findIndex(t),s=o.index,i=o.offset,a=r.maybeChild(s);if(i==t||a.isText)return n&&!n.canReplace(s,s,e)?null:r.cut(0,t).append(e).append(r.cut(t));var c=Za(a.content,t-i-1,e);return c&&r.replaceChild(s,a.copy(c))}S.empty=new S(C.empty,0,0);function cl(r,t,e){if(e.openStart>r.depth)throw new re("Inserted content deeper than insertion position");if(r.depth-e.openStart!=t.depth-e.openEnd)throw new re("Inconsistent open depths");return Ya(r,t,e,0)}function Ya(r,t,e,n){var o=r.index(n),s=r.node(n);if(o==t.index(n)&&n<r.depth-e.openStart){var i=Ya(r,t,e,n+1);return s.copy(s.content.replaceChild(o,i))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&r.depth==n&&t.depth==n){var a=r.parent,c=a.content;return Re(a,c.cut(0,r.parentOffset).append(e.content).append(c.cut(t.parentOffset)))}else{var u=ul(e,r),l=u.start,f=u.end;return Re(s,Xa(r,l,f,t,n))}else return Re(s,un(r,t,n))}function Qa(r,t){if(!t.type.compatibleContent(r.type))throw new re("Cannot join "+t.type.name+" onto "+r.type.name)}function Go(r,t,e){var n=r.node(e);return Qa(n,t.node(e)),n}function Be(r,t){var e=t.length-1;e>=0&&r.isText&&r.sameMarkup(t[e])?t[e]=r.withText(t[e].text+r.text):t.push(r)}function Ar(r,t,e,n){var o=(t||r).node(e),s=0,i=t?t.index(e):o.childCount;r&&(s=r.index(e),r.depth>e?s++:r.textOffset&&(Be(r.nodeAfter,n),s++));for(var a=s;a<i;a++)Be(o.child(a),n);t&&t.depth==e&&t.textOffset&&Be(t.nodeBefore,n)}function Re(r,t){if(!r.type.validContent(t))throw new re("Invalid content for node "+r.type.name);return r.copy(t)}function Xa(r,t,e,n,o){var s=r.depth>o&&Go(r,t,o+1),i=n.depth>o&&Go(e,n,o+1),a=[];return Ar(null,r,o,a),s&&i&&t.index(o)==e.index(o)?(Qa(s,i),Be(Re(s,Xa(r,t,e,n,o+1)),a)):(s&&Be(Re(s,un(r,t,o+1)),a),Ar(t,e,o,a),i&&Be(Re(i,un(e,n,o+1)),a)),Ar(n,null,o,a),new C(a)}function un(r,t,e){var n=[];if(Ar(null,r,e,n),r.depth>e){var o=Go(r,t,e+1);Be(Re(o,un(r,t,e+1)),n)}return Ar(t,null,e,n),new C(n)}function ul(r,t){for(var e=t.depth-r.openStart,n=t.node(e),o=n.copy(r.content),s=e-1;s>=0;s--)o=t.node(s).copy(C.from(o));return{start:o.resolveNoCache(r.openStart+e),end:o.resolveNoCache(o.content.size-r.openEnd-e)}}var X=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},ur={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};X.prototype.resolveDepth=function(t){return t==null?this.depth:t<0?this.depth+t:t};ur.parent.get=function(){return this.node(this.depth)};ur.doc.get=function(){return this.node(0)};X.prototype.node=function(t){return this.path[this.resolveDepth(t)*3]};X.prototype.index=function(t){return this.path[this.resolveDepth(t)*3+1]};X.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)};X.prototype.start=function(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1};X.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size};X.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]};X.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize};ur.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};ur.nodeAfter.get=function(){var r=this.parent,t=this.index(this.depth);if(t==r.childCount)return null;var e=this.pos-this.path[this.path.length-1],n=r.child(t);return e?r.child(t).cut(e):n};ur.nodeBefore.get=function(){var r=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(r).cut(0,t):r==0?null:this.parent.child(r-1)};X.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[e*3],o=e==0?0:this.path[e*3-1]+1,s=0;s<t;s++)o+=n.child(s).nodeSize;return o};X.prototype.marks=function(){var t=this.parent,e=this.index();if(t.content.size==0)return V.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),o=t.maybeChild(e);if(!n){var s=n;n=o,o=s}for(var i=n.marks,a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!o||!i[a].isInSet(o.marks))&&(i=i[a--].removeFromSet(i));return i};X.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,o=t.parent.maybeChild(t.index()),s=0;s<n.length;s++)n[s].type.spec.inclusive===!1&&(!o||!n[s].isInSet(o.marks))&&(n=n[s--].removeFromSet(n));return n};X.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0};X.prototype.blockRange=function(t,e){if(t===void 0&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Br(this,t,n)};X.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset};X.prototype.max=function(t){return t.pos>this.pos?t:this};X.prototype.min=function(t){return t.pos<this.pos?t:this};X.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset};X.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],o=0,s=e,i=t;;){var a=i.content.findIndex(s),c=a.index,u=a.offset,l=s-u;if(n.push(i,c,o+u),!l||(i=i.child(c),i.isText))break;s=l-1,o+=u+1}return new X(e,n,s)};X.resolveCached=function(t,e){for(var n=0;n<go.length;n++){var o=go[n];if(o.pos==e&&o.doc==t)return o}var s=go[vo]=X.resolve(t,e);return vo=(vo+1)%ll,s};Object.defineProperties(X.prototype,ur);var go=[],vo=0,ll=12,Br=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},lr={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};lr.start.get=function(){return this.$from.before(this.depth+1)};lr.end.get=function(){return this.$to.after(this.depth+1)};lr.parent.get=function(){return this.$from.node(this.depth)};lr.startIndex.get=function(){return this.$from.index(this.depth)};lr.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(Br.prototype,lr);var fl=Object.create(null),j=function(t,e,n,o){this.type=t,this.attrs=e,this.content=n||C.empty,this.marks=o||V.none},Ft={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Ft.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};Ft.childCount.get=function(){return this.content.childCount};j.prototype.child=function(t){return this.content.child(t)};j.prototype.maybeChild=function(t){return this.content.maybeChild(t)};j.prototype.forEach=function(t){this.content.forEach(t)};j.prototype.nodesBetween=function(t,e,n,o){o===void 0&&(o=0),this.content.nodesBetween(t,e,n,o,this)};j.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)};Ft.textContent.get=function(){return this.textBetween(0,this.content.size,"")};j.prototype.textBetween=function(t,e,n,o){return this.content.textBetween(t,e,n,o)};Ft.firstChild.get=function(){return this.content.firstChild};Ft.lastChild.get=function(){return this.content.lastChild};j.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)};j.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)};j.prototype.hasMarkup=function(t,e,n){return this.type==t&&cn(this.attrs,e||t.defaultAttrs||fl)&&V.sameSet(this.marks,n||V.none)};j.prototype.copy=function(t){return t===void 0&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)};j.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)};j.prototype.cut=function(t,e){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))};j.prototype.slice=function(t,e,n){if(e===void 0&&(e=this.content.size),n===void 0&&(n=!1),t==e)return S.empty;var o=this.resolve(t),s=this.resolve(e),i=n?0:o.sharedDepth(e),a=o.start(i),c=o.node(i),u=c.content.cut(o.pos-a,s.pos-a);return new S(u,o.depth-i,s.depth-i)};j.prototype.replace=function(t,e,n){return cl(this.resolve(t),this.resolve(e),n)};j.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),o=n.index,s=n.offset;if(e=e.maybeChild(o),!e)return null;if(s==t||e.isText)return e;t-=s+1}};j.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,o=e.offset;return{node:this.content.maybeChild(n),index:n,offset:o}};j.prototype.childBefore=function(t){if(t==0)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,o=e.offset;if(o<t)return{node:this.content.child(n),index:n,offset:o};var s=this.content.child(n-1);return{node:s,index:n-1,offset:o-s.nodeSize}};j.prototype.resolve=function(t){return X.resolveCached(this,t)};j.prototype.resolveNoCache=function(t){return X.resolve(this,t)};j.prototype.rangeHasMark=function(t,e,n){var o=!1;return e>t&&this.nodesBetween(t,e,function(s){return n.isInSet(s.marks)&&(o=!0),!o}),o};Ft.isBlock.get=function(){return this.type.isBlock};Ft.isTextblock.get=function(){return this.type.isTextblock};Ft.inlineContent.get=function(){return this.type.inlineContent};Ft.isInline.get=function(){return this.type.isInline};Ft.isText.get=function(){return this.type.isText};Ft.isLeaf.get=function(){return this.type.isLeaf};Ft.isAtom.get=function(){return this.type.isAtom};j.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),tc(this.marks,t)};j.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e};j.prototype.canReplace=function(t,e,n,o,s){n===void 0&&(n=C.empty),o===void 0&&(o=0),s===void 0&&(s=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,o,s),a=i&&i.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var c=o;c<s;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0};j.prototype.canReplaceWith=function(t,e,n,o){if(o&&!this.type.allowsMarks(o))return!1;var s=this.contentMatchAt(t).matchType(n),i=s&&s.matchFragment(this.content,e);return i?i.validEnd:!1};j.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)};j.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=V.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!V.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(n){return n.type.name}));this.content.forEach(function(n){return n.check()})};j.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(n){return n.toJSON()})),t};j.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var o=C.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,o,n)};Object.defineProperties(j.prototype,Ft);var pl=function(r){function t(n,o,s,i){if(r.call(this,n,o,null,i),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tc(this.marks,JSON.stringify(this.text))},e.textContent.get=function(){return this.text},t.prototype.textBetween=function(o,s){return this.text.slice(o,s)},e.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(o){return o==this.marks?this:new t(this.type,this.attrs,this.text,o)},t.prototype.withText=function(o){return o==this.text?this:new t(this.type,this.attrs,o,this.marks)},t.prototype.cut=function(o,s){return o===void 0&&(o=0),s===void 0&&(s=this.text.length),o==0&&s==this.text.length?this:this.withText(this.text.slice(o,s))},t.prototype.eq=function(o){return this.sameMarkup(o)&&this.text==o.text},t.prototype.toJSON=function(){var o=r.prototype.toJSON.call(this);return o.text=this.text,o},Object.defineProperties(t.prototype,e),t}(j);function tc(r,t){for(var e=r.length-1;e>=0;e--)t=r[e].type.name+"("+t+")";return t}var mt=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Wn={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};mt.parse=function(t,e){var n=new Gn(t,e);if(n.next==null)return mt.empty;var o=rc(n);n.next&&n.err("Unexpected trailing text");var s=bl(yl(o));return kl(s,n),s};mt.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null};mt.prototype.matchFragment=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=t.childCount);for(var o=this,s=e;o&&s<n;s++)o=o.matchType(t.child(s).type);return o};Wn.inlineContent.get=function(){var r=this.next[0];return r?r.isInline:!1};Wn.defaultType.get=function(){for(var r=0;r<this.next.length;r+=2){var t=this.next[r];if(!(t.isText||t.hasRequiredAttrs()))return t}};mt.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1};mt.prototype.fillBefore=function(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=0);var o=[this];function s(i,a){var c=i.matchFragment(t,n);if(c&&(!e||c.validEnd))return C.from(a.map(function(h){return h.createAndFill()}));for(var u=0;u<i.next.length;u+=2){var l=i.next[u],f=i.next[u+1];if(!(l.isText||l.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);var p=s(f,a.concat(l));if(p)return p}}}return s(this,[])};mt.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n};mt.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var o=n.shift(),s=o.match;if(s.matchType(t)){for(var i=[],a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var c=0;c<s.next.length;c+=2){var u=s.next[c];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in e)&&(!o.type||s.next[c+1].validEnd)&&(n.push({match:u.contentMatch,type:u,via:o}),e[u.name]=!0)}}};Wn.edgeCount.get=function(){return this.next.length>>1};mt.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}};mt.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var o=1;o<n.next.length;o+=2)t.indexOf(n.next[o])==-1&&e(n.next[o])}return e(this),t.map(function(n,o){for(var s=o+(n.validEnd?"*":" ")+" ",i=0;i<n.next.length;i+=2)s+=(i?", ":"")+n.next[i].name+"->"+t.indexOf(n.next[i+1]);return s}).join(`
`)};Object.defineProperties(mt.prototype,Wn);mt.empty=new mt(!0);var Gn=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()},ec={next:{configurable:!0}};ec.next.get=function(){return this.tokens[this.pos]};Gn.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)};Gn.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")};Object.defineProperties(Gn.prototype,ec);function rc(r){var t=[];do t.push(hl(r));while(r.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function hl(r){var t=[];do t.push(dl(r));while(r.next&&r.next!=")"&&r.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function dl(r){for(var t=vl(r);;)if(r.eat("+"))t={type:"plus",expr:t};else if(r.eat("*"))t={type:"star",expr:t};else if(r.eat("?"))t={type:"opt",expr:t};else if(r.eat("{"))t=ml(r,t);else break;return t}function gi(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");var t=Number(r.next);return r.pos++,t}function ml(r,t){var e=gi(r),n=e;return r.eat(",")&&(r.next!="}"?n=gi(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:e,max:n,expr:t}}function gl(r,t){var e=r.nodeTypes,n=e[t];if(n)return[n];var o=[];for(var s in e){var i=e[s];i.groups.indexOf(t)>-1&&o.push(i)}return o.length==0&&r.err("No node type or group '"+t+"' found"),o}function vl(r){if(r.eat("(")){var t=rc(r);return r.eat(")")||r.err("Missing closing paren"),t}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{var e=gl(r,r.next).map(function(n){return r.inline==null?r.inline=n.isInline:r.inline!=n.isInline&&r.err("Mixing inline and block content"),{type:"name",value:n}});return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yl(r){var t=[[]];return o(s(r,0),e()),t;function e(){return t.push([])-1}function n(i,a,c){var u={term:c,to:a};return t[i].push(u),u}function o(i,a){i.forEach(function(c){return c.to=a})}function s(i,a){if(i.type=="choice")return i.exprs.reduce(function(y,g){return y.concat(s(g,a))},[]);if(i.type=="seq")for(var c=0;;c++){var u=s(i.exprs[c],a);if(c==i.exprs.length-1)return u;o(u,a=e())}else if(i.type=="star"){var l=e();return n(a,l),o(s(i.expr,l),l),[n(l)]}else if(i.type=="plus"){var f=e();return o(s(i.expr,a),f),o(s(i.expr,f),f),[n(f)]}else{if(i.type=="opt")return[n(a)].concat(s(i.expr,a));if(i.type=="range"){for(var p=a,h=0;h<i.min;h++){var d=e();o(s(i.expr,p),d),p=d}if(i.max==-1)o(s(i.expr,p),p);else for(var m=i.min;m<i.max;m++){var v=e();n(p,v),o(s(i.expr,p),v),p=v}return[n(p)]}else if(i.type=="name")return[n(a,null,i.value)]}}}function nc(r,t){return t-r}function vi(r,t){var e=[];return n(t),e.sort(nc);function n(o){var s=r[o];if(s.length==1&&!s[0].term)return n(s[0].to);e.push(o);for(var i=0;i<s.length;i++){var a=s[i],c=a.term,u=a.to;!c&&e.indexOf(u)==-1&&n(u)}}}function bl(r){var t=Object.create(null);return e(vi(r,0));function e(n){var o=[];n.forEach(function(c){r[c].forEach(function(u){var l=u.term,f=u.to;if(!!l){var p=o.indexOf(l),h=p>-1&&o[p+1];vi(r,f).forEach(function(d){h||o.push(l,h=[]),h.indexOf(d)==-1&&h.push(d)})}})});for(var s=t[n.join(",")]=new mt(n.indexOf(r.length-1)>-1),i=0;i<o.length;i+=2){var a=o[i+1].sort(nc);s.next.push(o[i],t[a.join(",")]||e(a))}return s}}function kl(r,t){for(var e=0,n=[r];e<n.length;e++){for(var o=n[e],s=!o.validEnd,i=[],a=0;a<o.next.length;a+=2){var c=o.next[a],u=o.next[a+1];i.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),n.indexOf(u)==-1&&n.push(u)}s&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function oc(r){var t=Object.create(null);for(var e in r){var n=r[e];if(!n.hasDefault)return null;t[e]=n.default}return t}function sc(r,t){var e=Object.create(null);for(var n in r){var o=t&&t[n];if(o===void 0){var s=r[n];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+n)}e[n]=o}return e}function ic(r){var t=Object.create(null);if(r)for(var e in r)t[e]=new ac(r[e]);return t}var Ct=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=ic(n.attrs),this.defaultAttrs=oc(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"},fr={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};fr.isInline.get=function(){return!this.isBlock};fr.isTextblock.get=function(){return this.isBlock&&this.inlineContent};fr.isLeaf.get=function(){return this.contentMatch==mt.empty};fr.isAtom.get=function(){return this.isLeaf||this.spec.atom};fr.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")};Ct.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1};Ct.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)};Ct.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:sc(this.attrs,t)};Ct.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new j(this,this.computeAttrs(t),C.from(e),V.setFrom(n))};Ct.prototype.createChecked=function(t,e,n){if(e=C.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new j(this,this.computeAttrs(t),e,V.setFrom(n))};Ct.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=C.from(e),e.size){var o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}var s=this.contentMatch.matchFragment(e).fillBefore(C.empty,!0);return s?new j(this,t,e.append(s),V.setFrom(n)):null};Ct.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0};Ct.prototype.allowsMarkType=function(t){return this.markSet==null||this.markSet.indexOf(t)>-1};Ct.prototype.allowsMarks=function(t){if(this.markSet==null)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0};Ct.prototype.allowedMarks=function(t){if(this.markSet==null)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:V.empty:t};Ct.compile=function(t,e){var n=Object.create(null);t.forEach(function(i,a){return n[i]=new Ct(i,e,a)});var o=e.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var s in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n};Object.defineProperties(Ct.prototype,fr);var ac=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},cc={isRequired:{configurable:!0}};cc.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(ac.prototype,cc);var De=function(t,e,n,o){this.name=t,this.schema=n,this.spec=o,this.attrs=ic(o.attrs),this.rank=e,this.excluded=null;var s=oc(this.attrs);this.instance=s&&new V(this,s)};De.prototype.create=function(t){return!t&&this.instance?this.instance:new V(this,sc(this.attrs,t))};De.compile=function(t,e){var n=Object.create(null),o=0;return t.forEach(function(s,i){return n[s]=new De(s,o++,e,i)}),n};De.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t};De.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]};De.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Ee=function(t){this.spec={};for(var e in t)this.spec[e]=t[e];this.spec.nodes=mi.from(t.nodes),this.spec.marks=mi.from(t.marks),this.nodes=Ct.compile(this.spec.nodes,this),this.marks=De.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;s.contentMatch=n[i]||(n[i]=mt.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?yi(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(var c in this.marks){var u=this.marks[c],l=u.spec.excludes;u.excluded=l==null?[u]:l==""?[]:yi(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};Ee.prototype.node=function(t,e,n,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Ct){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,n,o)};Ee.prototype.text=function(t,e){var n=this.nodes.text;return new pl(n,n.defaultAttrs,t,V.setFrom(e))};Ee.prototype.mark=function(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)};Ee.prototype.nodeFromJSON=function(t){return j.fromJSON(this,t)};Ee.prototype.markFromJSON=function(t){return V.fromJSON(this,t)};Ee.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};function yi(r,t){for(var e=[],n=0;n<t.length;n++){var o=t[n],s=r.marks[o],i=s;if(s)e.push(s);else for(var a in r.marks){var c=r.marks[a];(o=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&e.push(i=c)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return e}var Ut=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(o){o.tag?n.tags.push(o):o.style&&n.styles.push(o)}),this.normalizeLists=!this.tags.some(function(o){if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;var s=t.nodes[o.node];return s.contentMatch.matchType(s)})};Ut.prototype.parse=function(t,e){e===void 0&&(e={});var n=new Q(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()};Ut.prototype.parseSlice=function(t,e){e===void 0&&(e={});var n=new Q(this,e,!0);return n.addAll(t,null,e.from,e.to),S.maxOpen(n.finish())};Ut.prototype.matchTag=function(t,e,n){for(var o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var s=this.tags[o];if(xl(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||e.matchesContext(s.context))){if(s.getAttrs){var i=s.getAttrs(t);if(i===!1)continue;s.attrs=i}return s}}};Ut.prototype.matchStyle=function(t,e,n,o){for(var s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){var i=this.styles[s];if(!(i.style.indexOf(t)!=0||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(i.style.charCodeAt(t.length)!=61||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var a=i.getAttrs(e);if(a===!1)continue;i.attrs=a}return i}}};Ut.schemaRules=function(t){var e=[];function n(c){for(var u=c.priority==null?50:c.priority,l=0;l<e.length;l++){var f=e[l],p=f.priority==null?50:f.priority;if(p<u)break}e.splice(l,0,c)}var o=function(c){var u=t.marks[c].spec.parseDOM;u&&u.forEach(function(l){n(l=bi(l)),l.mark=c})};for(var s in t.marks)o(s);var i=function(c){var u=t.nodes[a].spec.parseDOM;u&&u.forEach(function(l){n(l=bi(l)),l.node=a})};for(var a in t.nodes)i();return e};Ut.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Ut(t,Ut.schemaRules(t)))};var ms={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Dl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uc={ol:!0,ul:!0},ln=1,fn=2,Rr=4;function lc(r,t,e){return t!=null?(t?ln:0)|(t==="full"?fn:0):r&&r.whitespace=="pre"?ln|fn:e&~Rr}var fe=function(t,e,n,o,s,i,a){this.type=t,this.attrs=e,this.solid=s,this.match=i||(a&Rr?null:t.contentMatch),this.options=a,this.content=[],this.marks=n,this.activeMarks=V.none,this.pendingMarks=o,this.stashMarks=[]};fe.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(C.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{var n=this.type.contentMatch,o;return(o=n.findWrapping(t.type))?(this.match=n,o):null}}return this.match.findWrapping(t.type)};fe.prototype.finish=function(t){if(!(this.options&ln)){var e=this.content[this.content.length-1],n;e&&e.isText&&(n=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==n[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-n[0].length)))}var o=C.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(C.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o};fe.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]};fe.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var o=n[e];(this.type?this.type.allowsMarkType(o.type):El(o.type,t))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}};fe.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ms.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var Q=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var o=e.topNode,s,i=lc(null,e.preserveWhitespace,0)|(n?Rr:0);o?s=new fe(o.type,o.attrs,V.none,V.none,!0,e.topMatch||o.type.contentMatch,i):n?s=new fe(null,null,V.none,V.none,!0,null,i):s=new fe(t.schema.topNodeType,null,V.none,V.none,!0,null,i),this.nodes=[s],this.open=0,this.find=e.findPositions,this.needsBlock=!1},gs={top:{configurable:!0},currentPos:{configurable:!0}};gs.top.get=function(){return this.nodes[this.open]};Q.prototype.addDOM=function(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){var e=t.getAttribute("style"),n=e?this.readStyles(Al(e)):null,o=this.top;if(n!=null)for(var s=0;s<n.length;s++)this.addPendingMark(n[s]);if(this.addElement(t),n!=null)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],o)}};Q.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&fn||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&ln)n.options&fn?e=e.replace(/\r\n?/g,`
`):e=e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var o=n.content[n.content.length-1],s=t.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)};Q.prototype.addElement=function(t,e){var n=t.nodeName.toLowerCase(),o;uc.hasOwnProperty(n)&&this.parser.normalizeLists&&Cl(t);var s=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,e));if(s?s.ignore:Dl.hasOwnProperty(n))this.findInside(t),this.ignoreFallback(t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(t=s.skip);var i,a=this.top,c=this.needsBlock;if(ms.hasOwnProperty(n))i=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),i&&this.sync(a),this.needsBlock=c}else this.addElementByRule(t,s,s.consuming===!1?o:null)};Q.prototype.leafFallback=function(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))};Q.prototype.ignoreFallback=function(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))};Q.prototype.readStyles=function(t){var e=V.none;t:for(var n=0;n<t.length;n+=2)for(var o=null;;){var s=this.parser.matchStyle(t[n],t[n+1],this,o);if(!s)continue t;if(s.ignore)return null;if(e=this.parser.schema.marks[s.mark].create(s.attrs).addToSet(e),s.consuming===!1)o=s;else break}return e};Q.prototype.addElementByRule=function(t,e,n){var o=this,s,i,a,c;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):s=this.enter(i,e.attrs,e.preserveWhitespace)):(a=this.parser.schema.marks[e.mark],c=a.create(e.attrs),this.addPendingMark(c));var u=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(f){return o.insertNode(f)});else{var l=e.contentElement;typeof l=="string"?l=t.querySelector(l):typeof l=="function"&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,s)}s&&(this.sync(u),this.open--),c&&this.removePendingMark(c,u)};Q.prototype.addAll=function(t,e,n,o){for(var s=n||0,i=n?t.childNodes[n]:t.firstChild,a=o==null?null:t.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(i),e&&ms.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,s)};Q.prototype.findPlace=function(t){for(var e,n,o=this.open;o>=0;o--){var s=this.nodes[o],i=s.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=s,!i.length)||s.solid)break}if(!e)return!1;this.sync(n);for(var a=0;a<e.length;a++)this.enterInner(e[a],null,!1);return!0};Q.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var o=n.activeMarks,s=0;s<t.marks.length;s++)(!n.type||n.type.allowsMarkType(t.marks[s].type))&&(o=t.marks[s].addToSet(o));return n.content.push(t.mark(o)),!0}return!1};Q.prototype.enter=function(t,e,n){var o=this.findPlace(t.create(e));return o&&this.enterInner(t,e,!0,n),o};Q.prototype.enterInner=function(t,e,n,o){this.closeExtra();var s=this.top;s.applyPending(t),s.match=s.match&&s.match.matchType(t,e);var i=lc(t,o,s.options);s.options&Rr&&s.content.length==0&&(i|=Rr),this.nodes.push(new fe(t,e,s.activeMarks,s.pendingMarks,n,null,i)),this.open++};Q.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}};Q.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)};Q.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t){this.open=e;return}};gs.currentPos.get=function(){this.closeExtra();for(var r=0,t=this.open;t>=0;t--){for(var e=this.nodes[t].content,n=e.length-1;n>=0;n--)r+=e[n].nodeSize;t&&r++}return r};Q.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)};Q.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)};Q.prototype.findAround=function(t,e,n){if(t!=e&&this.find){for(var o=0;o<this.find.length;o++)if(this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)){var s=e.compareDocumentPosition(this.find[o].node);s&(n?2:4)&&(this.find[o].pos=this.currentPos)}}};Q.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))};Q.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),o=this.options.context,s=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),i=-(o?o.depth+1:0)+(s?0:1),a=function(c,u){for(;c>=0;c--){var l=n[c];if(l==""){if(c==n.length-1||c==0)continue;for(;u>=i;u--)if(a(c-1,u))return!0;return!1}else{var f=u>0||u==0&&s?e.nodes[u].type:o&&u>=i?o.node(u-i).type:null;if(!f||f.name!=l&&f.groups.indexOf(l)==-1)return!1;u--}}return!0};return a(n.length-1,this.open)};Q.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var o in this.parser.schema.nodes){var s=this.parser.schema.nodes[o];if(s.isTextblock&&s.defaultAttrs)return s}};Q.prototype.addPendingMark=function(t){var e=_l(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)};Q.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var o=this.nodes[n],s=o.pendingMarks.lastIndexOf(t);if(s>-1)o.pendingMarks=t.removeFromSet(o.pendingMarks);else{o.activeMarks=t.removeFromSet(o.activeMarks);var i=o.popFromStashMark(t);i&&o.type&&o.type.allowsMarkType(i.type)&&(o.activeMarks=i.addToSet(o.activeMarks))}if(o==e)break}};Object.defineProperties(Q.prototype,gs);function Cl(r){for(var t=r.firstChild,e=null;t;t=t.nextSibling){var n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&uc.hasOwnProperty(n)&&e?(e.appendChild(t),t=e):n=="li"?e=t:n&&(e=null)}}function xl(r,t){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,t)}function Al(r){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,e,n=[];e=t.exec(r);)n.push(e[1],e[2].trim());return n}function bi(r){var t={};for(var e in r)t[e]=r[e];return t}function El(r,t){var e=t.schema.nodes,n=function(i){var a=e[i];if(!!a.allowsMarkType(r)){var c=[],u=function(l){c.push(l);for(var f=0;f<l.edgeCount;f++){var p=l.edge(f),h=p.type,d=p.next;if(h==t||c.indexOf(d)<0&&u(d))return!0}};if(u(a.contentMatch))return{v:!0}}};for(var o in e){var s=n(o);if(s)return s.v}}function _l(r,t){for(var e=0;e<t.length;e++)if(r.eq(t[e]))return t[e]}var ct=function(t,e){this.nodes=t||{},this.marks=e||{}};ct.prototype.serializeFragment=function(t,e,n){var o=this;e===void 0&&(e={}),n||(n=vs(e).createDocumentFragment());var s=n,i=null;return t.forEach(function(a){if(i||a.marks.length){i||(i=[]);for(var c=0,u=0;c<i.length&&u<a.marks.length;){var l=a.marks[u];if(!o.marks[l.type.name]){u++;continue}if(!l.eq(i[c])||l.type.spec.spanning===!1)break;c+=2,u++}for(;c<i.length;)s=i.pop(),i.pop();for(;u<a.marks.length;){var f=a.marks[u++],p=o.serializeMark(f,a.isInline,e);p&&(i.push(f,s),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(o.serializeNodeInner(a,e))}),n};ct.prototype.serializeNodeInner=function(t,e){e===void 0&&(e={});var n=ct.renderSpec(vs(e),this.nodes[t.type.name](t)),o=n.dom,s=n.contentDOM;if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,s,e):this.serializeFragment(t.content,e,s)}return o};ct.prototype.serializeNode=function(t,e){e===void 0&&(e={});for(var n=this.serializeNodeInner(t,e),o=t.marks.length-1;o>=0;o--){var s=this.serializeMark(t.marks[o],t.isInline,e);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n};ct.prototype.serializeMark=function(t,e,n){n===void 0&&(n={});var o=this.marks[t.type.name];return o&&ct.renderSpec(vs(n),o(t,e))};ct.renderSpec=function(t,e,n){if(n===void 0&&(n=null),typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;var o=e[0],s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));var i=null,a=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(var l in c)if(c[l]!=null){var f=l.indexOf(" ");f>0?a.setAttributeNS(l.slice(0,f),l.slice(f+1),c[l]):a.setAttribute(l,c[l])}}for(var p=u;p<e.length;p++){var h=e[p];if(h===0){if(p<e.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{var d=ct.renderSpec(t,h,n),m=d.dom,v=d.contentDOM;if(a.appendChild(m),v){if(i)throw new RangeError("Multiple content holes");i=v}}}return{dom:a,contentDOM:i}};ct.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ct(this.nodesFromSchema(t),this.marksFromSchema(t)))};ct.nodesFromSchema=function(t){var e=fc(t.nodes);return e.text||(e.text=function(n){return n.text}),e};ct.marksFromSchema=function(t){return fc(t.marks)};function fc(r){var t={};for(var e in r){var n=r[e].spec.toDOM;n&&(t[e]=n)}return t}function vs(r){return r.document||window.document}var pc=65535,hc=Math.pow(2,16);function wl(r,t){return r+t*hc}function dc(r){return r&pc}function Sl(r){return(r-(r&pc))/hc}var $o=function(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=null),this.pos=t,this.deleted=e,this.recover=n},it=function(t,e){e===void 0&&(e=!1),this.ranges=t,this.inverted=e};it.prototype.recover=function(t){var e=0,n=dc(t);if(!this.inverted)for(var o=0;o<n;o++)e+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[n*3]+e+Sl(t)};it.prototype.mapResult=function(t,e){return e===void 0&&(e=1),this._map(t,e,!1)};it.prototype.map=function(t,e){return e===void 0&&(e=1),this._map(t,e,!0)};it.prototype._map=function(t,e,n){for(var o=0,s=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?o:0);if(c>t)break;var u=this.ranges[a+s],l=this.ranges[a+i],f=c+u;if(t<=f){var p=u?t==c?-1:t==f?1:e:e,h=c+o+(p<0?0:l);if(n)return h;var d=t==(e<0?c:f)?null:wl(a/3,t-c);return new $o(h,e<0?t!=c:t!=f,d)}o+=l-u}return n?t+o:new $o(t+o)};it.prototype.touches=function(t,e){for(var n=0,o=dc(e),s=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var u=this.ranges[a+s],l=c+u;if(t<=l&&a==o*3)return!0;n+=this.ranges[a+i]-u}return!1};it.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,o=0,s=0;o<this.ranges.length;o+=3){var i=this.ranges[o],a=i-(this.inverted?s:0),c=i+(this.inverted?0:s),u=this.ranges[o+e],l=this.ranges[o+n];t(a,a+u,c,c+l),s+=l-u}};it.prototype.invert=function(){return new it(this.ranges,!this.inverted)};it.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};it.offset=function(t){return t==0?it.empty:new it(t<0?[0,-t,0]:[0,0,t])};it.empty=new it([]);var gt=function(t,e,n,o){this.maps=t||[],this.from=n||0,this.to=o==null?this.maps.length:o,this.mirror=e};gt.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.maps.length),new gt(this.maps,this.mirror,t,e)};gt.prototype.copy=function(){return new gt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};gt.prototype.appendMap=function(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)};gt.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var o=t.getMirror(e);this.appendMap(t.maps[e],o!=null&&o<e?n+o:null)}};gt.prototype.getMirror=function(t){if(this.mirror){for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}};gt.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)};gt.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var o=t.getMirror(e);this.appendMap(t.maps[e].invert(),o!=null&&o>e?n-o-1:null)}};gt.prototype.invert=function(){var t=new gt;return t.appendMappingInverted(this),t};gt.prototype.map=function(t,e){if(e===void 0&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t};gt.prototype.mapResult=function(t,e){return e===void 0&&(e=1),this._map(t,e,!1)};gt.prototype._map=function(t,e,n){for(var o=!1,s=this.from;s<this.to;s++){var i=this.maps[s],a=i.mapResult(t,e);if(a.recover!=null){var c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,t=this.maps[c].recover(a.recover);continue}}a.deleted&&(o=!0),t=a.pos}return n?t:new $o(t,o)};function nr(r){var t=Error.call(this,r);return t.__proto__=nr.prototype,t}nr.prototype=Object.create(Error.prototype);nr.prototype.constructor=nr;nr.prototype.name="TransformError";var tt=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new gt},ys={before:{configurable:!0},docChanged:{configurable:!0}};ys.before.get=function(){return this.docs.length?this.docs[0]:this.doc};tt.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new nr(e.failed);return this};tt.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e};ys.docChanged.get=function(){return this.steps.length>0};tt.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e};Object.defineProperties(tt.prototype,ys);function $n(){throw new Error("Override me")}var Zo=Object.create(null),yt=function(){};yt.prototype.apply=function(t){return $n()};yt.prototype.getMap=function(){return it.empty};yt.prototype.invert=function(t){return $n()};yt.prototype.map=function(t){return $n()};yt.prototype.merge=function(t){return null};yt.prototype.toJSON=function(){return $n()};yt.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Zo[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)};yt.jsonID=function(t,e){if(t in Zo)throw new RangeError("Duplicate use of step JSON ID "+t);return Zo[t]=e,e.prototype.jsonID=t,e};var Dt=function(t,e){this.doc=t,this.failed=e};Dt.ok=function(t){return new Dt(t,null)};Dt.fail=function(t){return new Dt(null,t)};Dt.fromReplace=function(t,e,n,o){try{return Dt.ok(t.replace(e,n,o))}catch(s){if(s instanceof re)return Dt.fail(s.message);throw s}};var he=function(r){function t(e,n,o,s){r.call(this),this.from=e,this.to=n,this.slice=o,this.structure=!!s}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){return this.structure&&Yo(n,this.from,this.to)?Dt.fail("Structure replace would overwrite content"):Dt.fromReplace(n,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new it([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(n){return new t(this.from,this.from+this.slice.size,n.slice(this.from,this.to))},t.prototype.map=function(n){var o=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return o.deleted&&s.deleted?null:new t(o.pos,Math.max(o.pos,s.pos),this.slice)},t.prototype.merge=function(n){if(!(n instanceof t)||n.structure||this.structure)return null;if(this.from+this.slice.size==n.from&&!this.slice.openEnd&&!n.slice.openStart){var o=this.slice.size+n.slice.size==0?S.empty:new S(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new t(this.from,this.to+(n.to-n.from),o,this.structure)}else if(n.to==this.from&&!this.slice.openStart&&!n.slice.openEnd){var s=this.slice.size+n.slice.size==0?S.empty:new S(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new t(n.from,this.to,s,this.structure)}else return null},t.prototype.toJSON=function(){var n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n},t.fromJSON=function(n,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(o.from,o.to,S.fromJSON(n,o.slice),!!o.structure)},t}(yt);yt.jsonID("replace",he);var wt=function(r){function t(e,n,o,s,i,a,c){r.call(this),this.from=e,this.to=n,this.gapFrom=o,this.gapTo=s,this.slice=i,this.insert=a,this.structure=!!c}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){if(this.structure&&(Yo(n,this.from,this.gapFrom)||Yo(n,this.gapTo,this.to)))return Dt.fail("Structure gap-replace would overwrite content");var o=n.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return Dt.fail("Gap is not a flat range");var s=this.slice.insertAt(this.insert,o.content);return s?Dt.fromReplace(n,this.from,this.to,s):Dt.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new it([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(n){var o=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(n){var o=n.mapResult(this.from,1),s=n.mapResult(this.to,-1),i=n.map(this.gapFrom,-1),a=n.map(this.gapTo,1);return o.deleted&&s.deleted||i<o.pos||a>s.pos?null:new t(o.pos,s.pos,i,a,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n},t.fromJSON=function(n,o){if(typeof o.from!="number"||typeof o.to!="number"||typeof o.gapFrom!="number"||typeof o.gapTo!="number"||typeof o.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(o.from,o.to,o.gapFrom,o.gapTo,S.fromJSON(n,o.slice),o.insert,!!o.structure)},t}(yt);yt.jsonID("replaceAround",wt);function Yo(r,t,e){for(var n=r.resolve(t),o=e-t,s=n.depth;o>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,o--;if(o>0)for(var i=n.node(s).maybeChild(n.indexAfter(s));o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}return!1}function Ml(r,t,e){return(t==0||r.canReplace(t,r.childCount))&&(e==r.childCount||r.canReplace(0,e))}function pr(r){for(var t=r.parent,e=t.content.cutByIndex(r.startIndex,r.endIndex),n=r.depth;;--n){var o=r.$from.node(n),s=r.$from.index(n),i=r.$to.indexAfter(n);if(n<r.depth&&o.canReplace(s,i,e))return n;if(n==0||o.type.spec.isolating||!Ml(o,s,i))break}}tt.prototype.lift=function(r,t){for(var e=r.$from,n=r.$to,o=r.depth,s=e.before(o+1),i=n.after(o+1),a=s,c=i,u=C.empty,l=0,f=o,p=!1;f>t;f--)p||e.index(f)>0?(p=!0,u=C.from(e.node(f).copy(u)),l++):a--;for(var h=C.empty,d=0,m=o,v=!1;m>t;m--)v||n.after(m+1)<n.end(m)?(v=!0,h=C.from(n.node(m).copy(h)),d++):c++;return this.step(new wt(a,c,s,i,new S(u.append(h),l,d),u.size-l,!0))};function bs(r,t,e,n){n===void 0&&(n=r);var o=Tl(r,t),s=o&&Ol(n,t);return s?o.map(ki).concat({type:t,attrs:e}).concat(s.map(ki)):null}function ki(r){return{type:r,attrs:null}}function Tl(r,t){var e=r.parent,n=r.startIndex,o=r.endIndex,s=e.contentMatchAt(n).findWrapping(t);if(!s)return null;var i=s.length?s[0]:t;return e.canReplaceWith(n,o,i)?s:null}function Ol(r,t){var e=r.parent,n=r.startIndex,o=r.endIndex,s=e.child(n),i=t.contentMatch.findWrapping(s.type);if(!i)return null;for(var a=i.length?i[i.length-1]:t,c=a.contentMatch,u=n;c&&u<o;u++)c=c.matchType(e.child(u).type);return!c||!c.validEnd?null:i}tt.prototype.wrap=function(r,t){for(var e=C.empty,n=t.length-1;n>=0;n--)e=C.from(t[n].type.create(t[n].attrs,e));var o=r.start,s=r.end;return this.step(new wt(o,s,o,s,new S(e,0,0),t.length,!0))};tt.prototype.setBlockType=function(r,t,e,n){var o=this;if(t===void 0&&(t=r),!e.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(r,t,function(i,a){if(i.isTextblock&&!i.hasMarkup(e,n)&&Fl(o.doc,o.mapping.slice(s).map(a),e)){o.clearIncompatible(o.mapping.slice(s).map(a,1),e);var c=o.mapping.slice(s),u=c.map(a,1),l=c.map(a+i.nodeSize,1);return o.step(new wt(u,l,u+1,l-1,new S(C.from(e.create(n,null,i.marks)),0,0),1,!0)),!1}}),this};function Fl(r,t,e){var n=r.resolve(t),o=n.index();return n.parent.canReplaceWith(o,o+1,e)}tt.prototype.setNodeMarkup=function(r,t,e,n){var o=this.doc.nodeAt(r);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(e,null,n||o.marks);if(o.isLeaf)return this.replaceWith(r,r+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new wt(r,r+o.nodeSize,r+1,r+o.nodeSize-1,new S(C.from(s),0,0),1,!0))};function Xe(r,t,e,n){e===void 0&&(e=1);var o=r.resolve(t),s=o.depth-e,i=n&&n[n.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=e-2;a>s;a--,c--){var u=o.node(a),l=o.index(a);if(u.type.spec.isolating)return!1;var f=u.content.cutByIndex(l,u.childCount),p=n&&n[c]||u;if(p!=u&&(f=f.replaceChild(0,p.type.create(p.attrs))),!u.canReplace(l+1,u.childCount)||!p.type.validContent(f))return!1}var h=o.indexAfter(s),d=n&&n[0];return o.node(s).canReplaceWith(h,h,d?d.type:o.node(s+1).type)}tt.prototype.split=function(r,t,e){t===void 0&&(t=1);for(var n=this.doc.resolve(r),o=C.empty,s=C.empty,i=n.depth,a=n.depth-t,c=t-1;i>a;i--,c--){o=C.from(n.node(i).copy(o));var u=e&&e[c];s=C.from(u?u.type.create(u.attrs,s):n.node(i).copy(s))}return this.step(new he(r,r,new S(o.append(s),t,t),!0))};function Jr(r,t){var e=r.resolve(t),n=e.index();return Nl(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(n,n+1)}function Nl(r,t){return r&&t&&!r.isLeaf&&r.canAppend(t)}tt.prototype.join=function(r,t){t===void 0&&(t=1);var e=new he(r-t,r+t,S.empty,!0);return this.step(e)};function Bl(r,t,e){var n=r.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),e))return t;if(n.parentOffset==0)for(var o=n.depth-1;o>=0;o--){var s=n.index(o);if(n.node(o).canReplaceWith(s,s,e))return n.before(o+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(var i=n.depth-1;i>=0;i--){var a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,e))return n.after(i+1);if(a<n.node(i).childCount)return null}}function mc(r,t,e){var n=r.resolve(t);if(!e.content.size)return t;for(var o=e.content,s=0;s<e.openStart;s++)o=o.firstChild.content;for(var i=1;i<=(e.openStart==0&&e.size?2:1);i++)for(var a=n.depth;a>=0;a--){var c=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,u=n.index(a)+(c>0?1:0),l=n.node(a),f=!1;if(i==1)f=l.canReplace(u,u,o);else{var p=l.contentMatchAt(u).findWrapping(o.firstChild.type);f=p&&l.canReplaceWith(u,u,p[0])}if(f)return c==0?n.pos:c<0?n.before(a+1):n.after(a+1)}return null}function ks(r,t,e){for(var n=[],o=0;o<r.childCount;o++){var s=r.child(o);s.content.size&&(s=s.copy(ks(s.content,t,s))),s.isInline&&(s=t(s,e,o)),n.push(s)}return C.fromArray(n)}var Ds=function(r){function t(e,n,o){r.call(this),this.from=e,this.to=n,this.mark=o}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){var o=this,s=n.slice(this.from,this.to),i=n.resolve(this.from),a=i.node(i.sharedDepth(this.to)),c=new S(ks(s.content,function(u,l){return!u.isAtom||!l.type.allowsMarkType(o.mark.type)?u:u.mark(o.mark.addToSet(u.marks))},a),s.openStart,s.openEnd);return Dt.fromReplace(n,this.from,this.to,c)},t.prototype.invert=function(){return new Kr(this.from,this.to,this.mark)},t.prototype.map=function(n){var o=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return o.deleted&&s.deleted||o.pos>=s.pos?null:new t(o.pos,s.pos,this.mark)},t.prototype.merge=function(n){if(n instanceof t&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new t(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(n,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(o.from,o.to,n.markFromJSON(o.mark))},t}(yt);yt.jsonID("addMark",Ds);var Kr=function(r){function t(e,n,o){r.call(this),this.from=e,this.to=n,this.mark=o}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.apply=function(n){var o=this,s=n.slice(this.from,this.to),i=new S(ks(s.content,function(a){return a.mark(o.mark.removeFromSet(a.marks))}),s.openStart,s.openEnd);return Dt.fromReplace(n,this.from,this.to,i)},t.prototype.invert=function(){return new Ds(this.from,this.to,this.mark)},t.prototype.map=function(n){var o=n.mapResult(this.from,1),s=n.mapResult(this.to,-1);return o.deleted&&s.deleted||o.pos>=s.pos?null:new t(o.pos,s.pos,this.mark)},t.prototype.merge=function(n){if(n instanceof t&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from)return new t(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(n,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(o.from,o.to,n.markFromJSON(o.mark))},t}(yt);yt.jsonID("removeMark",Kr);tt.prototype.addMark=function(r,t,e){var n=this,o=[],s=[],i=null,a=null;return this.doc.nodesBetween(r,t,function(c,u,l){if(!!c.isInline){var f=c.marks;if(!e.isInSet(f)&&l.type.allowsMarkType(e.type)){for(var p=Math.max(u,r),h=Math.min(u+c.nodeSize,t),d=e.addToSet(f),m=0;m<f.length;m++)f[m].isInSet(d)||(i&&i.to==p&&i.mark.eq(f[m])?i.to=h:o.push(i=new Kr(p,h,f[m])));a&&a.to==p?a.to=h:s.push(a=new Ds(p,h,e))}}}),o.forEach(function(c){return n.step(c)}),s.forEach(function(c){return n.step(c)}),this};tt.prototype.removeMark=function(r,t,e){var n=this;e===void 0&&(e=null);var o=[],s=0;return this.doc.nodesBetween(r,t,function(i,a){if(!!i.isInline){s++;var c=null;if(e instanceof De)for(var u=i.marks,l;l=e.isInSet(u);)(c||(c=[])).push(l),u=l.removeFromSet(u);else e?e.isInSet(i.marks)&&(c=[e]):c=i.marks;if(c&&c.length)for(var f=Math.min(a+i.nodeSize,t),p=0;p<c.length;p++){for(var h=c[p],d=void 0,m=0;m<o.length;m++){var v=o[m];v.step==s-1&&h.eq(o[m].style)&&(d=v)}d?(d.to=f,d.step=s):o.push({style:h,from:Math.max(a,r),to:f,step:s})}}}),o.forEach(function(i){return n.step(new Kr(i.from,i.to,i.style))}),this};tt.prototype.clearIncompatible=function(r,t,e){e===void 0&&(e=t.contentMatch);for(var n=this.doc.nodeAt(r),o=[],s=r+1,i=0;i<n.childCount;i++){var a=n.child(i),c=s+a.nodeSize,u=e.matchType(a.type,a.attrs);if(!u)o.push(new he(s,c,S.empty));else{e=u;for(var l=0;l<a.marks.length;l++)t.allowsMarkType(a.marks[l].type)||this.step(new Kr(s,c,a.marks[l]))}s=c}if(!e.validEnd){var f=e.fillBefore(C.empty,!0);this.replace(s,s,new S(f,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this};function Rl(r,t,e,n){if(e===void 0&&(e=t),n===void 0&&(n=S.empty),t==e&&!n.size)return null;var o=r.resolve(t),s=r.resolve(e);return gc(o,s,n)?new he(t,e,n):new zt(o,s,n).fit()}tt.prototype.replace=function(r,t,e){t===void 0&&(t=r),e===void 0&&(e=S.empty);var n=Rl(this.doc,r,t,e);return n&&this.step(n),this};tt.prototype.replaceWith=function(r,t,e){return this.replace(r,t,new S(C.from(e),0,0))};tt.prototype.delete=function(r,t){return this.replace(r,t,S.empty)};tt.prototype.insert=function(r,t){return this.replaceWith(r,r,t)};function gc(r,t,e){return!e.openStart&&!e.openEnd&&r.start()==t.start()&&r.parent.canReplace(r.index(),t.index(),e.content)}var zt=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var s=t.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(o))})}this.placed=C.empty;for(var i=t.depth;i>0;i--)this.placed=C.from(t.node(i).copy(this.placed))},vc={depth:{configurable:!0}};vc.depth.get=function(){return this.frontier.length-1};zt.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,s=this.close(e<0?this.$to:o.doc.resolve(e));if(!s)return null;for(var i=this.placed,a=o.depth,c=s.depth;a&&c&&i.childCount==1;)i=i.firstChild.content,a--,c--;var u=new S(i,a,c);if(e>-1)return new wt(o.pos,e,this.$to.pos,this.$to.end(),u,n);if(u.size||o.pos!=this.$to.pos)return new he(o.pos,s.pos,u)};zt.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,o=void 0;e?(o=Cs(this.unplaced.content,e-1).firstChild,n=o.content):n=this.unplaced.content;for(var s=n.firstChild,i=this.depth;i>=0;i--){var a=this.frontier[i],c=a.type,u=a.match,l=void 0,f=void 0;if(t==1&&(s?u.matchType(s.type)||(f=u.fillBefore(C.from(s),!1)):c.compatibleContent(o.type)))return{sliceDepth:e,frontierDepth:i,parent:o,inject:f};if(t==2&&s&&(l=u.findWrapping(s.type)))return{sliceDepth:e,frontierDepth:i,parent:o,wrap:l};if(o&&u.matchType(o.type))break}}};zt.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,s=Cs(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new S(e,n+1,Math.max(o,s.size+n>=e.size-o?n+1:0)),!0)};zt.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,s=Cs(e,n);if(s.childCount<=1&&n>0){var i=e.size-n<=n+s.size;this.unplaced=new S(Ir(e,n-1,1),n-1,i?n-1:o)}else this.unplaced=new S(Ir(e,n,1),n,o)};zt.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,s=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var a=0;a<i.length;a++)this.openFrontierNode(i[a]);var c=this.unplaced,u=o?o.content:c.content,l=c.openStart-e,f=0,p=[],h=this.frontier[n],d=h.match,m=h.type;if(s){for(var v=0;v<s.childCount;v++)p.push(s.child(v));d=d.matchFragment(s)}for(var y=u.size+e-(c.content.size-c.openEnd);f<u.childCount;){var g=u.child(f),D=d.matchType(g.type);if(!D)break;f++,(f>1||l==0||g.content.size)&&(d=D,p.push(yc(g.mark(m.allowedMarks(g.marks)),f==1?l:0,f==u.childCount?y:-1)))}var b=f==u.childCount;b||(y=-1),this.placed=Wr(this.placed,n,C.from(p)),this.frontier[n].match=d,b&&y<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var A=0,k=u;A<y;A++){var M=k.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),k=M.content}this.unplaced=b?e==0?S.empty:new S(Ir(c.content,e-1,1),e-1,y<0?c.openEnd:e-1):new S(Ir(c.content,e,f),c.openStart,c.openEnd)};zt.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Qo(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to,o=n.depth,s=this.$to.after(o);o>1&&s==this.$to.end(--o);)++s;return s};zt.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],o=n.match,s=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=Qo(t,e,s,o,i);if(!!a){for(var c=e-1;c>=0;c--){var u=this.frontier[c],l=u.match,f=u.type,p=Qo(t,c,f,l,!0);if(!p||p.childCount)continue t}return{depth:e,fit:a,move:i?t.doc.resolve(t.after(e+1)):t}}}};zt.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Wr(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var o=t.node(n),s=o.type.contentMatch.fillBefore(o.content,!0,t.index(n));this.openFrontierNode(o.type,o.attrs,s)}return t};zt.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Wr(this.placed,this.depth,C.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})};zt.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(C.empty,!0);e.childCount&&(this.placed=Wr(this.placed,this.frontier.length,e))};Object.defineProperties(zt.prototype,vc);function Ir(r,t,e){return t==0?r.cutByIndex(e):r.replaceChild(0,r.firstChild.copy(Ir(r.firstChild.content,t-1,e)))}function Wr(r,t,e){return t==0?r.append(e):r.replaceChild(r.childCount-1,r.lastChild.copy(Wr(r.lastChild.content,t-1,e)))}function Cs(r,t){for(var e=0;e<t;e++)r=r.firstChild.content;return r}function yc(r,t,e){if(t<=0)return r;var n=r.content;return t>1&&(n=n.replaceChild(0,yc(n.firstChild,t-1,n.childCount==1?e-1:0))),t>0&&(n=r.type.contentMatch.fillBefore(n).append(n),e<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(C.empty,!0)))),r.copy(n)}function Qo(r,t,e,n,o){var s=r.node(t),i=o?r.indexAfter(t):r.index(t);if(i==s.childCount&&!e.compatibleContent(s.type))return null;var a=n.fillBefore(s.content,!0,i);return a&&!Il(e,s.content,i)?a:null}function Il(r,t,e){for(var n=e;n<t.childCount;n++)if(!r.allowsMarks(t.child(n).marks))return!0;return!1}tt.prototype.replaceRange=function(r,t,e){if(!e.size)return this.deleteRange(r,t);var n=this.doc.resolve(r),o=this.doc.resolve(t);if(gc(n,o,e))return this.step(new he(r,t,e));var s=kc(n,this.doc.resolve(t));s[s.length-1]==0&&s.pop();var i=-(n.depth+1);s.unshift(i);for(var a=n.depth,c=n.pos-1;a>0;a--,c--){var u=n.node(a).type.spec;if(u.defining||u.isolating)break;s.indexOf(a)>-1?i=a:n.before(a)==c&&s.splice(1,0,-a)}for(var l=s.indexOf(i),f=[],p=e.openStart,h=e.content,d=0;;d++){var m=h.firstChild;if(f.push(m),d==e.openStart)break;h=m.content}p>0&&f[p-1].type.spec.defining&&n.node(l).type!=f[p-1].type?p-=1:p>=2&&f[p-1].isTextblock&&f[p-2].type.spec.defining&&n.node(l).type!=f[p-2].type&&(p-=2);for(var v=e.openStart;v>=0;v--){var y=(v+p+1)%(e.openStart+1),g=f[y];if(!!g)for(var D=0;D<s.length;D++){var b=s[(D+l)%s.length],A=!0;b<0&&(A=!1,b=-b);var k=n.node(b-1),M=n.index(b-1);if(k.canReplaceWith(M,M,g.type,g.marks))return this.replace(n.before(b),A?o.after(b):t,new S(bc(e.content,0,e.openStart,y),y,e.openEnd))}}for(var F=this.steps.length,q=s.length-1;q>=0&&(this.replace(r,t,e),!(this.steps.length>F));q--){var O=s[q];O<0||(r=n.before(O),t=o.after(O))}return this};function bc(r,t,e,n,o){if(t<e){var s=r.firstChild;r=r.replaceChild(0,s.copy(bc(s.content,t+1,e,n,s)))}if(t>n){var i=o.contentMatchAt(0),a=i.fillBefore(r).append(r);r=a.append(i.matchFragment(a).fillBefore(C.empty,!0))}return r}tt.prototype.replaceRangeWith=function(r,t,e){if(!e.isInline&&r==t&&this.doc.resolve(r).parent.content.size){var n=Bl(this.doc,r,e.type);n!=null&&(r=t=n)}return this.replaceRange(r,t,new S(C.from(e),0,0))};tt.prototype.deleteRange=function(r,t){for(var e=this.doc.resolve(r),n=this.doc.resolve(t),o=kc(e,n),s=0;s<o.length;s++){var i=o[s],a=s==o.length-1;if(a&&i==0||e.node(i).type.contentMatch.validEnd)return this.delete(e.start(i),n.end(i));if(i>0&&(a||e.node(i-1).canReplace(e.index(i-1),n.indexAfter(i-1))))return this.delete(e.before(i),n.after(i))}for(var c=1;c<=e.depth&&c<=n.depth;c++)if(r-e.start(c)==e.depth-c&&t>e.end(c)&&n.end(c)-t!=n.depth-c)return this.delete(e.before(c),t);return this.delete(r,t)};function kc(r,t){for(var e=[],n=Math.min(r.depth,t.depth),o=n;o>=0;o--){var s=r.start(o);if(s<r.pos-(r.depth-o)||t.end(o)>t.pos+(t.depth-o)||r.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(s==t.start(o)||o==r.depth&&o==t.depth&&r.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==s-1)&&e.push(o)}return e}var Xo=Object.create(null),B=function(t,e,n){this.ranges=n||[new Ll(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},_e={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};_e.anchor.get=function(){return this.$anchor.pos};_e.head.get=function(){return this.$head.pos};_e.from.get=function(){return this.$from.pos};_e.to.get=function(){return this.$to.pos};_e.$from.get=function(){return this.ranges[0].$from};_e.$to.get=function(){return this.ranges[0].$to};_e.empty.get=function(){for(var r=this.ranges,t=0;t<r.length;t++)if(r[t].$from.pos!=r[t].$to.pos)return!1;return!0};B.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)};B.prototype.replace=function(t,e){e===void 0&&(e=S.empty);for(var n=e.content.lastChild,o=null,s=0;s<e.openEnd;s++)o=n,n=n.lastChild;for(var i=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var u=a[c],l=u.$from,f=u.$to,p=t.mapping.slice(i);t.replaceRange(p.map(l.pos),p.map(f.pos),c?S.empty:e),c==0&&Dc(t,i,(n?n.isInline:o&&o.isTextblock)?-1:1)}};B.prototype.replaceWith=function(t,e){for(var n=t.steps.length,o=this.ranges,s=0;s<o.length;s++){var i=o[s],a=i.$from,c=i.$to,u=t.mapping.slice(n),l=u.map(a.pos),f=u.map(c.pos);s?t.deleteRange(l,f):(t.replaceRangeWith(l,f,e),Dc(t,n,e.isInline?-1:1))}};B.findFrom=function(t,e,n){var o=t.parent.inlineContent?new G(t):tr(t.node(0),t.parent,t.pos,t.index(),e,n);if(o)return o;for(var s=t.depth-1;s>=0;s--){var i=e<0?tr(t.node(0),t.node(s),t.before(s+1),t.index(s),e,n):tr(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,e,n);if(i)return i}};B.near=function(t,e){return e===void 0&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new qe(t.node(0))};B.atStart=function(t){return tr(t,t,0,0,1)||new qe(t)};B.atEnd=function(t){return tr(t,t,t.content.size,t.childCount,-1)||new qe(t)};B.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Xo[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)};B.jsonID=function(t,e){if(t in Xo)throw new RangeError("Duplicate use of selection JSON ID "+t);return Xo[t]=e,e.prototype.jsonID=t,e};B.prototype.getBookmark=function(){return G.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(B.prototype,_e);B.prototype.visible=!0;var Ll=function(t,e){this.$from=t,this.$to=e},G=function(r){function t(n,o){o===void 0&&(o=n),r.call(this,n,o)}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={$cursor:{configurable:!0}};return e.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(o,s){var i=o.resolve(s.map(this.head));if(!i.parent.inlineContent)return r.near(i);var a=o.resolve(s.map(this.anchor));return new t(a.parent.inlineContent?a:i,i)},t.prototype.replace=function(o,s){if(s===void 0&&(s=S.empty),r.prototype.replace.call(this,o,s),s==S.empty){var i=this.$from.marksAcross(this.$to);i&&o.ensureMarks(i)}},t.prototype.eq=function(o){return o instanceof t&&o.anchor==this.anchor&&o.head==this.head},t.prototype.getBookmark=function(){return new Lr(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(o,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(o.resolve(s.anchor),o.resolve(s.head))},t.create=function(o,s,i){i===void 0&&(i=s);var a=o.resolve(s);return new this(a,i==s?a:o.resolve(i))},t.between=function(o,s,i){var a=o.pos-s.pos;if((!i||a)&&(i=a>=0?1:-1),!s.parent.inlineContent){var c=r.findFrom(s,i,!0)||r.findFrom(s,-i,!0);if(c)s=c.$head;else return r.near(s,i)}return o.parent.inlineContent||(a==0?o=s:(o=(r.findFrom(o,-i,!0)||r.findFrom(o,i,!0)).$anchor,o.pos<s.pos!=a<0&&(o=s))),new t(o,s)},Object.defineProperties(t.prototype,e),t}(B);B.jsonID("text",G);var Lr=function(t,e){this.anchor=t,this.head=e};Lr.prototype.map=function(t){return new Lr(t.map(this.anchor),t.map(this.head))};Lr.prototype.resolve=function(t){return G.between(t.resolve(this.anchor),t.resolve(this.head))};var P=function(r){function t(e){var n=e.nodeAfter,o=e.node(0).resolve(e.pos+n.nodeSize);r.call(this,e,o),this.node=n}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.map=function(n,o){var s=o.mapResult(this.anchor),i=s.deleted,a=s.pos,c=n.resolve(a);return i?r.near(c):new t(c)},t.prototype.content=function(){return new S(C.from(this.node),0,0)},t.prototype.eq=function(n){return n instanceof t&&n.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new pn(this.anchor)},t.fromJSON=function(n,o){if(typeof o.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(n.resolve(o.anchor))},t.create=function(n,o){return new this(n.resolve(o))},t.isSelectable=function(n){return!n.isText&&n.type.spec.selectable!==!1},t}(B);P.prototype.visible=!1;B.jsonID("node",P);var pn=function(t){this.anchor=t};pn.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,o=e.pos;return n?new Lr(o,o):new pn(o)};pn.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&P.isSelectable(n)?new P(e):B.near(e)};var qe=function(r){function t(e){r.call(this,e.resolve(0),e.resolve(e.content.size))}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.replace=function(n,o){if(o===void 0&&(o=S.empty),o==S.empty){n.delete(0,n.doc.content.size);var s=r.atStart(n.doc);s.eq(n.selection)||n.setSelection(s)}else r.prototype.replace.call(this,n,o)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(n){return new t(n)},t.prototype.map=function(n){return new t(n)},t.prototype.eq=function(n){return n instanceof t},t.prototype.getBookmark=function(){return Pl},t}(B);B.jsonID("all",qe);var Pl={map:function(){return this},resolve:function(t){return new qe(t)}};function tr(r,t,e,n,o,s){if(t.inlineContent)return G.create(r,e);for(var i=n-(o>0?0:1);o>0?i<t.childCount:i>=0;i+=o){var a=t.child(i);if(a.isAtom){if(!s&&P.isSelectable(a))return P.create(r,e-(o<0?a.nodeSize:0))}else{var c=tr(r,a,e+o,o<0?a.childCount:0,o,s);if(c)return c}e+=a.nodeSize*o}}function Dc(r,t,e){var n=r.steps.length-1;if(!(n<t)){var o=r.steps[n];if(o instanceof he||o instanceof wt){var s=r.mapping.maps[n],i;s.forEach(function(a,c,u,l){i==null&&(i=l)}),r.setSelection(B.near(r.doc.resolve(i),e))}}}var Di=1,tn=2,Ci=4,ql=function(r){function t(n){r.call(this,n.doc),this.time=Date.now(),this.curSelection=n.selection,this.curSelectionFor=0,this.storedMarks=n.storedMarks,this.updated=0,this.meta=Object.create(null)}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return e.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(o){if(o.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=o,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Di)&~tn,this.storedMarks=null,this},e.selectionSet.get=function(){return(this.updated&Di)>0},t.prototype.setStoredMarks=function(o){return this.storedMarks=o,this.updated|=tn,this},t.prototype.ensureMarks=function(o){return V.sameSet(this.storedMarks||this.selection.$from.marks(),o)||this.setStoredMarks(o),this},t.prototype.addStoredMark=function(o){return this.ensureMarks(o.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(o){return this.ensureMarks(o.removeFromSet(this.storedMarks||this.selection.$head.marks()))},e.storedMarksSet.get=function(){return(this.updated&tn)>0},t.prototype.addStep=function(o,s){r.prototype.addStep.call(this,o,s),this.updated=this.updated&~tn,this.storedMarks=null},t.prototype.setTime=function(o){return this.time=o,this},t.prototype.replaceSelection=function(o){return this.selection.replace(this,o),this},t.prototype.replaceSelectionWith=function(o,s){var i=this.selection;return s!==!1&&(o=o.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||V.none))),i.replaceWith(this,o),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(o,s,i){i===void 0&&(i=s);var a=this.doc.type.schema;if(s==null)return o?this.replaceSelectionWith(a.text(o),!0):this.deleteSelection();if(!o)return this.deleteRange(s,i);var c=this.storedMarks;if(!c){var u=this.doc.resolve(s);c=i==s?u.marks():u.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(s,i,a.text(o,c)),this.selection.empty||this.setSelection(B.near(this.selection.$to)),this},t.prototype.setMeta=function(o,s){return this.meta[typeof o=="string"?o:o.key]=s,this},t.prototype.getMeta=function(o){return this.meta[typeof o=="string"?o:o.key]},e.isGeneric.get=function(){for(var n in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=Ci,this},e.scrolledIntoView.get=function(){return(this.updated&Ci)>0},Object.defineProperties(t.prototype,e),t}(tt);function xi(r,t){return!t||!r?r:r.bind(t)}var xr=function(t,e,n){this.name=t,this.init=xi(e.init,n),this.apply=xi(e.apply,n)},zl=[new xr("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new xr("selection",{init:function(t,e){return t.selection||B.atStart(e.doc)},apply:function(t){return t.selection}}),new xr("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,o){return o.selection.$cursor?t.storedMarks:null}}),new xr("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],xs=function(t,e){var n=this;this.schema=t,this.fields=zl.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(o){if(n.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");n.plugins.push(o),n.pluginsByKey[o.key]=o,o.spec.state&&n.fields.push(new xr(o.key,o.spec.state,o))})},vt=function(t){this.config=t},Zn={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Zn.schema.get=function(){return this.config.schema};Zn.plugins.get=function(){return this.config.plugins};vt.prototype.apply=function(t){return this.applyTransaction(t).state};vt.prototype.filterTransaction=function(t,e){e===void 0&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0};vt.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),o=null;;){for(var s=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var c=o?o[i].n:0,u=o?o[i].state:this,l=c<e.length&&a.spec.appendTransaction.call(a,c?e.slice(c):e,u,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!o){o=[];for(var f=0;f<this.config.plugins.length;f++)o.push(f<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),s=!0}o&&(o[i]={state:n,n:e.length})}}if(!s)return{state:n,transactions:e}}};vt.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new vt(this.config),n=this.config.fields,o=0;o<n.length;o++){var s=n[o];e[s.name]=s.apply(t,this[s.name],this,e)}for(var i=0;i<Pr.length;i++)Pr[i](this,t,e);return e};Zn.tr.get=function(){return new ql(this)};vt.create=function(t){for(var e=new xs(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new vt(e),o=0;o<e.fields.length;o++)n[e.fields[o].name]=e.fields[o].init(t,n);return n};vt.prototype.reconfigure=function(t){for(var e=new xs(this.schema,t.plugins),n=e.fields,o=new vt(e),s=0;s<n.length;s++){var i=n[s].name;o[i]=this.hasOwnProperty(i)?this[i]:n[s].init(t,o)}return o};vt.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(function(i){return i.toJSON()})),t&&typeof t=="object")for(var n in t){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[n],s=o.spec.state;s&&s.toJSON&&(e[n]=s.toJSON.call(o,this[o.key]))}return e};vt.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new xs(t.schema,t.plugins),s=new vt(o);return o.fields.forEach(function(i){if(i.name=="doc")s.doc=j.fromJSON(t.schema,e.doc);else if(i.name=="selection")s.selection=B.fromJSON(s.doc,e.selection);else if(i.name=="storedMarks")e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],u=c.spec.state;if(c.key==i.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){s[i.name]=u.fromJSON.call(c,t,e[a],s);return}}s[i.name]=i.init(t,s)}}),s};vt.addApplyListener=function(t){Pr.push(t)};vt.removeApplyListener=function(t){var e=Pr.indexOf(t);e>-1&&Pr.splice(e,1)};Object.defineProperties(vt.prototype,Zn);var Pr=[];function Cc(r,t,e){for(var n in r){var o=r[n];o instanceof Function?o=o.bind(t):n=="handleDOMEvents"&&(o=Cc(o,t,{})),e[n]=o}return e}var bt=function(t){this.props={},t.props&&Cc(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:xc("plugin")};bt.prototype.getState=function(t){return t[this.key]};var yo=Object.create(null);function xc(r){return r in yo?r+"$"+ ++yo[r]:(yo[r]=0,r+"$")}var Nt=function(t){t===void 0&&(t="key"),this.key=xc(t)};Nt.prototype.get=function(t){return t.config.pluginsByKey[this.key]};Nt.prototype.getState=function(t){return t[this.key]};function Vl(r,t){return r.selection.empty?!1:(t&&t(r.tr.deleteSelection().scrollIntoView()),!0)}function Hl(r,t,e){var n=r.selection,o=n.$cursor;if(!o||(e?!e.endOfTextblock("backward",r):o.parentOffset>0))return!1;var s=Ac(o);if(!s){var i=o.blockRange(),a=i&&pr(i);return a==null?!1:(t&&t(r.tr.lift(i,a).scrollIntoView()),!0)}var c=s.nodeBefore;if(!c.type.spec.isolating&&wc(r,s,t))return!0;if(o.parent.content.size==0&&(or(c,"end")||P.isSelectable(c))){if(t){var u=r.tr.deleteRange(o.before(),o.after());u.setSelection(or(c,"end")?B.findFrom(u.doc.resolve(u.mapping.map(s.pos,-1)),-1):P.create(u.doc,s.pos-c.nodeSize)),t(u.scrollIntoView())}return!0}return c.isAtom&&s.depth==o.depth-1?(t&&t(r.tr.delete(s.pos-c.nodeSize,s.pos).scrollIntoView()),!0):!1}function or(r,t,e){for(;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&r.childCount!=1)return!1}return!1}function jl(r,t,e){var n=r.selection,o=n.$head,s=n.empty,i=o;if(!s)return!1;if(o.parent.isTextblock){if(e?!e.endOfTextblock("backward",r):o.parentOffset>0)return!1;i=Ac(o)}var a=i&&i.nodeBefore;return!a||!P.isSelectable(a)?!1:(t&&t(r.tr.setSelection(P.create(r.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)}function Ac(r){if(!r.parent.type.spec.isolating)for(var t=r.depth-1;t>=0;t--){if(r.index(t)>0)return r.doc.resolve(r.before(t+1));if(r.node(t).type.spec.isolating)break}return null}function Ul(r,t,e){var n=r.selection,o=n.$cursor;if(!o||(e?!e.endOfTextblock("forward",r):o.parentOffset<o.parent.content.size))return!1;var s=Ec(o);if(!s)return!1;var i=s.nodeAfter;if(wc(r,s,t))return!0;if(o.parent.content.size==0&&(or(i,"start")||P.isSelectable(i))){if(t){var a=r.tr.deleteRange(o.before(),o.after());a.setSelection(or(i,"start")?B.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):P.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}return i.isAtom&&s.depth==o.depth-1?(t&&t(r.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1}function Jl(r,t,e){var n=r.selection,o=n.$head,s=n.empty,i=o;if(!s)return!1;if(o.parent.isTextblock){if(e?!e.endOfTextblock("forward",r):o.parentOffset<o.parent.content.size)return!1;i=Ec(o)}var a=i&&i.nodeAfter;return!a||!P.isSelectable(a)?!1:(t&&t(r.tr.setSelection(P.create(r.doc,i.pos)).scrollIntoView()),!0)}function Ec(r){if(!r.parent.type.spec.isolating)for(var t=r.depth-1;t>=0;t--){var e=r.node(t);if(r.index(t)+1<e.childCount)return r.doc.resolve(r.after(t+1));if(e.type.spec.isolating)break}return null}function Kl(r,t){var e=r.selection,n=e.$from,o=e.$to,s=n.blockRange(o),i=s&&pr(s);return i==null?!1:(t&&t(r.tr.lift(s,i).scrollIntoView()),!0)}function Wl(r,t){var e=r.selection,n=e.$head,o=e.$anchor;return!n.parent.type.spec.code||!n.sameParent(o)?!1:(t&&t(r.tr.insertText(`
`).scrollIntoView()),!0)}function _c(r){for(var t=0;t<r.edgeCount;t++){var e=r.edge(t),n=e.type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Gl(r,t){var e=r.selection,n=e.$head,o=e.$anchor;if(!n.parent.type.spec.code||!n.sameParent(o))return!1;var s=n.node(-1),i=n.indexAfter(-1),a=_c(s.contentMatchAt(i));if(!s.canReplaceWith(i,i,a))return!1;if(t){var c=n.after(),u=r.tr.replaceWith(c,c,a.createAndFill());u.setSelection(B.near(u.doc.resolve(c),1)),t(u.scrollIntoView())}return!0}function $l(r,t){var e=r.selection,n=e.$from,o=e.$to;if(e instanceof qe||n.parent.inlineContent||o.parent.inlineContent)return!1;var s=_c(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var i=(!n.parentOffset&&o.index()<o.parent.childCount?n:o).pos,a=r.tr.insert(i,s.createAndFill());a.setSelection(G.create(a.doc,i+1)),t(a.scrollIntoView())}return!0}function Zl(r,t){var e=r.selection,n=e.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(Xe(r.doc,o))return t&&t(r.tr.split(o).scrollIntoView()),!0}var s=n.blockRange(),i=s&&pr(s);return i==null?!1:(t&&t(r.tr.lift(s,i).scrollIntoView()),!0)}function Yl(r,t){var e=r.selection,n=e.$from,o=e.to,s,i=n.sharedDepth(o);return i==0?!1:(s=n.before(i),t&&t(r.tr.setSelection(P.create(r.doc,s))),!0)}function Ql(r,t,e){var n=t.nodeBefore,o=t.nodeAfter,s=t.index();return!n||!o||!n.type.compatibleContent(o.type)?!1:!n.content.size&&t.parent.canReplace(s-1,s)?(e&&e(r.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(o.isTextblock||Jr(r.doc,t.pos))?!1:(e&&e(r.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),!0)}function wc(r,t,e){var n=t.nodeBefore,o=t.nodeAfter,s,i;if(n.type.spec.isolating||o.type.spec.isolating)return!1;if(Ql(r,t,e))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(s=(i=n.contentMatchAt(n.childCount)).findWrapping(o.type))&&i.matchType(s[0]||o.type).validEnd){if(e){for(var c=t.pos+o.nodeSize,u=C.empty,l=s.length-1;l>=0;l--)u=C.from(s[l].create(null,u));u=C.from(n.copy(u));var f=r.tr.step(new wt(t.pos-1,c,t.pos,c,new S(u,1,0),s.length,!0)),p=c+2*s.length;Jr(f.doc,p)&&f.join(p),e(f.scrollIntoView())}return!0}var h=B.findFrom(t,1),d=h&&h.$from.blockRange(h.$to),m=d&&pr(d);if(m!=null&&m>=t.depth)return e&&e(r.tr.lift(d,m).scrollIntoView()),!0;if(a&&or(o,"start",!0)&&or(n,"end")){for(var v=n,y=[];y.push(v),!v.isTextblock;)v=v.lastChild;for(var g=o,D=1;!g.isTextblock;g=g.firstChild)D++;if(v.canReplace(v.childCount,v.childCount,g.content)){if(e){for(var b=C.empty,A=y.length-1;A>=0;A--)b=C.from(y[A].copy(b));var k=r.tr.step(new wt(t.pos-y.length,t.pos+o.nodeSize,t.pos+D,t.pos+o.nodeSize-D,new S(b,y.length,0),0,!0));e(k.scrollIntoView())}return!0}}return!1}function Xl(r,t){return function(e,n){var o=e.selection,s=o.$from,i=o.$to,a=s.blockRange(i),c=a&&bs(a,r,t);return c?(n&&n(e.tr.wrap(a,c).scrollIntoView()),!0):!1}}function Ai(r,t){return function(e,n){var o=e.selection,s=o.from,i=o.to,a=!1;return e.doc.nodesBetween(s,i,function(c,u){if(a)return!1;if(!(!c.isTextblock||c.hasMarkup(r,t)))if(c.type==r)a=!0;else{var l=e.doc.resolve(u),f=l.index();a=l.parent.canReplaceWith(f,f+1,r)}}),a?(n&&n(e.tr.setBlockType(s,i,r,t).scrollIntoView()),!0):!1}}typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform()=="darwin";function tf(r,t){return function(e,n){var o=e.selection,s=o.$from,i=o.$to,a=s.blockRange(i),c=!1,u=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(r)&&a.startIndex==0){if(s.index(a.depth-1)==0)return!1;var l=e.doc.resolve(a.start-2);u=new Br(l,l,a.depth),a.endIndex<a.parent.childCount&&(a=new Br(s,e.doc.resolve(i.end(a.depth)),a.depth)),c=!0}var f=bs(u,r,t,a);return f?(n&&n(ef(e.tr,a,f,c,r).scrollIntoView()),!0):!1}}function ef(r,t,e,n,o){for(var s=C.empty,i=e.length-1;i>=0;i--)s=C.from(e[i].type.create(e[i].attrs,s));r.step(new wt(t.start-(n?2:0),t.end,t.start,t.end,new S(s,0,0),e.length,!0));for(var a=0,c=0;c<e.length;c++)e[c].type==o&&(a=c+1);for(var u=e.length-a,l=t.start+e.length-(n?2:0),f=t.parent,p=t.startIndex,h=t.endIndex,d=!0;p<h;p++,d=!1)!d&&Xe(r.doc,l,u)&&(r.split(l,u),l+=2*u),l+=f.child(p).nodeSize;return r}function rf(r){return function(t,e){var n=t.selection,o=n.$from,s=n.$to,i=o.blockRange(s,function(a){return a.childCount&&a.firstChild.type==r});return i?e?o.node(i.depth-1).type==r?nf(t,e,r,i):of(t,e,i):!0:!1}}function nf(r,t,e,n){var o=r.tr,s=n.end,i=n.$to.end(n.depth);return s<i&&(o.step(new wt(s-1,i,s,i,new S(C.from(e.create(null,n.parent.copy())),1,0),1,!0)),n=new Br(o.doc.resolve(n.$from.pos),o.doc.resolve(i),n.depth)),t(o.lift(n,pr(n)).scrollIntoView()),!0}function of(r,t,e){for(var n=r.tr,o=e.parent,s=e.end,i=e.endIndex-1,a=e.startIndex;i>a;i--)s-=o.child(i).nodeSize,n.delete(s-1,s+1);var c=n.doc.resolve(e.start),u=c.nodeAfter;if(n.mapping.map(e.end)!=e.start+c.nodeAfter.nodeSize)return!1;var l=e.startIndex==0,f=e.endIndex==o.childCount,p=c.node(-1),h=c.index(-1);if(!p.canReplace(h+(l?0:1),h+1,u.content.append(f?C.empty:C.from(o))))return!1;var d=c.pos,m=d+u.nodeSize;return n.step(new wt(d-(l?1:0),m+(f?1:0),d+1,m-1,new S((l?C.empty:C.from(o.copy(C.empty))).append(f?C.empty:C.from(o.copy(C.empty))),l?0:1,f?0:1),l?0:1)),t(n.scrollIntoView()),!0}function sf(r){return function(t,e){var n=t.selection,o=n.$from,s=n.$to,i=o.blockRange(s,function(m){return m.childCount&&m.firstChild.type==r});if(!i)return!1;var a=i.startIndex;if(a==0)return!1;var c=i.parent,u=c.child(a-1);if(u.type!=r)return!1;if(e){var l=u.lastChild&&u.lastChild.type==c.type,f=C.from(l?r.create():null),p=new S(C.from(r.create(null,C.from(c.type.create(null,f)))),l?3:1,0),h=i.start,d=i.end;e(t.tr.step(new wt(h-(l?3:1),d,h,d,p,1,!0)).scrollIntoView())}return!0}}var E={};if(typeof navigator!="undefined"&&typeof document!="undefined"){var bo=/Edge\/(\d+)/.exec(navigator.userAgent),Ei=/MSIE \d/.test(navigator.userAgent),ko=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Do=E.ie=!!(Ei||ko||bo);E.ie_version=Ei?document.documentMode||6:ko?+ko[1]:bo?+bo[1]:null,E.gecko=!Do&&/gecko\/(\d+)/i.test(navigator.userAgent),E.gecko_version=E.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Co=!Do&&/Chrome\/(\d+)/.exec(navigator.userAgent);E.chrome=!!Co,E.chrome_version=Co&&+Co[1],E.safari=!Do&&/Apple Computer/.test(navigator.vendor),E.ios=E.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),E.mac=E.ios||/Mac/.test(navigator.platform),E.android=/Android \d/.test(navigator.userAgent),E.webkit="webkitFontSmoothing"in document.documentElement.style,E.webkit_version=E.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Tt=function(r){for(var t=0;;t++)if(r=r.previousSibling,!r)return t},As=function(r){var t=r.assignedSlot||r.parentNode;return t&&t.nodeType==11?t.host:t},_i=null,ce=function(r,t,e){var n=_i||(_i=document.createRange());return n.setEnd(r,e==null?r.nodeValue.length:e),n.setStart(r,t||0),n},qr=function(r,t,e,n){return e&&(wi(r,t,e,n,-1)||wi(r,t,e,n,1))},af=/^(img|br|input|textarea|hr)$/i;function wi(r,t,e,n,o){for(;;){if(r==e&&t==n)return!0;if(t==(o<0?0:Qt(r))){var s=r.parentNode;if(s.nodeType!=1||uf(r)||af.test(r.nodeName)||r.contentEditable=="false")return!1;t=Tt(r)+(o<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[t+(o<0?-1:0)],r.contentEditable=="false")return!1;t=o<0?Qt(r):0}else return!1}}function Qt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function cf(r,t,e){for(var n=t==0,o=t==Qt(r);n||o;){if(r==e)return!0;var s=Tt(r);if(r=r.parentNode,!r)return!1;n=n&&s==0,o=o&&s==Qt(r)}}function uf(r){for(var t,e=r;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==r||t.contentDOM==r)}var Es=function(r){var t=r.isCollapsed;return t&&E.chrome&&r.rangeCount&&!r.getRangeAt(0).collapsed&&(t=!1),t};function Ke(r,t){var e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=r,e.key=e.code=t,e}function lf(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function de(r,t){return typeof r=="number"?r:r[t]}function ff(r){var t=r.getBoundingClientRect(),e=t.width/r.offsetWidth||1,n=t.height/r.offsetHeight||1;return{left:t.left,right:t.left+r.clientWidth*e,top:t.top,bottom:t.top+r.clientHeight*n}}function Si(r,t,e){for(var n=r.someProp("scrollThreshold")||0,o=r.someProp("scrollMargin")||5,s=r.dom.ownerDocument,i=e||r.dom;i;i=As(i))if(i.nodeType==1){var a=i==s.body||i.nodeType!=1,c=a?lf(s):ff(i),u=0,l=0;if(t.top<c.top+de(n,"top")?l=-(c.top-t.top+de(o,"top")):t.bottom>c.bottom-de(n,"bottom")&&(l=t.bottom-c.bottom+de(o,"bottom")),t.left<c.left+de(n,"left")?u=-(c.left-t.left+de(o,"left")):t.right>c.right-de(n,"right")&&(u=t.right-c.right+de(o,"right")),u||l)if(a)s.defaultView.scrollBy(u,l);else{var f=i.scrollLeft,p=i.scrollTop;l&&(i.scrollTop+=l),u&&(i.scrollLeft+=u);var h=i.scrollLeft-f,d=i.scrollTop-p;t={left:t.left-h,top:t.top-d,right:t.right-h,bottom:t.bottom-d}}if(a)break}}function pf(r){for(var t=r.dom.getBoundingClientRect(),e=Math.max(0,t.top),n,o,s=(t.left+t.right)/2,i=e+1;i<Math.min(innerHeight,t.bottom);i+=5){var a=r.root.elementFromPoint(s,i);if(!(a==r.dom||!r.dom.contains(a))){var c=a.getBoundingClientRect();if(c.top>=e-20){n=a,o=c.top;break}}}return{refDOM:n,refTop:o,stack:Sc(r.dom)}}function Sc(r){for(var t=[],e=r.ownerDocument;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),r!=e);r=As(r));return t}function hf(r){var t=r.refDOM,e=r.refTop,n=r.stack,o=t?t.getBoundingClientRect().top:0;Mc(n,o==0?0:o-e)}function Mc(r,t){for(var e=0;e<r.length;e++){var n=r[e],o=n.dom,s=n.top,i=n.left;o.scrollTop!=s+t&&(o.scrollTop=s+t),o.scrollLeft!=i&&(o.scrollLeft=i)}}var Ue=null;function df(r){if(r.setActive)return r.setActive();if(Ue)return r.focus(Ue);var t=Sc(r);r.focus(Ue==null?{get preventScroll(){return Ue={preventScroll:!0},!0}}:void 0),Ue||(Ue=!1,Mc(t,0))}function Tc(r,t){for(var e,n=2e8,o,s=0,i=t.top,a=t.top,c=r.firstChild,u=0;c;c=c.nextSibling,u++){var l=void 0;if(c.nodeType==1)l=c.getClientRects();else if(c.nodeType==3)l=ce(c).getClientRects();else continue;for(var f=0;f<l.length;f++){var p=l[f];if(p.top<=i&&p.bottom>=a){i=Math.max(p.bottom,i),a=Math.min(p.top,a);var h=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(h<n){e=c,n=h,o=h&&e.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,c.nodeType==1&&h&&(s=u+(t.left>=(p.left+p.right)/2?1:0));continue}}!e&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(s=u+1)}}return e&&e.nodeType==3?mf(e,o):!e||n&&e.nodeType==1?{node:r,offset:s}:Tc(e,o)}function mf(r,t){for(var e=r.nodeValue.length,n=document.createRange(),o=0;o<e;o++){n.setEnd(r,o+1),n.setStart(r,o);var s=me(n,1);if(s.top!=s.bottom&&_s(t,s))return{node:r,offset:o+(t.left>=(s.left+s.right)/2?1:0)}}return{node:r,offset:0}}function _s(r,t){return r.left>=t.left-1&&r.left<=t.right+1&&r.top>=t.top-1&&r.top<=t.bottom+1}function gf(r,t){var e=r.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<r.getBoundingClientRect().left?e:r}function vf(r,t,e){var n=Tc(t,e),o=n.node,s=n.offset,i=-1;if(o.nodeType==1&&!o.firstChild){var a=o.getBoundingClientRect();i=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}return r.docView.posFromDOM(o,s,i)}function yf(r,t,e,n){for(var o=-1,s=t;s!=r.dom;){var i=r.docView.nearestDesc(s,!0);if(!i)return null;if(i.node.isBlock&&i.parent){var a=i.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)o=i.posBefore;else if(a.right<n.left||a.bottom<n.top)o=i.posAfter;else break}s=i.dom.parentNode}return o>-1?o:r.docView.posFromDOM(t,e)}function Oc(r,t,e){var n=r.childNodes.length;if(n&&e.top<e.bottom)for(var o=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-e.top)/(e.bottom-e.top))-2)),s=o;;){var i=r.childNodes[s];if(i.nodeType==1)for(var a=i.getClientRects(),c=0;c<a.length;c++){var u=a[c];if(_s(t,u))return Oc(i,t,u)}if((s=(s+1)%n)==o)break}return r}function bf(r,t){var e,n,o=r.dom.ownerDocument,s,i;if(o.caretPositionFromPoint)try{var a=o.caretPositionFromPoint(t.left,t.top);a&&(e=a,s=e.offsetNode,i=e.offset)}catch{}if(!s&&o.caretRangeFromPoint){var c=o.caretRangeFromPoint(t.left,t.top);c&&(n=c,s=n.startContainer,i=n.startOffset)}var u=(r.root.elementFromPoint?r.root:o).elementFromPoint(t.left,t.top+1),l;if(!u||!r.dom.contains(u.nodeType!=1?u.parentNode:u)){var f=r.dom.getBoundingClientRect();if(!_s(t,f)||(u=Oc(r.dom,t,f),!u))return null}if(E.safari)for(var p=u;s&&p;p=As(p))p.draggable&&(s=i=null);if(u=gf(u,t),s){if(E.gecko&&s.nodeType==1&&(i=Math.min(i,s.childNodes.length),i<s.childNodes.length)){var h=s.childNodes[i],d;h.nodeName=="IMG"&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}s==r.dom&&i==s.childNodes.length-1&&s.lastChild.nodeType==1&&t.top>s.lastChild.getBoundingClientRect().bottom?l=r.state.doc.content.size:(i==0||s.nodeType!=1||s.childNodes[i-1].nodeName!="BR")&&(l=yf(r,s,i,t))}l==null&&(l=vf(r,u,t));var m=r.docView.nearestDesc(u,!0);return{pos:l,inside:m?m.posAtStart-m.border:-1}}function me(r,t){var e=r.getClientRects();return e.length?e[t<0?0:e.length-1]:r.getBoundingClientRect()}var kf=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fc(r,t,e){var n=r.docView.domFromPos(t,e<0?-1:1),o=n.node,s=n.offset,i=E.webkit||E.gecko;if(o.nodeType==3)if(i&&(kf.test(o.nodeValue)||(e<0?!s:s==o.nodeValue.length))){var a=me(ce(o,s,s),e);if(E.gecko&&s&&/\s/.test(o.nodeValue[s-1])&&s<o.nodeValue.length){var c=me(ce(o,s-1,s-1),-1);if(c.top==a.top){var u=me(ce(o,s,s+1),-1);if(u.top!=a.top)return vr(u,u.left<c.left)}}return a}else{var l=s,f=s,p=e<0?1:-1;return e<0&&!s?(f++,p=-1):e>=0&&s==o.nodeValue.length?(l--,p=1):e<0?l--:f++,vr(me(ce(o,l,f),p),p<0)}if(!r.state.doc.resolve(t).parent.inlineContent){if(s&&(e<0||s==Qt(o))){var h=o.childNodes[s-1];if(h.nodeType==1)return xo(h.getBoundingClientRect(),!1)}if(s<Qt(o)){var d=o.childNodes[s];if(d.nodeType==1)return xo(d.getBoundingClientRect(),!0)}return xo(o.getBoundingClientRect(),e>=0)}if(s&&(e<0||s==Qt(o))){var m=o.childNodes[s-1],v=m.nodeType==3?ce(m,Qt(m)-(i?0:1)):m.nodeType==1&&(m.nodeName!="BR"||!m.nextSibling)?m:null;if(v)return vr(me(v,1),!1)}if(s<Qt(o)){for(var y=o.childNodes[s];y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;var g=y?y.nodeType==3?ce(y,0,i?0:1):y.nodeType==1?y:null:null;if(g)return vr(me(g,-1),!0)}return vr(me(o.nodeType==3?ce(o):o,-e),e>=0)}function vr(r,t){if(r.width==0)return r;var e=t?r.left:r.right;return{top:r.top,bottom:r.bottom,left:e,right:e}}function xo(r,t){if(r.height==0)return r;var e=t?r.top:r.bottom;return{top:e,bottom:e,left:r.left,right:r.right}}function Nc(r,t,e){var n=r.state,o=r.root.activeElement;n!=t&&r.updateState(t),o!=r.dom&&r.focus();try{return e()}finally{n!=t&&r.updateState(n),o!=r.dom&&o&&o.focus()}}function Df(r,t,e){var n=t.selection,o=e=="up"?n.$from:n.$to;return Nc(r,t,function(){for(var s=r.docView.domFromPos(o.pos,e=="up"?-1:1),i=s.node;;){var a=r.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.dom;break}i=a.dom.parentNode}for(var c=Fc(r,o.pos,1),u=i.firstChild;u;u=u.nextSibling){var l=void 0;if(u.nodeType==1)l=u.getClientRects();else if(u.nodeType==3)l=ce(u,0,u.nodeValue.length).getClientRects();else continue;for(var f=0;f<l.length;f++){var p=l[f];if(p.bottom>p.top+1&&(e=="up"?c.top-p.top>(p.bottom-c.top)*2:p.bottom-c.bottom>(c.bottom-p.top)*2))return!1}}return!0})}var Cf=/[\u0590-\u08ac]/;function xf(r,t,e){var n=t.selection,o=n.$head;if(!o.parent.isTextblock)return!1;var s=o.parentOffset,i=!s,a=s==o.parent.content.size,c=r.root.getSelection();return!Cf.test(o.parent.textContent)||!c.modify?e=="left"||e=="backward"?i:a:Nc(r,t,function(){var u=c.getRangeAt(0),l=c.focusNode,f=c.focusOffset,p=c.caretBidiLevel;c.modify("move",e,"character");var h=o.depth?r.docView.domAfterPos(o.before()):r.dom,d=!h.contains(c.focusNode.nodeType==1?c.focusNode:c.focusNode.parentNode)||l==c.focusNode&&f==c.focusOffset;return c.removeAllRanges(),c.addRange(u),p!=null&&(c.caretBidiLevel=p),d})}var Mi=null,Ti=null,Oi=!1;function Af(r,t,e){return Mi==t&&Ti==e?Oi:(Mi=t,Ti=e,Oi=e=="up"||e=="down"?Df(r,t,e):xf(r,t,e))}var Jt=0,Bc=1,Er=2,pe=3,Y=function(t,e,n,o){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=Jt},ne={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};Y.prototype.matchesWidget=function(){return!1};Y.prototype.matchesMark=function(){return!1};Y.prototype.matchesNode=function(){return!1};Y.prototype.matchesHack=function(t){return!1};Y.prototype.parseRule=function(){return null};Y.prototype.stopEvent=function(){return!1};ne.size.get=function(){for(var r=0,t=0;t<this.children.length;t++)r+=this.children[t].size;return r};ne.border.get=function(){return 0};Y.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()};Y.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var o=this.children[e];if(o==t)return n;n+=o.size}};ne.posBefore.get=function(){return this.parent.posBeforeChild(this)};ne.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0};ne.posAfter.get=function(){return this.posBefore+this.size};ne.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border};Y.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(n<0){var o,s;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{var i,a;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((a=i.pmViewDesc)&&a.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(a):this.posAtEnd}var c;if(t==this.dom&&this.contentDOM)c=e>Tt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))c=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(var u=t;;u=u.parentNode){if(u==this.dom){c=!1;break}if(u.parentNode.firstChild!=u)break}if(c==null&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){c=!0;break}if(l.parentNode.lastChild!=l)break}}return(c==null?n>0:c)?this.posAtEnd:this.posAtStart};Y.prototype.nearestDesc=function(t,e){for(var n=!0,o=t;o;o=o.parentNode){var s=this.getDesc(o);if(s&&(!e||s.node))if(n&&s.nodeDOM&&!(s.nodeDOM.nodeType==1?s.nodeDOM.contains(t.nodeType==1?t:t.parentNode):s.nodeDOM==t))n=!1;else return s}};Y.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e};Y.prototype.posFromDOM=function(t,e,n){for(var o=t;o;o=o.parentNode){var s=this.getDesc(o);if(s)return s.localPosFromDOM(t,e,n)}return-1};Y.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var o=this.children[e],s=n+o.size;if(n==t&&s!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(t<s)return o.descAt(t-n-o.border);n=s}};Y.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,o=0,s=0;n<this.children.length;n++){var i=this.children[n],a=s+i.size;if(a>t||i instanceof Pc){o=t-s;break}s=a}if(o)return this.children[n].domFromPos(o-this.children[n].border,e);for(var c=void 0;n&&!(c=this.children[n-1]).size&&c instanceof Rc&&c.widget.type.side>=0;n--);if(e<=0){for(var u,l=!0;u=n?this.children[n-1]:null,!(!u||u.dom.parentNode==this.contentDOM);n--,l=!1);return u&&e&&l&&!u.border&&!u.domAtom?u.domFromPos(u.size,e):{node:this.contentDOM,offset:u?Tt(u.dom)+1:0}}else{for(var f,p=!0;f=n<this.children.length?this.children[n]:null,!(!f||f.dom.parentNode==this.contentDOM);n++,p=!1);return f&&p&&!f.border&&!f.domAtom?f.domFromPos(0,e):{node:this.contentDOM,offset:f?Tt(f.dom):this.contentDOM.childNodes.length}}};Y.prototype.parseRange=function(t,e,n){if(n===void 0&&(n=0),this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,s=-1,i=n,a=0;;a++){var c=this.children[a],u=i+c.size;if(o==-1&&t<=u){var l=i+c.border;if(t>=l&&e<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,e,l);t=i;for(var f=a;f>0;f--){var p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Tt(p.dom)+1;break}t-=p.size}o==-1&&(o=0)}if(o>-1&&(u>e||a==this.children.length-1)){e=u;for(var h=a+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Tt(d.dom);break}e+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:t,to:e,fromOffset:o,toOffset:s}};Y.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)};Y.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,o=e.offset;if(n.nodeType!=1||o==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[o]};Y.prototype.setSelection=function(t,e,n,o){for(var s=Math.min(t,e),i=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var u=this.children[a],l=c+u.size;if(s>c&&i<l)return u.setSelection(t-c-u.border,e-c-u.border,n,o);c=l}var f=this.domFromPos(t,t?-1:1),p=e==t?f:this.domFromPos(e,e?-1:1),h=n.getSelection(),d=!1;if((E.gecko||E.safari)&&t==e){var m=f.node,v=f.offset;if(m.nodeType==3){if(d=v&&m.nodeValue[v-1]==`
`,d&&v==m.nodeValue.length)for(var y=m,g=void 0;y;y=y.parentNode){if(g=y.nextSibling){g.nodeName=="BR"&&(f=p={node:g.parentNode,offset:Tt(g)+1});break}var D=y.pmViewDesc;if(D&&D.node&&D.node.isBlock)break}}else{var b=m.childNodes[v-1];d=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(E.gecko&&h.focusNode&&h.focusNode!=p.node&&h.focusNode.nodeType==1){var A=h.focusNode.childNodes[h.focusOffset];A&&A.contentEditable=="false"&&(o=!0)}if(!(!(o||d&&E.safari)&&qr(f.node,f.offset,h.anchorNode,h.anchorOffset)&&qr(p.node,p.offset,h.focusNode,h.focusOffset))){var k=!1;if((h.extend||t==e)&&!d){h.collapse(f.node,f.offset);try{t!=e&&h.extend(p.node,p.offset),k=!0}catch(q){if(!(q instanceof DOMException))throw q}}if(!k){if(t>e){var M=f;f=p,p=M}var F=document.createRange();F.setEnd(p.node,p.offset),F.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(F)}}};Y.prototype.ignoreMutation=function(t){return!this.contentDOM&&t.type!="selection"};ne.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)};Y.prototype.markDirty=function(t,e){for(var n=0,o=0;o<this.children.length;o++){var s=this.children[o],i=n+s.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var a=n+s.border,c=i-s.border;if(t>=a&&e<=c){this.dirty=t==n||e==i?Er:Bc,t==a&&e==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=pe:s.markDirty(t-a,e-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Er:pe}n=i}this.dirty=Er};Y.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=t==1?Er:Bc;e.dirty<n&&(e.dirty=n)}};ne.domAtom.get=function(){return!1};ne.ignoreForCoords.get=function(){return!1};Object.defineProperties(Y.prototype,ne);var Ce=[],Rc=function(r){function t(n,o,s,i){var a,c=o.type.toDOM;if(typeof c=="function"&&(c=c(s,function(){if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!o.type.spec.raw){if(c.nodeType!=1){var u=document.createElement("span");u.appendChild(c),c=u}c.contentEditable=!1,c.classList.add("ProseMirror-widget")}r.call(this,n,Ce,c,null),this.widget=o,a=this}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(o){return this.dirty==Jt&&o.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(o){var s=this.widget.spec.stopEvent;return s?s(o):!1},t.prototype.ignoreMutation=function(o){return o.type!="selection"||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),r.prototype.destroy.call(this)},e.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,e),t}(Y),Ef=function(r){function t(n,o,s,i){r.call(this,n,Ce,o,null),this.textDOM=s,this.text=i}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={size:{configurable:!0}};return e.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(o,s){return o!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s},t.prototype.domFromPos=function(o){return{node:this.textDOM,offset:o}},t.prototype.ignoreMutation=function(o){return o.type==="characterData"&&o.target.nodeValue==o.oldValue},Object.defineProperties(t.prototype,e),t}(Y),Yn=function(r){function t(e,n,o,s){r.call(this,e,[],o,s),this.mark=n}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.create=function(n,o,s,i){var a=i.nodeViews[o.type.name],c=a&&a(o,i,s);return(!c||!c.dom)&&(c=ct.renderSpec(document,o.type.spec.toDOM(o,s))),new t(n,o,c.dom,c.contentDOM||c.dom)},t.prototype.parseRule=function(){return this.dirty&pe||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(n){return this.dirty!=pe&&this.mark.eq(n)},t.prototype.markDirty=function(n,o){if(r.prototype.markDirty.call(this,n,o),this.dirty!=Jt){for(var s=this.parent;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Jt}},t.prototype.slice=function(n,o,s){var i=t.create(this.parent,this.mark,!0,s),a=this.children,c=this.size;o<c&&(a=rs(a,o,c,s)),n>0&&(a=rs(a,0,n,s));for(var u=0;u<a.length;u++)a[u].parent=i;return i.children=a,i},t}(Y),Gr=function(r){function t(n,o,s,i,a,c,u,l,f){r.call(this,n,o.isLeaf?Ce:[],a,c),this.nodeDOM=u,this.node=o,this.outerDeco=s,this.innerDeco=i,c&&this.updateChildren(l,f)}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(o,s,i,a,c,u){var l,f=c.nodeViews[s.type.name],p,h=f&&f(s,c,function(){if(!p)return u;if(p.parent)return p.parent.posBeforeChild(p)},i,a),d=h&&h.dom,m=h&&h.contentDOM;if(s.isText){if(!d)d=document.createTextNode(s.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||(l=ct.renderSpec(document,s.type.spec.toDOM(s)),d=l.dom,m=l.contentDOM);!m&&!s.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable=!1),s.type.spec.draggable&&(d.draggable=!0));var v=d;return d=Vc(d,i,s),h?p=new _f(o,s,i,a,d,m,v,h,c,u+1):s.isText?new Lc(o,s,i,a,d,v,c):new t(o,s,i,a,d,m,v,c,u+1)},t.prototype.parseRule=function(){var o=this;if(this.node.type.spec.reparseInView)return null;var s={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.whitespace=="pre"&&(s.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?s.contentElement=this.contentDOM:s.getContent=function(){return o.contentDOM?C.empty:o.node.content},s},t.prototype.matchesNode=function(o,s,i){return this.dirty==Jt&&o.eq(this.node)&&es(s,this.outerDeco)&&i.eq(this.innerDeco)},e.size.get=function(){return this.node.nodeSize},e.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(o,s){var i=this,a=this.node.inlineContent,c=s,u=o.composing&&this.localCompositionInfo(o,s),l=u&&u.pos>-1?u:null,f=u&&u.pos<0,p=new Vt(this,l&&l.node);Tf(this.node,this.innerDeco,function(h,d,m){h.spec.marks?p.syncToMarks(h.spec.marks,a,o):h.type.side>=0&&!m&&p.syncToMarks(d==i.node.childCount?V.none:i.node.child(d).marks,a,o),p.placeWidget(h,o,c)},function(h,d,m,v){p.syncToMarks(h.marks,a,o);var y;p.findNodeMatch(h,d,m,v)||f&&o.state.selection.from>c&&o.state.selection.to<c+h.nodeSize&&(y=p.findIndexWithChild(u.node))>-1&&p.updateNodeAt(h,d,m,y,o)||p.updateNextNode(h,d,m,o,v)||p.addNode(h,d,m,o,c),c+=h.nodeSize}),p.syncToMarks(Ce,a,o),this.node.isTextblock&&p.addTextblockHacks(),p.destroyRest(),(p.changed||this.dirty==Er)&&(l&&this.protectLocalComposition(o,l),qc(this.contentDOM,this.children,o),E.ios&&Of(this.dom))},t.prototype.localCompositionInfo=function(o,s){var i=o.state.selection,a=i.from,c=i.to;if(!(!(o.state.selection instanceof G)||a<s||c>s+this.node.content.size)){var u=o.root.getSelection(),l=Ff(u.focusNode,u.focusOffset);if(!(!l||!this.dom.contains(l.parentNode)))if(this.node.inlineContent){var f=l.nodeValue,p=Nf(this.node.content,f,a-s,c-s);return p<0?null:{node:l,pos:p,text:f}}else return{node:l,pos:-1}}},t.prototype.protectLocalComposition=function(o,s){var i=s.node,a=s.pos,c=s.text;if(!this.getDesc(i)){for(var u=i;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=null)}var l=new Ef(this,u,i,c);o.compositionNodes.push(l),this.children=rs(this.children,a,a+c.length,o,l)}},t.prototype.update=function(o,s,i,a){return this.dirty==pe||!o.sameMarkup(this.node)?!1:(this.updateInner(o,s,i,a),!0)},t.prototype.updateInner=function(o,s,i,a){this.updateOuterDeco(s),this.node=o,this.innerDeco=i,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=Jt},t.prototype.updateOuterDeco=function(o){if(!es(o,this.outerDeco)){var s=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=zc(this.dom,this.nodeDOM,ts(this.outerDeco,this.node,s),ts(o,this.node,s)),this.dom!=i&&(i.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=o}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},e.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,e),t}(Y);function Ic(r,t,e,n,o){return Vc(n,t,r),new Gr(null,r,t,e,n,n,n,o,0)}var Lc=function(r){function t(n,o,s,i,a,c,u){r.call(this,n,o,s,i,a,null,c,u)}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var o=this.nodeDOM.parentNode;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}},t.prototype.update=function(o,s,i,a){return this.dirty==pe||this.dirty!=Jt&&!this.inParent()||!o.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=Jt||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=o,this.dirty=Jt,!0)},t.prototype.inParent=function(){for(var o=this.parent.contentDOM,s=this.nodeDOM;s;s=s.parentNode)if(s==o)return!0;return!1},t.prototype.domFromPos=function(o){return{node:this.nodeDOM,offset:o}},t.prototype.localPosFromDOM=function(o,s,i){return o==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):r.prototype.localPosFromDOM.call(this,o,s,i)},t.prototype.ignoreMutation=function(o){return o.type!="characterData"&&o.type!="selection"},t.prototype.slice=function(o,s,i){var a=this.node.cut(o,s),c=document.createTextNode(a.text);return new t(this.parent,a,this.outerDeco,this.innerDeco,c,c,i)},t.prototype.markDirty=function(o,s){r.prototype.markDirty.call(this,o,s),this.dom!=this.nodeDOM&&(o==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=pe)},e.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,e),t}(Gr),Pc=function(r){function t(){r.apply(this,arguments)}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(o){return this.dirty==Jt&&this.dom.nodeName==o},e.domAtom.get=function(){return!0},e.ignoreForCoords.get=function(){return this.dom.nodeName=="IMG"},Object.defineProperties(t.prototype,e),t}(Y),_f=function(r){function t(e,n,o,s,i,a,c,u,l,f){r.call(this,e,n,o,s,i,a,c,l,f),this.spec=u}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.update=function(n,o,s,i){if(this.dirty==pe)return!1;if(this.spec.update){var a=this.spec.update(n,o,s);return a&&this.updateInner(n,o,s,i),a}else return!this.contentDOM&&!n.isLeaf?!1:r.prototype.update.call(this,n,o,s,i)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():r.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():r.prototype.deselectNode.call(this)},t.prototype.setSelection=function(n,o,s,i){this.spec.setSelection?this.spec.setSelection(n,o,s):r.prototype.setSelection.call(this,n,o,s,i)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),r.prototype.destroy.call(this)},t.prototype.stopEvent=function(n){return this.spec.stopEvent?this.spec.stopEvent(n):!1},t.prototype.ignoreMutation=function(n){return this.spec.ignoreMutation?this.spec.ignoreMutation(n):r.prototype.ignoreMutation.call(this,n)},t}(Gr);function qc(r,t,e){for(var n=r.firstChild,o=!1,s=0;s<t.length;s++){var i=t[s],a=i.dom;if(a.parentNode==r){for(;a!=n;)n=Fi(n),o=!0;n=n.nextSibling}else o=!0,r.insertBefore(a,n);if(i instanceof Yn){var c=n?n.previousSibling:r.lastChild;qc(i.contentDOM,i.children,e),n=c?c.nextSibling:r.firstChild}}for(;n;)n=Fi(n),o=!0;o&&e.trackWrites==r&&(e.trackWrites=null)}function _r(r){r&&(this.nodeName=r)}_r.prototype=Object.create(null);var Ne=[new _r];function ts(r,t,e){if(r.length==0)return Ne;for(var n=e?Ne[0]:new _r,o=[n],s=0;s<r.length;s++){var i=r[s].type.attrs;if(!!i){i.nodeName&&o.push(n=new _r(i.nodeName));for(var a in i){var c=i[a];c!=null&&(e&&o.length==1&&o.push(n=new _r(t.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+c:a=="style"?n.style=(n.style?n.style+";":"")+c:a!="nodeName"&&(n[a]=c))}}}return o}function zc(r,t,e,n){if(e==Ne&&n==Ne)return t;for(var o=t,s=0;s<n.length;s++){var i=n[s],a=e[s];if(s){var c=void 0;a&&a.nodeName==i.nodeName&&o!=r&&(c=o.parentNode)&&c.tagName.toLowerCase()==i.nodeName||(c=document.createElement(i.nodeName),c.pmIsDeco=!0,c.appendChild(o),a=Ne[0]),o=c}wf(o,a||Ne[0],i)}return o}function wf(r,t,e){for(var n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in e)&&r.removeAttribute(n);for(var o in e)o!="class"&&o!="style"&&o!="nodeName"&&e[o]!=t[o]&&r.setAttribute(o,e[o]);if(t.class!=e.class){for(var s=t.class?t.class.split(" ").filter(Boolean):Ce,i=e.class?e.class.split(" ").filter(Boolean):Ce,a=0;a<s.length;a++)i.indexOf(s[a])==-1&&r.classList.remove(s[a]);for(var c=0;c<i.length;c++)s.indexOf(i[c])==-1&&r.classList.add(i[c]);r.classList.length==0&&r.removeAttribute("class")}if(t.style!=e.style){if(t.style)for(var u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;l=u.exec(t.style);)r.style.removeProperty(l[1]);e.style&&(r.style.cssText+=e.style)}}function Vc(r,t,e){return zc(r,r,Ne,ts(t,e,r.nodeType!=1))}function es(r,t){if(r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if(!r[e].type.eq(t[e].type))return!1;return!0}function Fi(r){var t=r.nextSibling;return r.parentNode.removeChild(r),t}var Vt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=Sf(t.node.content,t)};Vt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}};Vt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)};Vt.prototype.syncToMarks=function(t,e,n){for(var o=0,s=this.stack.length>>1,i=Math.min(s,t.length);o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=Jt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);for(var a=-1,c=this.index;c<Math.min(this.index+3,this.top.children.length);c++)if(this.top.children[c].matchesMark(t[s])){a=c;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var u=Yn.create(this.top,t[s],e,n);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}};Vt.prototype.findNodeMatch=function(t,e,n,o){var s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))s=this.top.children.indexOf(i,this.index);else for(var a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){var u=this.top.children[a];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)};Vt.prototype.updateNodeAt=function(t,e,n,o,s){var i=this.top.children[o];return i.update(t,e,n,s)?(this.destroyBetween(this.index,o),this.index=o+1,!0):!1};Vt.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n){for(var o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==n)return o}return-1}t=e}};Vt.prototype.updateNextNode=function(t,e,n,o,s){for(var i=this.index;i<this.top.children.length;i++){var a=this.top.children[i];if(a instanceof Gr){var c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;var u=a.dom,l=this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=pe&&es(e,a.outerDeco));if(!l&&a.update(t,e,n,o))return this.destroyBetween(this.index,i),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1};Vt.prototype.addNode=function(t,e,n,o,s){this.top.children.splice(this.index++,0,Gr.create(this.top,t,e,n,o,s)),this.changed=!0};Vt.prototype.placeWidget=function(t,e,n){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{var s=new Rc(this.top,t,e,n);this.top.children.splice(this.index++,0,s),this.changed=!0}};Vt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof Yn;)t=t.children[t.children.length-1];(!t||!(t instanceof Lc)||/\n$/.test(t.node.text))&&((E.safari||E.chrome)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG"),this.addHackNode("BR"))};Vt.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);t=="IMG"&&(e.className="ProseMirror-separator"),t=="BR"&&(e.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new Pc(this.top,Ce,e,null)),this.changed=!0}};function Sf(r,t){var e=t,n=e.children.length,o=r.childCount,s=new Map,i=[];t:for(;o>0;){for(var a=void 0;;)if(n){var c=e.children[n-1];if(c instanceof Yn)e=c,n=c.children.length;else{a=c,n--;break}}else{if(e==t)break t;n=e.parent.children.indexOf(e),e=e.parent}var u=a.node;if(!!u){if(u!=r.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function Mf(r,t){return r.type.side-t.type.side}function Tf(r,t,e,n){var o=t.locals(r),s=0;if(o.length==0){for(var i=0;i<r.childCount;i++){var a=r.child(i);n(a,o,t.forChild(s,a),i),s+=a.nodeSize}return}for(var c=0,u=[],l=null,f=0;;){if(c<o.length&&o[c].to==s){for(var p=o[c++],h=void 0;c<o.length&&o[c].to==s;)(h||(h=[p])).push(o[c++]);if(h){h.sort(Mf);for(var d=0;d<h.length;d++)e(h[d],f,!!l)}else e(p,f,!!l)}var m=void 0,v=void 0;if(l)v=-1,m=l,l=null;else if(f<r.childCount)v=f,m=r.child(f++);else break;for(var y=0;y<u.length;y++)u[y].to<=s&&u.splice(y--,1);for(;c<o.length&&o[c].from<=s&&o[c].to>s;)u.push(o[c++]);var g=s+m.nodeSize;if(m.isText){var D=g;c<o.length&&o[c].from<D&&(D=o[c].from);for(var b=0;b<u.length;b++)u[b].to<D&&(D=u[b].to);D<g&&(l=m.cut(D-s),m=m.cut(0,D-s),g=D,v=-1)}var A=u.length?m.isInline&&!m.isLeaf?u.filter(function(k){return!k.inline}):u.slice():Ce;n(m,A,t.forChild(s,m),v),s=g}}function Of(r){if(r.nodeName=="UL"||r.nodeName=="OL"){var t=r.style.cssText;r.style.cssText=t+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=t}}function Ff(r,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&t>0){if(r.childNodes.length>t&&r.childNodes[t].nodeType==3)return r.childNodes[t];r=r.childNodes[t-1],t=Qt(r)}else if(r.nodeType==1&&t<r.childNodes.length)r=r.childNodes[t],t=0;else return null}}function Nf(r,t,e,n){for(var o=0,s=0;o<r.childCount&&s<=n;){var i=r.child(o++),a=s;if(s+=i.nodeSize,!!i.isText){for(var c=i.text;o<r.childCount;){var u=r.child(o++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=e&&a<n){var l=c.lastIndexOf(t,n-a-1);if(l>=0&&l+t.length+a>=e)return a+l}}}return-1}function rs(r,t,e,n,o){for(var s=[],i=0,a=0;i<r.length;i++){var c=r[i],u=a,l=a+=c.size;u>=e||l<=t?s.push(c):(u<t&&s.push(c.slice(0,t-u,n)),o&&(s.push(o),o=null),l>e&&s.push(c.slice(e-u,c.size,n)))}return s}function Hc(r,t){var e=r.root.getSelection(),n=r.state.doc;if(!e.focusNode)return null;var o=r.docView.nearestDesc(e.focusNode),s=o&&o.size==0,i=r.docView.posFromDOM(e.focusNode,e.focusOffset);if(i<0)return null;var a=n.resolve(i),c,u;if(Es(e)){for(c=a;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&P.isSelectable(o.node)&&o.parent&&!(o.node.isInline&&cf(e.focusNode,e.focusOffset,o.dom))){var l=o.posBefore;u=new P(i==l?a:n.resolve(l))}}else{var f=r.docView.posFromDOM(e.anchorNode,e.anchorOffset);if(f<0)return null;c=n.resolve(f)}if(!u){var p=t=="pointer"||r.state.selection.head<a.pos&&!s?1:-1;u=ws(r,c,a,p)}return u}function jc(r){return r.editable?r.hasFocus():Ss(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function we(r,t){var e=r.state.selection;if(Uc(r,e),!!jc(r)){if(!t&&r.mouseDown&&r.mouseDown.allowDefault&&E.chrome){var n=r.root.getSelection(),o=r.domObserver.currentSelection;if(n.anchorNode&&qr(n.anchorNode,n.anchorOffset,o.anchorNode,o.anchorOffset)){r.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)Rf(r);else{var s=e.anchor,i=e.head,a,c;Ni&&!(e instanceof G)&&(e.$from.parent.inlineContent||(a=Bi(r,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(c=Bi(r,e.to))),r.docView.setSelection(s,i,r.root,t),Ni&&(a&&Ri(a),c&&Ri(c)),e.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Bf(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}var Ni=E.safari||E.chrome&&E.chrome_version<63;function Bi(r,t){var e=r.docView.domFromPos(t,0),n=e.node,o=e.offset,s=o<n.childNodes.length?n.childNodes[o]:null,i=o?n.childNodes[o-1]:null;if(E.safari&&s&&s.contentEditable=="false")return Ao(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Ao(s);if(i)return Ao(i)}}function Ao(r){return r.contentEditable="true",E.safari&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function Ri(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function Bf(r){var t=r.dom.ownerDocument;t.removeEventListener("selectionchange",r.hideSelectionGuard);var e=r.root.getSelection(),n=e.anchorNode,o=e.anchorOffset;t.addEventListener("selectionchange",r.hideSelectionGuard=function(){(e.anchorNode!=n||e.anchorOffset!=o)&&(t.removeEventListener("selectionchange",r.hideSelectionGuard),setTimeout(function(){(!jc(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function Rf(r){var t=r.root.getSelection(),e=document.createRange(),n=r.cursorWrapper.dom,o=n.nodeName=="IMG";o?e.setEnd(n.parentNode,Tt(n)+1):e.setEnd(n,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!o&&!r.state.selection.visible&&E.ie&&E.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}function Uc(r,t){if(t instanceof P){var e=r.docView.descAt(t.from);e!=r.lastSelectedViewDesc&&(Ii(r),e&&e.selectNode(),r.lastSelectedViewDesc=e)}else Ii(r)}function Ii(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=null)}function ws(r,t,e,n){return r.someProp("createSelectionBetween",function(o){return o(r,t,e)})||G.between(t,e,n)}function If(r){return r.editable&&r.root.activeElement!=r.dom?!1:Ss(r)}function Ss(r){var t=r.root.getSelection();if(!t.anchorNode)return!1;try{return r.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(r.editable||r.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function Lf(r){var t=r.docView.domFromPos(r.state.selection.anchor,0),e=r.root.getSelection();return qr(t.node,t.offset,e.anchorNode,e.anchorOffset)}function ns(r,t){var e=r.selection,n=e.$anchor,o=e.$head,s=t>0?n.max(o):n.min(o),i=s.parent.inlineContent?s.depth?r.doc.resolve(t>0?s.after():s.before()):null:s;return i&&B.findFrom(i,t)}function Te(r,t){return r.dispatch(r.state.tr.setSelection(t).scrollIntoView()),!0}function Li(r,t,e){var n=r.state.selection;if(n instanceof G){if(!n.empty||e.indexOf("s")>-1)return!1;if(r.endOfTextblock(t>0?"right":"left")){var o=ns(r.state,t);return o&&o instanceof P?Te(r,o):!1}else if(!(E.mac&&e.indexOf("m")>-1)){var s=n.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,a;if(!i||i.isText)return!1;var c=t<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(a=r.docView.descAt(c))&&!a.contentDOM?P.isSelectable(i)?Te(r,new P(t<0?r.state.doc.resolve(s.pos-i.nodeSize):s)):E.webkit?Te(r,new G(r.state.doc.resolve(t<0?c:c+i.nodeSize))):!1:!1}}else{if(n instanceof P&&n.node.isInline)return Te(r,new G(t>0?n.$to:n.$from));var u=ns(r.state,t);return u?Te(r,u):!1}}function hn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function wr(r){var t=r.pmViewDesc;return t&&t.size==0&&(r.nextSibling||r.nodeName!="BR")}function Eo(r){var t=r.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(!!e){var o,s,i=!1;for(E.gecko&&e.nodeType==1&&n<hn(e)&&wr(e.childNodes[n])&&(i=!0);;)if(n>0){if(e.nodeType!=1)break;var a=e.childNodes[n-1];if(wr(a))o=e,s=--n;else if(a.nodeType==3)e=a,n=e.nodeValue.length;else break}else{if(Jc(e))break;for(var c=e.previousSibling;c&&wr(c);)o=e.parentNode,s=Tt(c),c=c.previousSibling;if(c)e=c,n=hn(e);else{if(e=e.parentNode,e==r.dom)break;n=0}}i?ss(r,t,e,n):o&&ss(r,t,o,s)}}function _o(r){var t=r.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(!!e){for(var o=hn(e),s,i;;)if(n<o){if(e.nodeType!=1)break;var a=e.childNodes[n];if(wr(a))s=e,i=++n;else break}else{if(Jc(e))break;for(var c=e.nextSibling;c&&wr(c);)s=c.parentNode,i=Tt(c)+1,c=c.nextSibling;if(c)e=c,n=0,o=hn(e);else{if(e=e.parentNode,e==r.dom)break;n=o=0}}s&&ss(r,t,s,i)}}function Jc(r){var t=r.pmViewDesc;return t&&t.node&&t.node.isBlock}function ss(r,t,e,n){if(Es(t)){var o=document.createRange();o.setEnd(e,n),o.setStart(e,n),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(e,n);r.domObserver.setCurSelection();var s=r.state;setTimeout(function(){r.state==s&&we(r)},50)}function Pi(r,t,e){var n=r.state.selection;if(n instanceof G&&!n.empty||e.indexOf("s")>-1||E.mac&&e.indexOf("m")>-1)return!1;var o=n.$from,s=n.$to;if(!o.parent.inlineContent||r.endOfTextblock(t<0?"up":"down")){var i=ns(r.state,t);if(i&&i instanceof P)return Te(r,i)}if(!o.parent.inlineContent){var a=t<0?o:s,c=n instanceof qe?B.near(a,t):B.findFrom(a,t);return c?Te(r,c):!1}return!1}function qi(r,t){if(!(r.state.selection instanceof G))return!0;var e=r.state.selection,n=e.$head,o=e.$anchor,s=e.empty;if(!n.sameParent(o))return!0;if(!s)return!1;if(r.endOfTextblock(t>0?"forward":"backward"))return!0;var i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){var a=r.state.tr;return t<0?a.delete(n.pos-i.nodeSize,n.pos):a.delete(n.pos,n.pos+i.nodeSize),r.dispatch(a),!0}return!1}function zi(r,t,e){r.domObserver.stop(),t.contentEditable=e,r.domObserver.start()}function Pf(r){if(!(!E.safari||r.state.selection.$head.parentOffset>0)){var t=r.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){var o=e.firstChild;zi(r,o,!0),setTimeout(function(){return zi(r,o,!1)},20)}}}function qf(r){var t="";return r.ctrlKey&&(t+="c"),r.metaKey&&(t+="m"),r.altKey&&(t+="a"),r.shiftKey&&(t+="s"),t}function zf(r,t){var e=t.keyCode,n=qf(t);return e==8||E.mac&&e==72&&n=="c"?qi(r,-1)||Eo(r):e==46||E.mac&&e==68&&n=="c"?qi(r,1)||_o(r):e==13||e==27?!0:e==37?Li(r,-1,n)||Eo(r):e==39?Li(r,1,n)||_o(r):e==38?Pi(r,-1,n)||Eo(r):e==40?Pf(r)||Pi(r,1,n)||_o(r):n==(E.mac?"m":"c")&&(e==66||e==73||e==89||e==90)}function Vf(r,t,e){var n=r.docView.parseRange(t,e),o=n.node,s=n.fromOffset,i=n.toOffset,a=n.from,c=n.to,u=r.root.getSelection(),l=null,f=u.anchorNode;if(f&&r.dom.contains(f.nodeType==1?f:f.parentNode)&&(l=[{node:f,offset:u.anchorOffset}],Es(u)||l.push({node:u.focusNode,offset:u.focusOffset})),E.chrome&&r.lastKeyCode===8)for(var p=i;p>s;p--){var h=o.childNodes[p-1],d=h.pmViewDesc;if(h.nodeName=="BR"&&!d){i=p;break}if(!d||d.size)break}var m=r.state.doc,v=r.someProp("domParser")||Ut.fromSchema(r.state.schema),y=m.resolve(a),g=null,D=v.parse(o,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:i,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,editableContent:!0,findPositions:l,ruleFromNode:Hf,context:y});if(l&&l[0].pos!=null){var b=l[0].pos,A=l[1]&&l[1].pos;A==null&&(A=b),g={anchor:b+a,head:A+a}}return{doc:D,sel:g,from:a,to:c}}function Hf(r){var t=r.pmViewDesc;if(t)return t.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(E.safari&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){var e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(r.parentNode.lastChild==r||E.safari&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0}}function jf(r,t,e,n,o){if(t<0){var s=r.lastSelectionTime>Date.now()-50?r.lastSelectionOrigin:null,i=Hc(r,s);if(i&&!r.state.selection.eq(i)){var a=r.state.tr.setSelection(i);s=="pointer"?a.setMeta("pointer",!0):s=="key"&&a.scrollIntoView(),r.dispatch(a)}return}var c=r.state.doc.resolve(t),u=c.sharedDepth(e);t=c.before(u+1),e=r.state.doc.resolve(e).after(u+1);var l=r.state.selection,f=Vf(r,t,e);if(E.chrome&&r.cursorWrapper&&f.sel&&f.sel.anchor==r.cursorWrapper.deco.from){var p=r.cursorWrapper.deco.type.toDOM.nextSibling,h=p&&p.nodeValue?p.nodeValue.length:1;f.sel={anchor:f.sel.anchor+h,head:f.sel.anchor+h}}var d=r.state.doc,m=d.slice(f.from,f.to),v,y;r.lastKeyCode===8&&Date.now()-100<r.lastKeyCodeTime?(v=r.state.selection.to,y="end"):(v=r.state.selection.from,y="start"),r.lastKeyCode=null;var g=Kf(m.content,f.doc.content,f.from,v,y);if(!g)if(n&&l instanceof G&&!l.empty&&l.$head.sameParent(l.$anchor)&&!r.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))g={start:l.from,endA:l.to,endB:l.to};else if((E.ios&&r.lastIOSEnter>Date.now()-225||E.android)&&o.some(function(R){return R.nodeName=="DIV"||R.nodeName=="P"})&&r.someProp("handleKeyDown",function(R){return R(r,Ke(13,"Enter"))})){r.lastIOSEnter=0;return}else{if(f.sel){var D=Vi(r,r.state.doc,f.sel);D&&!D.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(D))}return}r.domChangeCount++,r.state.selection.from<r.state.selection.to&&g.start==g.endB&&r.state.selection instanceof G&&(g.start>r.state.selection.from&&g.start<=r.state.selection.from+2?g.start=r.state.selection.from:g.endA<r.state.selection.to&&g.endA>=r.state.selection.to-2&&(g.endB+=r.state.selection.to-g.endA,g.endA=r.state.selection.to)),E.ie&&E.ie_version<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>f.from&&f.doc.textBetween(g.start-f.from-1,g.start-f.from+1)==" \xA0"&&(g.start--,g.endA--,g.endB--);var b=f.doc.resolveNoCache(g.start-f.from),A=f.doc.resolveNoCache(g.endB-f.from),k=b.sameParent(A)&&b.parent.inlineContent,M;if((E.ios&&r.lastIOSEnter>Date.now()-225&&(!k||o.some(function(R){return R.nodeName=="DIV"||R.nodeName=="P"}))||!k&&b.pos<f.doc.content.size&&(M=B.findFrom(f.doc.resolve(b.pos+1),1,!0))&&M.head==A.pos)&&r.someProp("handleKeyDown",function(R){return R(r,Ke(13,"Enter"))})){r.lastIOSEnter=0;return}if(r.state.selection.anchor>g.start&&Jf(d,g.start,g.endA,b,A)&&r.someProp("handleKeyDown",function(R){return R(r,Ke(8,"Backspace"))})){E.android&&E.chrome&&r.domObserver.suppressSelectionUpdates();return}E.chrome&&E.android&&g.toB==g.from&&(r.lastAndroidDelete=Date.now()),E.android&&!k&&b.start()!=A.start()&&A.parentOffset==0&&b.depth==A.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==g.endA&&(g.endB-=2,A=f.doc.resolveNoCache(g.endB-f.from),setTimeout(function(){r.someProp("handleKeyDown",function(R){return R(r,Ke(13,"Enter"))})},20));var F=g.start,q=g.endA,O,K,kt,_;if(k){if(b.pos==A.pos)E.ie&&E.ie_version<=11&&b.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(function(){return we(r)},20)),O=r.state.tr.delete(F,q),K=d.resolve(g.start).marksAcross(d.resolve(g.endA));else if(g.endA==g.endB&&(_=d.resolve(g.start))&&(kt=Uf(b.parent.content.cut(b.parentOffset,A.parentOffset),_.parent.content.cut(_.parentOffset,g.endA-_.start()))))O=r.state.tr,kt.type=="add"?O.addMark(F,q,kt.mark):O.removeMark(F,q,kt.mark);else if(b.parent.child(b.index()).isText&&b.index()==A.index()-(A.textOffset?0:1)){var W=b.parent.textBetween(b.parentOffset,A.parentOffset);if(r.someProp("handleTextInput",function(R){return R(r,F,q,W)}))return;O=r.state.tr.insertText(W,F,q)}}if(O||(O=r.state.tr.replace(F,q,f.doc.slice(g.start-f.from,g.endB-f.from))),f.sel){var I=Vi(r,O.doc,f.sel);I&&!(E.chrome&&E.android&&r.composing&&I.empty&&(g.start!=g.endB||r.lastAndroidDelete<Date.now()-100)&&(I.head==F||I.head==O.mapping.map(q)-1)||E.ie&&I.empty&&I.head==F)&&O.setSelection(I)}K&&O.ensureMarks(K),r.dispatch(O.scrollIntoView())}function Vi(r,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:ws(r,t.resolve(e.anchor),t.resolve(e.head))}function Uf(r,t){for(var e=r.firstChild.marks,n=t.firstChild.marks,o=e,s=n,i,a,c,u=0;u<n.length;u++)o=n[u].removeFromSet(o);for(var l=0;l<e.length;l++)s=e[l].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",c=function(h){return h.mark(a.addToSet(h.marks))};else if(o.length==0&&s.length==1)a=s[0],i="remove",c=function(h){return h.mark(a.removeFromSet(h.marks))};else return null;for(var f=[],p=0;p<t.childCount;p++)f.push(c(t.child(p)));if(C.from(f).eq(r))return{mark:a,type:i}}function Jf(r,t,e,n,o){if(!n.parent.isTextblock||e-t<=o.pos-n.pos||wo(n,!0,!1)<o.pos)return!1;var s=r.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;var i=r.resolve(wo(s,!0,!0));return!i.parent.isTextblock||i.pos>e||wo(i,!0,!1)<e?!1:n.parent.content.cut(n.parentOffset).eq(i.parent.content)}function wo(r,t,e){for(var n=r.depth,o=t?r.end():r.pos;n>0&&(t||r.indexAfter(n)==r.node(n).childCount);)n--,o++,t=!1;if(e)for(var s=r.node(n).maybeChild(r.indexAfter(n));s&&!s.isLeaf;)s=s.firstChild,o++;return o}function Kf(r,t,e,n,o){var s=r.findDiffStart(t,e);if(s==null)return null;var i=r.findDiffEnd(t,e+r.size,e+t.size),a=i.a,c=i.b;if(o=="end"){var u=Math.max(0,s-Math.min(a,c));n-=a+u-s}if(a<s&&r.size<t.size){var l=n<=s&&n>=a?s-n:0;s-=l,c=s+(c-a),a=s}else if(c<s){var f=n<=s&&n>=c?s-n:0;s-=f,a=s+(a-c),c=s}return{start:s,endA:a,endB:c}}function Kc(r,t){for(var e=[],n=t.content,o=t.openStart,s=t.openEnd;o>1&&s>1&&n.childCount==1&&n.firstChild.childCount==1;){o--,s--;var i=n.firstChild;e.push(i.type.name,i.attrs!=i.type.defaultAttrs?i.attrs:null),n=i.content}var a=r.someProp("clipboardSerializer")||ct.fromSchema(r.state.schema),c=Qc(),u=c.createElement("div");u.appendChild(a.serializeFragment(n,{document:c}));for(var l=u.firstChild,f;l&&l.nodeType==1&&(f=Yc[l.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var h=c.createElement(f[p]);u.firstChild;)h.appendChild(u.firstChild);u.appendChild(h),f[p]!="tbody"&&(o++,s++)}l=u.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(e));var d=r.someProp("clipboardTextSerializer",function(m){return m(t)})||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:d}}function Wc(r,t,e,n,o){var s,i=o.parent.type.spec.code,a;if(!e&&!t)return null;var c=t&&(n||i||!e);if(c){if(r.someProp("transformPastedText",function(A){t=A(t,i||n)}),i)return t?new S(C.from(r.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):S.empty;var u=r.someProp("clipboardTextParser",function(A){return A(t,o,n)});if(u)a=u;else{var l=o.marks(),f=r.state,p=f.schema,h=ct.fromSchema(p);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(A){var k=s.appendChild(document.createElement("p"));A&&k.appendChild(h.serializeNode(p.text(A,l)))})}}else r.someProp("transformPastedHTML",function(A){e=A(e)}),s=$f(e),E.webkit&&Zf(s);var d=s&&s.querySelector("[data-pm-slice]"),m=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var v=r.someProp("clipboardParser")||r.someProp("domParser")||Ut.fromSchema(r.state.schema);a=v.parseSlice(s,{preserveWhitespace:!!(c||m),context:o,ruleFromNode:function(k){if(k.nodeName=="BR"&&!k.nextSibling&&k.parentNode&&!Wf.test(k.parentNode.nodeName))return{ignore:!0}}})}if(m)a=Yf(Hi(a,+m[1],+m[2]),m[3]);else if(a=S.maxOpen(Gf(a.content,o),!0),a.openStart||a.openEnd){for(var y=0,g=0,D=a.content.firstChild;y<a.openStart&&!D.type.spec.isolating;y++,D=D.firstChild);for(var b=a.content.lastChild;g<a.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);a=Hi(a,y,g)}return r.someProp("transformPasted",function(A){a=A(a)}),a}var Wf=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Gf(r,t){if(r.childCount<2)return r;for(var e=function(s){var i=t.node(s),a=i.contentMatchAt(t.index(s)),c=void 0,u=[];if(r.forEach(function(l){if(!!u){var f=a.findWrapping(l.type),p;if(!f)return u=null;if(p=u.length&&c.length&&$c(f,c,l,u[u.length-1],0))u[u.length-1]=p;else{u.length&&(u[u.length-1]=Zc(u[u.length-1],c.length));var h=Gc(l,f);u.push(h),a=a.matchType(h.type,h.attrs),c=f}}}),u)return{v:C.from(u)}},n=t.depth;n>=0;n--){var o=e(n);if(o)return o.v}return r}function Gc(r,t,e){e===void 0&&(e=0);for(var n=t.length-1;n>=e;n--)r=t[n].create(null,C.from(r));return r}function $c(r,t,e,n,o){if(o<r.length&&o<t.length&&r[o]==t[o]){var s=$c(r,t,e,n.lastChild,o+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));var i=n.contentMatchAt(n.childCount);if(i.matchType(o==r.length-1?e.type:r[o+1]))return n.copy(n.content.append(C.from(Gc(e,r,o+1))))}}function Zc(r,t){if(t==0)return r;var e=r.content.replaceChild(r.childCount-1,Zc(r.lastChild,t-1)),n=r.contentMatchAt(r.childCount).fillBefore(C.empty,!0);return r.copy(e.append(n))}function is(r,t,e,n,o,s){var i=t<0?r.firstChild:r.lastChild,a=i.content;return o<n-1&&(a=is(a,t,e,n,o+1,s)),o>=e&&(a=t<0?i.contentMatchAt(0).fillBefore(a,r.childCount>1||s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(C.empty,!0))),r.replaceChild(t<0?0:r.childCount-1,i.copy(a))}function Hi(r,t,e){return t<r.openStart&&(r=new S(is(r.content,-1,t,r.openStart,0,r.openEnd),t,r.openEnd)),e<r.openEnd&&(r=new S(is(r.content,1,e,r.openEnd,0,0),r.openStart,e)),r}var Yc={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ji=null;function Qc(){return ji||(ji=document.implementation.createHTMLDocument("title"))}function $f(r){var t=/^(\s*<meta [^>]*>)*/.exec(r);t&&(r=r.slice(t[0].length));var e=Qc().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),o;if((o=n&&Yc[n[1].toLowerCase()])&&(r=o.map(function(i){return"<"+i+">"}).join("")+r+o.map(function(i){return"</"+i+">"}).reverse().join("")),e.innerHTML=r,o)for(var s=0;s<o.length;s++)e=e.querySelector(o[s])||e;return e}function Zf(r){for(var t=r.querySelectorAll(E.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),e=0;e<t.length;e++){var n=t[e];n.childNodes.length==1&&n.textContent=="\xA0"&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function Yf(r,t){if(!r.size)return r;var e=r.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return r}for(var o=r.content,s=r.openStart,i=r.openEnd,a=n.length-2;a>=0;a-=2){var c=e.nodes[n[a]];if(!c||c.hasRequiredAttrs())break;o=C.from(c.create(n[a+1],o)),s++,i++}return new S(o,s,i)}var Qf={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ms=E.ie&&E.ie_version<=11,Ts=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ts.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset};Ts.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Bt=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(o){for(var s=0;s<o.length;s++)n.queue.push(o[s]);E.ie&&E.ie_version<=11&&o.some(function(i){return i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length})?n.flushSoon():n.flush()}),this.currentSelection=new Ts,Ms&&(this.onCharData=function(o){n.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Bt.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))};Bt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())};Bt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Qf),Ms&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()};Bt.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}Ms&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()};Bt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)};Bt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)};Bt.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)};Bt.prototype.onSelectionChange=function(){if(!!If(this.view)){if(this.suppressingSelectionUpdates)return we(this.view);if(E.ie&&E.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&qr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}};Bt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())};Bt.prototype.ignoreSelectionChange=function(t){if(t.rangeCount==0)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);if(n&&n.ignoreMutation({type:"selection",target:e.nodeType==3?e.parentNode:e}))return this.setCurSelection(),!0};Bt.prototype.flush=function(){if(!(!this.view.docView||this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Ss(this.view)&&!this.ignoreSelectionChange(e),o=-1,s=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var u=this.registerMutation(t[c],a);u&&(o=o<0?u.from:Math.min(u.from,o),s=s<0?u.to:Math.max(u.to,s),u.typeOver&&(i=!0))}if(E.gecko&&a.length>1){var l=a.filter(function(h){return h.nodeName=="BR"});if(l.length==2){var f=l[0],p=l[1];f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,s),Xf(this.view)),this.handleDOMChange(o,s,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||we(this.view),this.currentSelection.set(e))}};Bt.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(n==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!n||n.ignoreMutation(t))return null;if(t.type=="childList"){for(var o=0;o<t.addedNodes.length;o++)e.push(t.addedNodes[o]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var s=t.previousSibling,i=t.nextSibling;if(E.ie&&E.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var c=t.addedNodes[a],u=c.previousSibling,l=c.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(s=u),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(i=l)}var f=s&&s.parentNode==t.target?Tt(s)+1:0,p=n.localPosFromDOM(t.target,f,-1),h=i&&i.parentNode==t.target?Tt(i):t.target.childNodes.length,d=n.localPosFromDOM(t.target,h,1);return{from:p,to:d}}else return t.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Ui=!1;function Xf(r){Ui||(Ui=!0,getComputedStyle(r.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var St={},xt={};function tp(r){r.shiftKey=!1,r.mouseDown=null,r.lastKeyCode=null,r.lastKeyCodeTime=0,r.lastClick={time:0,x:0,y:0,type:""},r.lastSelectionOrigin=null,r.lastSelectionTime=0,r.lastIOSEnter=0,r.lastIOSEnterFallbackTimeout=null,r.lastAndroidDelete=0,r.composing=!1,r.composingTimeout=null,r.compositionNodes=[],r.compositionEndedAt=-2e8,r.domObserver=new Bt(r,function(n,o,s,i){return jf(r,n,o,s,i)}),r.domObserver.start(),r.domChangeCount=0,r.eventHandlers=Object.create(null);var t=function(n){var o=St[n];r.dom.addEventListener(n,r.eventHandlers[n]=function(s){rp(r,s)&&!Fs(r,s)&&(r.editable||!(s.type in xt))&&o(r,s)})};for(var e in St)t(e);E.safari&&r.dom.addEventListener("input",function(){return null}),Os(r)}function Ie(r,t){r.lastSelectionOrigin=t,r.lastSelectionTime=Date.now()}function ep(r){r.domObserver.stop();for(var t in r.eventHandlers)r.dom.removeEventListener(t,r.eventHandlers[t]);clearTimeout(r.composingTimeout),clearTimeout(r.lastIOSEnterFallbackTimeout)}function Os(r){r.someProp("handleDOMEvents",function(t){for(var e in t)r.eventHandlers[e]||r.dom.addEventListener(e,r.eventHandlers[e]=function(n){return Fs(r,n)})})}function Fs(r,t){return r.someProp("handleDOMEvents",function(e){var n=e[t.type];return n?n(r,t)||t.defaultPrevented:!1})}function rp(r,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var e=t.target;e!=r.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function np(r,t){!Fs(r,t)&&St[t.type]&&(r.editable||!(t.type in xt))&&St[t.type](r,t)}xt.keydown=function(r,t){if(r.shiftKey=t.keyCode==16||t.shiftKey,!tu(r,t)&&(r.lastKeyCode=t.keyCode,r.lastKeyCodeTime=Date.now(),!(E.android&&E.chrome&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),E.ios&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var e=Date.now();r.lastIOSEnter=e,r.lastIOSEnterFallbackTimeout=setTimeout(function(){r.lastIOSEnter==e&&(r.someProp("handleKeyDown",function(n){return n(r,Ke(13,"Enter"))}),r.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",function(n){return n(r,t)})||zf(r,t)?t.preventDefault():Ie(r,"key")};xt.keyup=function(r,t){t.keyCode==16&&(r.shiftKey=!1)};xt.keypress=function(r,t){if(!(tu(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||E.mac&&t.metaKey)){if(r.someProp("handleKeyPress",function(o){return o(r,t)})){t.preventDefault();return}var e=r.state.selection;if(!(e instanceof G)||!e.$from.sameParent(e.$to)){var n=String.fromCharCode(t.charCode);r.someProp("handleTextInput",function(o){return o(r,e.$from.pos,e.$to.pos,n)})||r.dispatch(r.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}}};function Qn(r){return{left:r.clientX,top:r.clientY}}function op(r,t){var e=t.x-r.clientX,n=t.y-r.clientY;return e*e+n*n<100}function Ns(r,t,e,n,o){if(n==-1)return!1;for(var s=r.state.doc.resolve(n),i=function(u){if(r.someProp(t,function(l){return u>s.depth?l(r,e,s.nodeAfter,s.before(u),o,!0):l(r,e,s.node(u),s.before(u),o,!1)}))return{v:!0}},a=s.depth+1;a>0;a--){var c=i(a);if(c)return c.v}return!1}function er(r,t,e){r.focused||r.focus();var n=r.state.tr.setSelection(t);e=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}function sp(r,t){if(t==-1)return!1;var e=r.state.doc.resolve(t),n=e.nodeAfter;return n&&n.isAtom&&P.isSelectable(n)?(er(r,new P(e),"pointer"),!0):!1}function ip(r,t){if(t==-1)return!1;var e=r.state.selection,n,o;e instanceof P&&(n=e.node);for(var s=r.state.doc.resolve(t),i=s.depth+1;i>0;i--){var a=i>s.depth?s.nodeAfter:s.node(i);if(P.isSelectable(a)){n&&e.$from.depth>0&&i>=e.$from.depth&&s.before(e.$from.depth+1)==e.$from.pos?o=s.before(e.$from.depth):o=s.before(i);break}}return o!=null?(er(r,P.create(r.state.doc,o),"pointer"),!0):!1}function ap(r,t,e,n,o){return Ns(r,"handleClickOn",t,e,n)||r.someProp("handleClick",function(s){return s(r,t,n)})||(o?ip(r,e):sp(r,e))}function cp(r,t,e,n){return Ns(r,"handleDoubleClickOn",t,e,n)||r.someProp("handleDoubleClick",function(o){return o(r,t,n)})}function up(r,t,e,n){return Ns(r,"handleTripleClickOn",t,e,n)||r.someProp("handleTripleClick",function(o){return o(r,t,n)})||lp(r,e,n)}function lp(r,t,e){if(e.button!=0)return!1;var n=r.state.doc;if(t==-1)return n.inlineContent?(er(r,G.create(n,0,n.content.size),"pointer"),!0):!1;for(var o=n.resolve(t),s=o.depth+1;s>0;s--){var i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)er(r,G.create(n,a+1,a+1+i.content.size),"pointer");else if(P.isSelectable(i))er(r,P.create(n,a),"pointer");else continue;return!0}}function Bs(r){return dn(r)}var Xc=E.mac?"metaKey":"ctrlKey";St.mousedown=function(r,t){r.shiftKey=t.shiftKey;var e=Bs(r),n=Date.now(),o="singleClick";n-r.lastClick.time<500&&op(t,r.lastClick)&&!t[Xc]&&(r.lastClick.type=="singleClick"?o="doubleClick":r.lastClick.type=="doubleClick"&&(o="tripleClick")),r.lastClick={time:n,x:t.clientX,y:t.clientY,type:o};var s=r.posAtCoords(Qn(t));!s||(o=="singleClick"?(r.mouseDown&&r.mouseDown.done(),r.mouseDown=new Xn(r,s,t,e)):(o=="doubleClick"?cp:up)(r,s.pos,s.inside,t)?t.preventDefault():Ie(r,"pointer"))};var Xn=function(t,e,n,o){var s=this;this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[Xc],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1;var i,a;if(e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var c=t.state.doc.resolve(e.pos);i=c.parent,a=c.depth?c.before():0}this.mightDrag=null;var u=o?null:n.target,l=u?t.docView.nearestDesc(u,!0):null;this.target=l?l.dom:null;var f=t.state,p=f.selection;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||p instanceof P&&p.from<=a&&p.to>a)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&E.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ie(t,"pointer")};Xn.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return we(t.view)}),this.view.mouseDown=null};Xn.prototype.up=function(t){if(this.done(),!!this.view.dom.contains(t.target.nodeType==3?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Qn(t))),this.allowDefault||!e?Ie(this.view,"pointer"):ap(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||E.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||E.chrome&&!(this.view.state.selection instanceof G)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(er(this.view,B.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ie(this.view,"pointer")}};Xn.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Ie(this.view,"pointer"),t.buttons==0&&this.done()};St.touchdown=function(r){Bs(r),Ie(r,"pointer")};St.contextmenu=function(r){return Bs(r)};function tu(r,t){return r.composing?!0:E.safari&&Math.abs(t.timeStamp-r.compositionEndedAt)<500?(r.compositionEndedAt=-2e8,!0):!1}var fp=E.android?5e3:-1;xt.compositionstart=xt.compositionupdate=function(r){if(!r.composing){r.domObserver.flush();var t=r.state,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(function(a){return a.type.spec.inclusive===!1})))r.markCursor=r.state.storedMarks||e.marks(),dn(r,!0),r.markCursor=null;else if(dn(r),E.gecko&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length)for(var n=r.root.getSelection(),o=n.focusNode,s=n.focusOffset;o&&o.nodeType==1&&s!=0;){var i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){n.collapse(i,i.nodeValue.length);break}else o=i,s=-1}r.composing=!0}eu(r,fp)};xt.compositionend=function(r,t){r.composing&&(r.composing=!1,r.compositionEndedAt=t.timeStamp,eu(r,20))};function eu(r,t){clearTimeout(r.composingTimeout),t>-1&&(r.composingTimeout=setTimeout(function(){return dn(r)},t))}function ru(r){for(r.composing&&(r.composing=!1,r.compositionEndedAt=pp());r.compositionNodes.length>0;)r.compositionNodes.pop().markParentsDirty()}function pp(){var r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function dn(r,t){if(!(E.android&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),ru(r),t||r.docView.dirty){var e=Hc(r);return e&&!e.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(e)):r.updateState(r.state),!0}return!1}}function hp(r,t){if(!!r.dom.parentNode){var e=r.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),o=document.createRange();o.selectNodeContents(t),r.dom.blur(),n.removeAllRanges(),n.addRange(o),setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),r.focus()},50)}}var sr=E.ie&&E.ie_version<15||E.ios&&E.webkit_version<604;St.copy=xt.cut=function(r,t){var e=r.state.selection,n=t.type=="cut";if(!e.empty){var o=sr?null:t.clipboardData,s=e.content(),i=Kc(r,s),a=i.dom,c=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):hp(r,a),n&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function dp(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function mp(r,t){if(!!r.dom.parentNode){var e=r.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(function(){r.focus(),n.parentNode&&n.parentNode.removeChild(n),e?as(r,n.value,null,t):as(r,n.textContent,n.innerHTML,t)},50)}}function as(r,t,e,n){var o=Wc(r,t,e,r.shiftKey,r.state.selection.$from);if(r.someProp("handlePaste",function(a){return a(r,n,o||S.empty)}))return!0;if(!o)return!1;var s=dp(o),i=s?r.state.tr.replaceSelectionWith(s,r.shiftKey):r.state.tr.replaceSelection(o);return r.dispatch(i.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}xt.paste=function(r,t){if(!(r.composing&&!E.android)){var e=sr?null:t.clipboardData;e&&as(r,e.getData("text/plain"),e.getData("text/html"),t)?t.preventDefault():mp(r,t)}};var gp=function(t,e){this.slice=t,this.move=e},nu=E.mac?"altKey":"ctrlKey";St.dragstart=function(r,t){var e=r.mouseDown;if(e&&e.done(),!!t.dataTransfer){var n=r.state.selection,o=n.empty?null:r.posAtCoords(Qn(t));if(!(o&&o.pos>=n.from&&o.pos<=(n instanceof P?n.to-1:n.to))){if(e&&e.mightDrag)r.dispatch(r.state.tr.setSelection(P.create(r.state.doc,e.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){var s=r.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=r.docView&&r.dispatch(r.state.tr.setSelection(P.create(r.state.doc,s.posBefore)))}}var i=r.state.selection.content(),a=Kc(r,i),c=a.dom,u=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(sr?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",sr||t.dataTransfer.setData("text/plain",u),r.dragging=new gp(i,!t[nu])}};St.dragend=function(r){var t=r.dragging;window.setTimeout(function(){r.dragging==t&&(r.dragging=null)},50)};xt.dragover=xt.dragenter=function(r,t){return t.preventDefault()};xt.drop=function(r,t){var e=r.dragging;if(r.dragging=null,!!t.dataTransfer){var n=r.posAtCoords(Qn(t));if(!!n){var o=r.state.doc.resolve(n.pos);if(!!o){var s=e&&e.slice;s?r.someProp("transformPasted",function(d){s=d(s)}):s=Wc(r,t.dataTransfer.getData(sr?"Text":"text/plain"),sr?null:t.dataTransfer.getData("text/html"),!1,o);var i=e&&!t[nu];if(r.someProp("handleDrop",function(d){return d(r,t,s||S.empty,i)})){t.preventDefault();return}if(!!s){t.preventDefault();var a=s?mc(r.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);var c=r.state.tr;i&&c.deleteSelection();var u=c.mapping.map(a),l=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(l?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),!c.doc.eq(f)){var p=c.doc.resolve(u);if(l&&P.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new P(p));else{var h=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach(function(d,m,v,y){return h=y}),c.setSelection(ws(r,p,c.doc.resolve(h)))}r.focus(),r.dispatch(c.setMeta("uiEvent","drop"))}}}}}};St.focus=function(r){r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(function(){r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.root.getSelection())&&we(r)},20))};St.blur=function(r,t){r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.set({}),r.focused=!1)};St.beforeinput=function(r,t){if(E.chrome&&E.android&&t.inputType=="deleteContentBackward"){r.domObserver.flushSoon();var e=r.domChangeCount;setTimeout(function(){if(r.domChangeCount==e&&(r.dom.blur(),r.focus(),!r.someProp("handleKeyDown",function(s){return s(r,Ke(8,"Backspace"))}))){var n=r.state.selection,o=n.$cursor;o&&o.pos>0&&r.dispatch(r.state.tr.delete(o.pos-1,o.pos).scrollIntoView())}},50)}};for(var Ji in xt)St[Ji]=xt[Ji];function zr(r,t){if(r==t)return!0;for(var e in r)if(r[e]!==t[e])return!1;for(var n in t)if(!(n in r))return!1;return!0}var ir=function(t,e){this.spec=e||ze,this.side=this.spec.side||0,this.toDOM=t};ir.prototype.map=function(t,e,n,o){var s=t.mapResult(e.from+o,this.side<0?-1:1),i=s.pos,a=s.deleted;return a?null:new nt(i-n,i-n,this)};ir.prototype.valid=function(){return!0};ir.prototype.eq=function(t){return this==t||t instanceof ir&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&zr(this.spec,t.spec))};ir.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var Kt=function(t,e){this.spec=e||ze,this.attrs=t};Kt.prototype.map=function(t,e,n,o){var s=t.map(e.from+o,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+o,this.spec.inclusiveEnd?1:-1)-n;return s>=i?null:new nt(s,i,this)};Kt.prototype.valid=function(t,e){return e.from<e.to};Kt.prototype.eq=function(t){return this==t||t instanceof Kt&&zr(this.attrs,t.attrs)&&zr(this.spec,t.spec)};Kt.is=function(t){return t.type instanceof Kt};var Vr=function(t,e){this.spec=e||ze,this.attrs=t};Vr.prototype.map=function(t,e,n,o){var s=t.mapResult(e.from+o,1);if(s.deleted)return null;var i=t.mapResult(e.to+o,-1);return i.deleted||i.pos<=s.pos?null:new nt(s.pos-n,i.pos-n,this)};Vr.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),o=n.index,s=n.offset,i;return s==e.from&&!(i=t.child(o)).isText&&s+i.nodeSize==e.to};Vr.prototype.eq=function(t){return this==t||t instanceof Vr&&zr(this.attrs,t.attrs)&&zr(this.spec,t.spec)};var nt=function(t,e,n){this.from=t,this.to=e,this.type=n},Rs={spec:{configurable:!0},inline:{configurable:!0}};nt.prototype.copy=function(t,e){return new nt(t,e,this.type)};nt.prototype.eq=function(t,e){return e===void 0&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to};nt.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)};nt.widget=function(t,e,n){return new nt(t,t,new ir(e,n))};nt.inline=function(t,e,n,o){return new nt(t,e,new Kt(n,o))};nt.node=function(t,e,n,o){return new nt(t,e,new Vr(n,o))};Rs.spec.get=function(){return this.type.spec};Rs.inline.get=function(){return this.type instanceof Kt};Object.defineProperties(nt.prototype,Rs);var mn=[],ze={},Z=function(t,e){this.local=t&&t.length?t:mn,this.children=e&&e.length?e:mn};Z.create=function(t,e){return e.length?to(e,t,0,ze):ut};Z.prototype.find=function(t,e,n){var o=[];return this.findInner(t==null?0:t,e==null?1e9:e,o,0,n),o};Z.prototype.findInner=function(t,e,n,o,s){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=e&&a.to>=t&&(!s||s(a.spec))&&n.push(a.copy(a.from+o,a.to+o))}for(var c=0;c<this.children.length;c+=3)if(this.children[c]<e&&this.children[c+1]>t){var u=this.children[c]+1;this.children[c+2].findInner(t-u,e-u,n,o+u,s)}};Z.prototype.map=function(t,e,n){return this==ut||t.maps.length==0?this:this.mapInner(t,e,0,0,n||ze)};Z.prototype.mapInner=function(t,e,n,o,s){for(var i,a=0;a<this.local.length;a++){var c=this.local[a].map(t,n,o);c&&c.type.valid(e,c)?(i||(i=[])).push(c):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?vp(this.children,i,t,e,n,o,s):i?new Z(i.sort(Ve)):ut};Z.prototype.add=function(t,e){return e.length?this==ut?Z.create(t,e):this.addInner(t,e,0):this};Z.prototype.addInner=function(t,e,n){var o=this,s,i=0;t.forEach(function(u,l){var f=l+n,p;if(!!(p=su(e,u,f))){for(s||(s=o.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(u,p,f+1):s.splice(i,0,l,l+u.nodeSize,to(p,u,f+1,ze)),i+=3}});for(var a=ou(i?iu(e):e,-n),c=0;c<a.length;c++)a[c].type.valid(t,a[c])||a.splice(c--,1);return new Z(a.length?this.local.concat(a).sort(Ve):this.local,s||this.children)};Z.prototype.remove=function(t){return t.length==0||this==ut?this:this.removeInner(t,0)};Z.prototype.removeInner=function(t,e){for(var n=this.children,o=this.local,s=0;s<n.length;s+=3){for(var i=void 0,a=n[s]+e,c=n[s+1]+e,u=0,l=void 0;u<t.length;u++)(l=t[u])&&l.from>a&&l.to<c&&(t[u]=null,(i||(i=[])).push(l));if(!!i){n==this.children&&(n=this.children.slice());var f=n[s+2].removeInner(i,a+1);f!=ut?n[s+2]=f:(n.splice(s,3),s-=3)}}if(o.length){for(var p=0,h=void 0;p<t.length;p++)if(h=t[p])for(var d=0;d<o.length;d++)o[d].eq(h,e)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1))}return n==this.children&&o==this.local?this:o.length||n.length?new Z(o,n):ut};Z.prototype.forChild=function(t,e){if(this==ut)return this;if(e.isLeaf)return Z.empty;for(var n,o,s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(n=this.children[s+2]);break}for(var i=t+1,a=i+e.content.size,c=0;c<this.local.length;c++){var u=this.local[c];if(u.from<a&&u.to>i&&u.type instanceof Kt){var l=Math.max(i,u.from)-i,f=Math.min(a,u.to)-i;l<f&&(o||(o=[])).push(u.copy(l,f))}}if(o){var p=new Z(o.sort(Ve));return n?new Lt([p,n]):p}return n||ut};Z.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Z)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0};Z.prototype.locals=function(t){return Is(this.localsInner(t))};Z.prototype.localsInner=function(t){if(this==ut)return mn;if(t.inlineContent||!this.local.some(Kt.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Kt||e.push(this.local[n]);return e};var ut=new Z;Z.empty=ut;Z.removeOverlap=Is;var Lt=function(t){this.members=t};Lt.prototype.map=function(t,e){var n=this.members.map(function(o){return o.map(t,e,ze)});return Lt.from(n)};Lt.prototype.forChild=function(t,e){if(e.isLeaf)return Z.empty;for(var n=[],o=0;o<this.members.length;o++){var s=this.members[o].forChild(t,e);s!=ut&&(s instanceof Lt?n=n.concat(s.members):n.push(s))}return Lt.from(n)};Lt.prototype.eq=function(t){if(!(t instanceof Lt)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0};Lt.prototype.locals=function(t){for(var e,n=!0,o=0;o<this.members.length;o++){var s=this.members[o].localsInner(t);if(!!s.length)if(!e)e=s;else{n&&(e=e.slice(),n=!1);for(var i=0;i<s.length;i++)e.push(s[i])}}return e?Is(n?e:e.sort(Ve)):mn};Lt.from=function(t){switch(t.length){case 0:return ut;case 1:return t[0];default:return new Lt(t)}};function vp(r,t,e,n,o,s,i){for(var a=r.slice(),c=function(K,kt,_,W){for(var I=0;I<a.length;I+=3){var R=a[I+1],$t=void 0;R==-1||K>R+s||(kt>=a[I]+s?a[I+1]=-1:_>=o&&($t=W-_-(kt-K))&&(a[I]+=$t,a[I+1]+=$t))}},u=0;u<e.maps.length;u++)e.maps[u].forEach(c);for(var l=!1,f=0;f<a.length;f+=3)if(a[f+1]==-1){var p=e.map(r[f]+s),h=p-o;if(h<0||h>=n.content.size){l=!0;continue}var d=e.map(r[f+1]+s,-1),m=d-o,v=n.content.findIndex(h),y=v.index,g=v.offset,D=n.maybeChild(y);if(D&&g==h&&g+D.nodeSize==m){var b=a[f+2].mapInner(e,D,p+1,r[f]+s+1,i);b!=ut?(a[f]=h,a[f+1]=m,a[f+2]=b):(a[f+1]=-2,l=!0)}else l=!0}if(l){var A=yp(a,r,t||[],e,o,s,i),k=to(A,n,0,i);t=k.local;for(var M=0;M<a.length;M+=3)a[M+1]<0&&(a.splice(M,3),M-=3);for(var F=0,q=0;F<k.children.length;F+=3){for(var O=k.children[F];q<a.length&&a[q]<O;)q+=3;a.splice(q,0,k.children[F],k.children[F+1],k.children[F+2])}}return new Z(t&&t.sort(Ve),a)}function ou(r,t){if(!t||!r.length)return r;for(var e=[],n=0;n<r.length;n++){var o=r[n];e.push(new nt(o.from+t,o.to+t,o.type))}return e}function yp(r,t,e,n,o,s,i){function a(u,l){for(var f=0;f<u.local.length;f++){var p=u.local[f].map(n,o,l);p?e.push(p):i.onRemove&&i.onRemove(u.local[f].spec)}for(var h=0;h<u.children.length;h+=3)a(u.children[h+2],u.children[h]+l+1)}for(var c=0;c<r.length;c+=3)r[c+1]==-1&&a(r[c+2],t[c]+s+1);return e}function su(r,t,e){if(t.isLeaf)return null;for(var n=e+t.nodeSize,o=null,s=0,i=void 0;s<r.length;s++)(i=r[s])&&i.from>e&&i.to<n&&((o||(o=[])).push(i),r[s]=null);return o}function iu(r){for(var t=[],e=0;e<r.length;e++)r[e]!=null&&t.push(r[e]);return t}function to(r,t,e,n){var o=[],s=!1;t.forEach(function(c,u){var l=su(r,c,u+e);if(l){s=!0;var f=to(l,c,e+u+1,n);f!=ut&&o.push(u,u+c.nodeSize,f)}});for(var i=ou(s?iu(r):r,-e).sort(Ve),a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(n.onRemove&&n.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new Z(i,o):ut}function Ve(r,t){return r.from-t.from||r.to-t.to}function Is(r){for(var t=r,e=0;e<t.length-1;e++){var n=t[e];if(n.from!=n.to)for(var o=e+1;o<t.length;o++){var s=t[o];if(s.from==n.from){s.to!=n.to&&(t==r&&(t=r.slice()),t[o]=s.copy(s.from,n.to),Ki(t,o+1,s.copy(n.to,s.to)));continue}else{s.from<n.to&&(t==r&&(t=r.slice()),t[e]=n.copy(n.from,s.from),Ki(t,o,n.copy(s.from,n.to)));break}}}return t}function Ki(r,t,e){for(;t<r.length&&Ve(e,r[t])>0;)t++;r.splice(t,0,e)}function Ls(r){var t=[];return r.someProp("decorations",function(e){var n=e(r.state);n&&n!=ut&&t.push(n)}),r.cursorWrapper&&t.push(Z.create(r.state.doc,[r.cursorWrapper.deco])),Lt.from(t)}var et=function(t,e){this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(fu),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=uu(this),this.markCursor=null,this.cursorWrapper=null,cu(this),this.nodeViews=lu(this),this.docView=Ic(this.state.doc,au(this),Ls(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,tp(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},eo={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};eo.props.get=function(){if(this._props.state!=this.state){var r=this._props;this._props={};for(var t in r)this._props[t]=r[t];this._props.state=this.state}return this._props};et.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Os(this),this._props=t,t.plugins&&(t.plugins.forEach(fu),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)};et.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];e.state=this.state;for(var o in t)e[o]=t[o];this.update(e)};et.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)};et.prototype.updateStateInner=function(t,e){var n=this,o=this.state,s=!1,i=!1;if(t.storedMarks&&this.composing&&(ru(this),i=!0),this.state=t,e){var a=lu(this);kp(a,this.nodeViews)&&(this.nodeViews=a,s=!0),Os(this)}this.editable=uu(this),cu(this);var c=Ls(this),u=au(this),l=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,u,c);(f||!t.selection.eq(o.selection))&&(i=!0);var p=l=="preserve"&&i&&this.dom.style.overflowAnchor==null&&pf(this);if(i){this.domObserver.stop();var h=f&&(E.ie||E.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&bp(o.selection,t.selection);if(f){var d=E.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(s||!this.docView.update(t.doc,u,c,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ic(t.doc,u,c,this.dom,this)),d&&!this.trackWrites&&(h=!0)}h||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Lf(this))?we(this,h):(Uc(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),l=="reset")this.dom.scrollTop=0;else if(l=="to selection"){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(v){return v(n)})||(t.selection instanceof P?Si(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),m):Si(this,this.coordsAtPos(t.selection.head,1),m))}else p&&hf(p)};et.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()};et.prototype.updatePluginViews=function(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var e=0;e<this.directPlugins.length;e++){var n=this.directPlugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(var i=0;i<this.pluginViews.length;i++){var a=this.pluginViews[i];a.update&&a.update(this,t)}};et.prototype.someProp=function(t,e){var n=this._props&&this._props[t],o;if(n!=null&&(o=e?e(n):n))return o;for(var s=0;s<this.directPlugins.length;s++){var i=this.directPlugins[s].props[t];if(i!=null&&(o=e?e(i):i))return o}var a=this.state.plugins;if(a)for(var c=0;c<a.length;c++){var u=a[c].props[t];if(u!=null&&(o=e?e(u):u))return o}};et.prototype.hasFocus=function(){return this.root.activeElement==this.dom};et.prototype.focus=function(){this.domObserver.stop(),this.editable&&df(this.dom),we(this),this.domObserver.start()};eo.root.get=function(){var r=this._root;if(r==null){for(var t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t}return r||document};et.prototype.posAtCoords=function(t){return bf(this,t)};et.prototype.coordsAtPos=function(t,e){return e===void 0&&(e=1),Fc(this,t,e)};et.prototype.domAtPos=function(t,e){return e===void 0&&(e=0),this.docView.domFromPos(t,e)};et.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null};et.prototype.posAtDOM=function(t,e,n){n===void 0&&(n=-1);var o=this.docView.posFromDOM(t,e,n);if(o==null)throw new RangeError("DOM position not inside the editor");return o};et.prototype.endOfTextblock=function(t,e){return Af(this,e||this.state,t)};et.prototype.destroy=function(){!this.docView||(ep(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ls(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)};eo.isDestroyed.get=function(){return this.docView==null};et.prototype.dispatchEvent=function(t){return np(this,t)};et.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};Object.defineProperties(et.prototype,eo);function au(r){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(r.editable),t.translate="no",r.someProp("attributes",function(e){if(typeof e=="function"&&(e=e(r.state)),e)for(var n in e)n=="class"&&(t.class+=" "+e[n]),n=="style"?t.style=(t.style?t.style+";":"")+e[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(e[n]))}),[nt.node(0,r.state.doc.content.size,t)]}function cu(r){if(r.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),r.cursorWrapper={dom:t,deco:nt.widget(r.state.selection.head,t,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function uu(r){return!r.someProp("editable",function(t){return t(r.state)===!1})}function bp(r,t){var e=Math.min(r.$anchor.sharedDepth(r.head),t.$anchor.sharedDepth(t.head));return r.$anchor.start(e)!=t.$anchor.start(e)}function lu(r){var t={};return r.someProp("nodeViews",function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}),t}function kp(r,t){var e=0,n=0;for(var o in r){if(r[o]!=t[o])return!0;e++}for(var s in t)n++;return e!=n}function fu(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var xe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},gn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Wi=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Dp=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),Cp=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),Gi=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),xp=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ap=Wi&&(Gi||+Wi[1]<57)||Cp&&Gi;for(var st=0;st<10;st++)xe[48+st]=xe[96+st]=String(st);for(var st=1;st<=24;st++)xe[st+111]="F"+st;for(var st=65;st<=90;st++)xe[st]=String.fromCharCode(st+32),gn[st]=String.fromCharCode(st);for(var So in xe)gn.hasOwnProperty(So)||(gn[So]=xe[So]);function Ep(r){var t=Ap&&(r.ctrlKey||r.altKey||r.metaKey)||(Dp||xp)&&r.shiftKey&&r.key&&r.key.length==1,e=!t&&r.key||(r.shiftKey?gn:xe)[r.keyCode]||r.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}var _p=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function wp(r){var t=r.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");for(var n,o,s,i,a=0;a<t.length-1;a++){var c=t[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))_p?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(e="Alt-"+e),o&&(e="Ctrl-"+e),i&&(e="Meta-"+e),s&&(e="Shift-"+e),e}function Sp(r){var t=Object.create(null);for(var e in r)t[wp(e)]=r[e];return t}function Mo(r,t,e){return t.altKey&&(r="Alt-"+r),t.ctrlKey&&(r="Ctrl-"+r),t.metaKey&&(r="Meta-"+r),e!==!1&&t.shiftKey&&(r="Shift-"+r),r}function Mp(r){return new bt({props:{handleKeyDown:pu(r)}})}function pu(r){var t=Sp(r);return function(e,n){var o=Ep(n),s=o.length==1&&o!=" ",i,a=t[Mo(o,n,!s)];if(a&&a(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=xe[n.keyCode])&&i!=o){var c=t[Mo(i,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}else if(s&&n.shiftKey){var u=t[Mo(o,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}function Tp(r){return Object.prototype.toString.call(r).slice(8,-1)}function To(r){return Tp(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function ro(r,t){const e=x({},r);return To(r)&&To(t)&&Object.keys(t).forEach(n=>{To(t[n])?n in r?e[n]=ro(r[n],t[n]):Object.assign(e,{[n]:t[n]}):Object.assign(e,{[n]:t[n]})}),e}function hu(r){return typeof r=="function"}function z(r,t=void 0,...e){return hu(r)?t?r.bind(t)(...e):r(...e):r}function T(r,t,e){return r.config[t]===void 0&&r.parent?T(r.parent,t,e):typeof r.config[t]=="function"?r.config[t].bind(Et(x({},e),{parent:r.parent?T(r.parent,t,e):null})):r.config[t]}class Ot{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=x(x({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=z(T(this,"addOptions",{name:this.name}))),this.storage=z(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ot(t)}configure(t={}){const e=this.extend();return e.options=ro(this.options,t),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Ot(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=z(T(e,"addOptions",{name:e.name})),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}}function du(r,t,e){const{from:n,to:o}=t,{blockSeparator:s=`

`,textSerializers:i={}}=e||{};let a="",c=!0;return r.nodesBetween(n,o,(u,l,f,p)=>{var h;const d=i==null?void 0:i[u.type.name];d?(u.isBlock&&!c&&(a+=s,c=!0),a+=d({node:u,pos:l,parent:f,index:p})):u.isText?(a+=(h=u==null?void 0:u.text)===null||h===void 0?void 0:h.slice(Math.max(n,l)-l,o-l),c=!1):u.isBlock&&!c&&(a+=s,c=!0)}),a}function mu(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}const Op=Ot.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new bt({key:new Nt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:t,schema:e}=r,{doc:n,selection:o}=t,{ranges:s}=o,i=Math.min(...s.map(l=>l.$from.pos)),a=Math.max(...s.map(l=>l.$to.pos)),c=mu(e);return du(n,{from:i,to:a},{textSerializers:c})}}})]}}),Fp=()=>({editor:r,view:t})=>(requestAnimationFrame(()=>{r.isDestroyed||t.dom.blur()}),!0);var Np=Object.freeze({__proto__:null,blur:Fp});const Bp=(r=!1)=>({commands:t})=>t.setContent("",r);var Rp=Object.freeze({__proto__:null,clearContent:Bp});const Ip=()=>({state:r,tr:t,dispatch:e})=>{const{selection:n}=t,{ranges:o}=n;return e&&o.forEach(({$from:s,$to:i})=>{r.doc.nodesBetween(s.pos,i.pos,(a,c)=>{if(a.type.isText)return;const{doc:u,mapping:l}=t,f=u.resolve(l.map(c)),p=u.resolve(l.map(c+a.nodeSize)),h=f.blockRange(p);if(!h)return;const d=pr(h);if(a.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());t.setNodeMarkup(h.start,m)}(d||d===0)&&t.lift(h,d)})}),!0};var Lp=Object.freeze({__proto__:null,clearNodes:Ip});const Pp=r=>t=>r(t);var qp=Object.freeze({__proto__:null,command:Pp});const zp=()=>({state:r,dispatch:t})=>$l(r,t);var Vp=Object.freeze({__proto__:null,createParagraphNear:zp});function ot(r,t){if(typeof r=="string"){if(!t.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return t.nodes[r]}return r}const Hp=r=>({tr:t,state:e,dispatch:n})=>{const o=ot(r,e.schema),s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(n){const c=s.before(i),u=s.after(i);t.delete(c,u).scrollIntoView()}return!0}return!1};var jp=Object.freeze({__proto__:null,deleteNode:Hp});const Up=r=>({tr:t,dispatch:e})=>{const{from:n,to:o}=r;return e&&t.delete(n,o),!0};var Jp=Object.freeze({__proto__:null,deleteRange:Up});const Kp=()=>({state:r,dispatch:t})=>Vl(r,t);var Wp=Object.freeze({__proto__:null,deleteSelection:Kp});const Gp=()=>({commands:r})=>r.keyboardShortcut("Enter");var $p=Object.freeze({__proto__:null,enter:Gp});const Zp=()=>({state:r,dispatch:t})=>Gl(r,t);var Yp=Object.freeze({__proto__:null,exitCode:Zp});function Se(r,t){if(typeof r=="string"){if(!t.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return t.marks[r]}return r}function Ps(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function vn(r,t,e={strict:!0}){const n=Object.keys(t);return n.length?n.every(o=>e.strict?t[o]===r[o]:Ps(t[o])?t[o].test(r[o]):t[o]===r[o]):!0}function cs(r,t,e={}){return r.find(n=>n.type===t&&vn(n.attrs,e))}function Qp(r,t,e={}){return!!cs(r,t,e)}function qs(r,t,e={}){if(!r||!t)return;const n=r.parent.childAfter(r.parentOffset);if(!n.node)return;const o=cs(n.node.marks,t,e);if(!o)return;let s=r.index(),i=r.start()+n.offset,a=s+1,c=i+n.node.nodeSize;for(cs(n.node.marks,t,e);s>0&&o.isInSet(r.parent.child(s-1).marks);)s-=1,i-=r.parent.child(s).nodeSize;for(;a<r.parent.childCount&&Qp(r.parent.child(a).marks,t,e);)c+=r.parent.child(a).nodeSize,a+=1;return{from:i,to:c}}const Xp=(r,t={})=>({tr:e,state:n,dispatch:o})=>{const s=Se(r,n.schema),{doc:i,selection:a}=e,{$from:c,from:u,to:l}=a;if(o){const f=qs(c,s,t);if(f&&f.from<=u&&f.to>=l){const p=G.create(i,f.from,f.to);e.setSelection(p)}}return!0};var th=Object.freeze({__proto__:null,extendMarkRange:Xp});const eh=r=>t=>{const e=typeof r=="function"?r(t):r;for(let n=0;n<e.length;n+=1)if(e[n](t))return!0;return!1};var rh=Object.freeze({__proto__:null,first:eh});function nh(r){var t;return((t=r.constructor)===null||t===void 0?void 0:t.toString().substring(0,5))==="class"}function gu(r){return r&&typeof r=="object"&&!Array.isArray(r)&&!nh(r)}function oh(r){return gu(r)&&r instanceof G}function sh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Hr(r=0,t=0,e=0){return Math.min(Math.max(r,t),e)}function vu(r,t=null){if(!t)return null;if(t==="start"||t===!0)return B.atStart(r);if(t==="end")return B.atEnd(r);if(t==="all")return G.create(r,0,r.content.size);const e=B.atStart(r).from,n=B.atEnd(r).to,o=Hr(t,e,n),s=Hr(t,e,n);return G.create(r,o,s)}const ih=(r=null,t)=>({editor:e,view:n,tr:o,dispatch:s})=>{t=x({scrollIntoView:!0},t);const i=()=>{sh()&&n.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(n.focus(),t!=null&&t.scrollIntoView&&e.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(s&&r===null&&!oh(e.state.selection))return i(),!0;const a=vu(e.state.doc,r)||e.state.selection,c=e.state.selection.eq(a);return s&&(c||o.setSelection(a),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0};var ah=Object.freeze({__proto__:null,focus:ih});const ch=(r,t)=>e=>r.every((n,o)=>t(n,Et(x({},e),{index:o})));var uh=Object.freeze({__proto__:null,forEach:ch});const lh=(r,t)=>({tr:e,commands:n})=>n.insertContentAt({from:e.selection.from,to:e.selection.to},r,t);var fh=Object.freeze({__proto__:null,insertContent:lh});function $i(r){const t=`<body>${r}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function yn(r,t,e){if(e=x({slice:!0,parseOptions:{}},e),typeof r=="object"&&r!==null)try{return Array.isArray(r)?C.fromArray(r.map(n=>t.nodeFromJSON(n))):t.nodeFromJSON(r)}catch(n){return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",n),yn("",t,e)}if(typeof r=="string"){const n=Ut.fromSchema(t);return e.slice?n.parseSlice($i(r),e.parseOptions).content:n.parse($i(r),e.parseOptions)}return yn("",t,e)}function ph(r,t,e){const n=r.steps.length-1;if(n<t)return;const o=r.steps[n];if(!(o instanceof he||o instanceof wt))return;const s=r.mapping.maps[n];let i=0;s.forEach((a,c,u,l)=>{i===0&&(i=l)}),r.setSelection(B.near(r.doc.resolve(i),e))}const hh=r=>r.toString().startsWith("<"),dh=(r,t,e)=>({tr:n,dispatch:o,editor:s})=>{if(o){e=x({parseOptions:{},updateSelection:!0},e);const i=yn(t,s.schema,{parseOptions:x({preserveWhitespace:"full"},e.parseOptions)});if(i.toString()==="<>")return!0;let{from:a,to:c}=typeof r=="number"?{from:r,to:r}:r,u=!0;if((hh(i)?i:[i]).forEach(f=>{f.check(),u=u?f.isBlock:!1}),a===c&&u){const{parent:f}=n.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,c+=1)}n.replaceWith(a,c,i),e.updateSelection&&ph(n,n.steps.length-1,-1)}return!0};var mh=Object.freeze({__proto__:null,insertContentAt:dh});const gh=()=>({state:r,dispatch:t})=>Hl(r,t);var vh=Object.freeze({__proto__:null,joinBackward:gh});const yh=()=>({state:r,dispatch:t})=>Ul(r,t);var bh=Object.freeze({__proto__:null,joinForward:yh});const kh=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1;function Dh(r){const t=r.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let n,o,s,i;for(let a=0;a<t.length-1;a+=1){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))kh?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(e=`Alt-${e}`),o&&(e=`Ctrl-${e}`),i&&(e=`Meta-${e}`),s&&(e=`Shift-${e}`),e}const Ch=r=>({editor:t,view:e,tr:n,dispatch:o})=>{const s=Dh(r).split(/-(?!$)/),i=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{e.someProp("handleKeyDown",u=>u(e,a))});return c==null||c.steps.forEach(u=>{const l=u.map(n.mapping);l&&o&&n.maybeStep(l)}),!0};var xh=Object.freeze({__proto__:null,keyboardShortcut:Ch});function jr(r,t,e={}){const{from:n,to:o,empty:s}=r.selection,i=t?ot(t,r.schema):null,a=[];r.doc.nodesBetween(n,o,(f,p)=>{if(f.isText)return;const h=Math.max(n,p),d=Math.min(o,p+f.nodeSize);a.push({node:f,from:h,to:d})});const c=o-n,u=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>vn(f.node.attrs,e,{strict:!1}));return s?!!u.length:u.reduce((f,p)=>f+p.to-p.from,0)>=c}const Ah=(r,t={})=>({state:e,dispatch:n})=>{const o=ot(r,e.schema);return jr(e,o,t)?Kl(e,n):!1};var Eh=Object.freeze({__proto__:null,lift:Ah});const _h=()=>({state:r,dispatch:t})=>Zl(r,t);var wh=Object.freeze({__proto__:null,liftEmptyBlock:_h});const Sh=r=>({state:t,dispatch:e})=>{const n=ot(r,t.schema);return rf(n)(t,e)};var Mh=Object.freeze({__proto__:null,liftListItem:Sh});const Th=()=>({state:r,dispatch:t})=>Wl(r,t);var Oh=Object.freeze({__proto__:null,newlineInCode:Th});function no(r,t){return t.nodes[r]?"node":t.marks[r]?"mark":null}function Zi(r,t){const e=typeof t=="string"?[t]:t;return Object.keys(r).reduce((n,o)=>(e.includes(o)||(n[o]=r[o]),n),{})}const Fh=(r,t)=>({tr:e,state:n,dispatch:o})=>{let s=null,i=null;const a=no(typeof r=="string"?r:r.name,n.schema);return a?(a==="node"&&(s=ot(r,n.schema)),a==="mark"&&(i=Se(r,n.schema)),o&&e.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,l)=>{s&&s===u.type&&e.setNodeMarkup(l,void 0,Zi(u.attrs,t)),i&&u.marks.length&&u.marks.forEach(f=>{i===f.type&&e.addMark(l,l+u.nodeSize,i.create(Zi(f.attrs,t)))})})}),!0):!1};var Nh=Object.freeze({__proto__:null,resetAttributes:Fh});const Bh=()=>({tr:r,dispatch:t})=>(t&&r.scrollIntoView(),!0);var Rh=Object.freeze({__proto__:null,scrollIntoView:Bh});const Ih=()=>({tr:r,commands:t})=>t.setTextSelection({from:0,to:r.doc.content.size});var Lh=Object.freeze({__proto__:null,selectAll:Ih});const Ph=()=>({state:r,dispatch:t})=>jl(r,t);var qh=Object.freeze({__proto__:null,selectNodeBackward:Ph});const zh=()=>({state:r,dispatch:t})=>Jl(r,t);var Vh=Object.freeze({__proto__:null,selectNodeForward:zh});const Hh=()=>({state:r,dispatch:t})=>Yl(r,t);var jh=Object.freeze({__proto__:null,selectParentNode:Hh});function yu(r,t,e={}){return yn(r,t,{slice:!1,parseOptions:e})}const Uh=(r,t=!1,e={})=>({tr:n,editor:o,dispatch:s})=>{const{doc:i}=n,a=yu(r,o.schema,e),c=G.create(i,0,i.content.size);return s&&n.setSelection(c).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0};var Jh=Object.freeze({__proto__:null,setContent:Uh});function bu(r,t){const e=Se(t,r.schema),{from:n,to:o,empty:s}=r.selection,i=[];s?(r.storedMarks&&i.push(...r.storedMarks),i.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,o,c=>{i.push(...c.marks)});const a=i.find(c=>c.type.name===e.name);return a?x({},a.attrs):{}}const Kh=(r,t={})=>({tr:e,state:n,dispatch:o})=>{const{selection:s}=e,{empty:i,ranges:a}=s,c=Se(r,n.schema);if(o)if(i){const u=bu(n,c);e.addStoredMark(c.create(x(x({},u),t)))}else a.forEach(u=>{const l=u.$from.pos,f=u.$to.pos;n.doc.nodesBetween(l,f,(p,h)=>{const d=Math.max(h,l),m=Math.min(h+p.nodeSize,f);p.marks.find(y=>y.type===c)?p.marks.forEach(y=>{c===y.type&&e.addMark(d,m,c.create(x(x({},y.attrs),t)))}):e.addMark(d,m,c.create(t))})});return!0};var Wh=Object.freeze({__proto__:null,setMark:Kh});const Gh=(r,t)=>({tr:e})=>(e.setMeta(r,t),!0);var $h=Object.freeze({__proto__:null,setMeta:Gh});const Zh=(r,t={})=>({state:e,dispatch:n,chain:o})=>{const s=ot(r,e.schema);return s.isTextblock?o().command(({commands:i})=>Ai(s,t)(e)?!0:i.clearNodes()).command(({state:i})=>Ai(s,t)(i,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)};var Yh=Object.freeze({__proto__:null,setNode:Zh});const Qh=r=>({tr:t,dispatch:e})=>{if(e){const{doc:n}=t,o=B.atStart(n).from,s=B.atEnd(n).to,i=Hr(r,o,s),a=P.create(n,i);t.setSelection(a)}return!0};var Xh=Object.freeze({__proto__:null,setNodeSelection:Qh});const td=r=>({tr:t,dispatch:e})=>{if(e){const{doc:n}=t,{from:o,to:s}=typeof r=="number"?{from:r,to:r}:r,i=B.atStart(n).from,a=B.atEnd(n).to,c=Hr(o,i,a),u=Hr(s,i,a),l=G.create(n,c,u);t.setSelection(l)}return!0};var ed=Object.freeze({__proto__:null,setTextSelection:td});const rd=r=>({state:t,dispatch:e})=>{const n=ot(r,t.schema);return sf(n)(t,e)};var nd=Object.freeze({__proto__:null,sinkListItem:rd});function sn(r,t,e){return Object.fromEntries(Object.entries(e).filter(([n])=>{const o=r.find(s=>s.type===t&&s.name===n);return o?o.attribute.keepOnSplit:!1}))}function od(r){for(let t=0;t<r.edgeCount;t+=1){const{type:e}=r.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function Yi(r,t){const e=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(e){const n=e.filter(o=>t==null?void 0:t.includes(o.type.name));r.tr.ensureMarks(n)}}const sd=({keepMarks:r=!0}={})=>({tr:t,state:e,dispatch:n,editor:o})=>{const{selection:s,doc:i}=t,{$from:a,$to:c}=s,u=o.extensionManager.attributes,l=sn(u,a.node().type.name,a.node().attrs);if(s instanceof P&&s.node.isBlock)return!a.parentOffset||!Xe(i,a.pos)?!1:(n&&(r&&Yi(e,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(n){const f=c.parentOffset===c.parent.content.size;s instanceof G&&t.deleteSelection();const p=a.depth===0?void 0:od(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&p?[{type:p,attrs:l}]:void 0,d=Xe(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!d&&Xe(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(d=!0,h=p?[{type:p,attrs:l}]:void 0),d&&(t.split(t.mapping.map(a.pos),1,h),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const m=t.mapping.map(a.before()),v=t.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}r&&Yi(e,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0};var id=Object.freeze({__proto__:null,splitBlock:sd});const ad=r=>({tr:t,state:e,dispatch:n,editor:o})=>{var s;const i=ot(r,e.schema),{$from:a,$to:c}=e.selection,u=e.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const l=a.node(-1);if(l.type!==i)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(n){let v=C.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let M=a.depth-y;M>=a.depth-3;M-=1)v=C.from(a.node(M).copy(v));const g=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,D=sn(f,a.node().type.name,a.node().attrs),b=((s=i.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(D))||void 0;v=v.append(C.from(i.createAndFill(null,b)||void 0));const A=a.before(a.depth-(y-1));t.replace(A,a.after(-g),new S(v,4-y,0));let k=-1;t.doc.nodesBetween(A,t.doc.content.size,(M,F)=>{if(k>-1)return!1;M.isTextblock&&M.content.size===0&&(k=F+1)}),k>-1&&t.setSelection(G.near(t.doc.resolve(k))),t.scrollIntoView()}return!0}const p=c.pos===a.end()?l.contentMatchAt(0).defaultType:null,h=sn(f,l.type.name,l.attrs),d=sn(f,a.node().type.name,a.node().attrs);t.delete(a.pos,c.pos);const m=p?[{type:i,attrs:h},{type:p,attrs:d}]:[{type:i,attrs:h}];return Xe(t.doc,a.pos,2)?(n&&t.split(a.pos,2,m).scrollIntoView(),!0):!1};var cd=Object.freeze({__proto__:null,splitListItem:ad});function ud(r,t){for(let e=r.depth;e>0;e-=1){const n=r.node(e);if(t(n))return{pos:e>0?r.before(e):0,start:r.start(e),depth:e,node:n}}}function zs(r){return t=>ud(t.$from,r)}function oo(r){const t=r.filter(o=>o.type==="extension"),e=r.filter(o=>o.type==="node"),n=r.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:n}}function Qi(r,t){const{nodeExtensions:e}=oo(t),n=e.find(i=>i.name===r);if(!n)return!1;const o={name:n.name,options:n.options,storage:n.storage},s=z(T(n,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}const Xi=(r,t)=>{const e=zs(i=>i.type===t)(r.selection);if(!e)return!0;const n=r.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(n===void 0)return!0;const o=r.doc.nodeAt(n);return e.node.type===(o==null?void 0:o.type)&&Jr(r.doc,e.pos)&&r.join(e.pos),!0},ta=(r,t)=>{const e=zs(i=>i.type===t)(r.selection);if(!e)return!0;const n=r.doc.resolve(e.start).after(e.depth);if(n===void 0)return!0;const o=r.doc.nodeAt(n);return e.node.type===(o==null?void 0:o.type)&&Jr(r.doc,n)&&r.join(n),!0},ld=(r,t)=>({editor:e,tr:n,state:o,dispatch:s,chain:i,commands:a,can:c})=>{const{extensions:u}=e.extensionManager,l=ot(r,o.schema),f=ot(t,o.schema),{selection:p}=o,{$from:h,$to:d}=p,m=h.blockRange(d);if(!m)return!1;const v=zs(y=>Qi(y.type.name,u))(p);if(m.depth>=1&&v&&m.depth-v.depth<=1){if(v.node.type===l)return a.liftListItem(f);if(Qi(v.node.type.name,u)&&l.validContent(v.node.content)&&s)return i().command(()=>(n.setNodeMarkup(v.pos,l),!0)).command(()=>Xi(n,l)).command(()=>ta(n,l)).run()}return i().command(()=>c().wrapInList(l)?!0:a.clearNodes()).wrapInList(l).command(()=>Xi(n,l)).command(()=>ta(n,l)).run()};var fd=Object.freeze({__proto__:null,toggleList:ld});function us(r,t,e={}){const{empty:n,ranges:o}=r.selection,s=t?Se(t,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>vn(f.attrs,e,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:f,$to:p})=>{const h=f.pos,d=p.pos;r.doc.nodesBetween(h,d,(m,v)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(h,v),g=Math.min(d,v+m.nodeSize);i+=g-y,a.push(...m.marks.map(b=>({mark:b,from:y,to:g})))})}),i===0)return!1;const c=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>vn(f.mark.attrs,e,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),u=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,p)=>f+p.to-p.from,0);return(c>0?c+u:c)>=i}const pd=(r,t={},e={})=>({state:n,commands:o})=>{const{extendEmptyMarkRange:s=!1}=e,i=Se(r,n.schema);return us(n,i,t)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,t)};var hd=Object.freeze({__proto__:null,toggleMark:pd});const dd=(r,t,e={})=>({state:n,commands:o})=>{const s=ot(r,n.schema),i=ot(t,n.schema);return jr(n,s,e)?o.setNode(i):o.setNode(s,e)};var md=Object.freeze({__proto__:null,toggleNode:dd});const gd=(r,t={})=>({state:e,commands:n})=>{const o=ot(r,e.schema);return jr(e,o,t)?n.lift(o):n.wrapIn(o,t)};var vd=Object.freeze({__proto__:null,toggleWrap:gd});const yd=()=>({state:r,dispatch:t})=>{const e=r.plugins;for(let n=0;n<e.length;n+=1){const o=e[n];let s;if(o.spec.isInputRules&&(s=o.getState(r))){if(t){const i=r.tr,a=s.transform;for(let c=a.steps.length-1;c>=0;c-=1)i.step(a.steps[c].invert(a.docs[c]));if(s.text){const c=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,r.schema.text(s.text,c))}else i.delete(s.from,s.to)}return!0}}return!1};var bd=Object.freeze({__proto__:null,undoInputRule:yd});const kd=()=>({tr:r,dispatch:t})=>{const{selection:e}=r,{empty:n,ranges:o}=e;return n||t&&o.forEach(s=>{r.removeMark(s.$from.pos,s.$to.pos)}),!0};var Dd=Object.freeze({__proto__:null,unsetAllMarks:kd});const Cd=(r,t={})=>({tr:e,state:n,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=e,c=Se(r,n.schema),{$from:u,empty:l,ranges:f}=a;if(!o)return!0;if(l&&i){let{from:p,to:h}=a;const d=(s=u.marks().find(v=>v.type===c))===null||s===void 0?void 0:s.attrs,m=qs(u,c,d);m&&(p=m.from,h=m.to),e.removeMark(p,h,c)}else f.forEach(p=>{e.removeMark(p.$from.pos,p.$to.pos,c)});return e.removeStoredMark(c),!0};var xd=Object.freeze({__proto__:null,unsetMark:Cd});const Ad=(r,t={})=>({tr:e,state:n,dispatch:o})=>{let s=null,i=null;const a=no(typeof r=="string"?r:r.name,n.schema);return a?(a==="node"&&(s=ot(r,n.schema)),a==="mark"&&(i=Se(r,n.schema)),o&&e.selection.ranges.forEach(c=>{const u=c.$from.pos,l=c.$to.pos;n.doc.nodesBetween(u,l,(f,p)=>{s&&s===f.type&&e.setNodeMarkup(p,void 0,x(x({},f.attrs),t)),i&&f.marks.length&&f.marks.forEach(h=>{if(i===h.type){const d=Math.max(p,u),m=Math.min(p+f.nodeSize,l);e.addMark(d,m,i.create(x(x({},h.attrs),t)))}})})}),!0):!1};var Ed=Object.freeze({__proto__:null,updateAttributes:Ad});const _d=(r,t={})=>({state:e,dispatch:n})=>{const o=ot(r,e.schema);return Xl(o,t)(e,n)};var wd=Object.freeze({__proto__:null,wrapIn:_d});const Sd=(r,t={})=>({state:e,dispatch:n})=>{const o=ot(r,e.schema);return tf(o,t)(e,n)};var Md=Object.freeze({__proto__:null,wrapInList:Sd});const Td=Ot.create({name:"commands",addCommands(){return x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x(x({},Np),Rp),Lp),qp),Vp),jp),Jp),Wp),$p),Yp),th),rh),ah),uh),fh),mh),vh),bh),xh),Eh),wh),Mh),Oh),Nh),Rh),Lh),qh),Vh),jh),Jh),Wh),$h),Yh),Xh),ed),nd),id),cd),fd),hd),md),vd),bd),Dd),xd),Ed),wd),Md)}}),Od=Ot.create({name:"editable",addProseMirrorPlugins(){return[new bt({key:new Nt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Fd=Ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new bt({key:new Nt("focusEvents"),props:{handleDOMEvents:{focus:(t,e)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(n),!1},blur:(t,e)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(n),!1}}}})]}});function so(r){const{state:t,transaction:e}=r;let{selection:n}=e,{doc:o}=e,{storedMarks:s}=e;return Et(x({},t),{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return n},get doc(){return o},get tr(){return n=e.selection,o=e.doc,s=e.storedMarks,e}})}class io{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:o}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...l)=>{const f=c(...l)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:o,state:s}=this,{view:i}=o,a=[],c=!!t,u=t||s.tr,l=()=>(!c&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(u),a.every(p=>p===!0)),f=Et(x({},Object.fromEntries(Object.entries(n).map(([p,h])=>[p,(...m)=>{const v=this.buildProps(u,e),y=h(...m)(v);return a.push(y),f}]))),{run:l});return f}createCan(t){const{rawCommands:e,state:n}=this,o=void 0,s=t||n.tr,i=this.buildProps(s,o),a=Object.fromEntries(Object.entries(e).map(([c,u])=>[c,(...l)=>u(...l)(Et(x({},i),{dispatch:o}))]));return Et(x({},a),{chain:()=>this.createChain(s,o)})}buildProps(t,e=!0){const{rawCommands:n,editor:o,state:s}=this,{view:i}=o;s.storedMarks&&t.setStoredMarks(s.storedMarks);const a={tr:t,editor:o,view:i,state:so({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...l)=>u(...l)(a)]))}};return a}}const Nd=Ot.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:n})=>{const{selection:o,doc:s}=n,{empty:i,$anchor:a}=o,{pos:c,parent:u}=a,l=B.atStart(s).from===c;return!i||!l||!u.type.isTextblock||u.textContent.length?!1:e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.joinForward(),()=>e.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()}},addProseMirrorPlugins(){return[new bt({key:new Nt("clearDocument"),appendTransaction:(r,t,e)=>{if(!(r.some(d=>d.docChanged)&&!t.doc.eq(e.doc)))return;const{empty:o,from:s,to:i}=t.selection,a=B.atStart(t.doc).from,c=B.atEnd(t.doc).to,u=s===a&&i===c,l=e.doc.textBetween(0,e.doc.content.size," "," ").length===0;if(o||!u||!l)return;const f=e.tr,p=so({state:e,transaction:f}),{commands:h}=new io({editor:this.editor,state:p});if(h.clearNodes(),!!f.steps.length)return f}})]}}),Bd=Ot.create({name:"tabindex",addProseMirrorPlugins(){return[new bt({key:new Nt("tabindex"),props:{attributes:{tabindex:"0"}}})]}});var Rd=Object.freeze({__proto__:null,ClipboardTextSerializer:Op,Commands:Td,Editable:Od,FocusEvents:Fd,Keymap:Nd,Tabindex:Bd});function Id(r,t){const e=ot(t,r.schema),{from:n,to:o}=r.selection,s=[];r.doc.nodesBetween(n,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===e.name);return i?x({},i.attrs):{}}function ku(r,t){const e=no(typeof t=="string"?t:t.name,r.schema);return e==="node"?Id(r,t):e==="mark"?bu(r,t):{}}function Ld(r,t,e={}){if(!t)return jr(r,null,e)||us(r,null,e);const n=no(t,r.schema);return n==="node"?jr(r,t,e):n==="mark"?us(r,t,e):!1}function Pd(r,t){const e=ct.fromSchema(t).serializeFragment(r),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(e),o.innerHTML}function qd(r,t){const e={from:0,to:r.content.size};return du(r,e,t)}function zd(r){var t;const e=(t=r.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),n=r.toJSON();return JSON.stringify(e)===JSON.stringify(n)}function Vd(r){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const e=document.createElement("style");return e.setAttribute("data-tiptap-style",""),e.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(e),e}class ao{constructor(t){this.find=t.find,this.handler=t.handler}}const Hd=(r,t)=>{if(Ps(t))return t.exec(r);const e=t(r);if(!e)return null;const n=[];return n.push(e.text),n.index=e.index,n.input=r,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(e.replaceWith)),n};function Oo(r){var t;const{editor:e,from:n,to:o,text:s,rules:i,plugin:a}=r,{view:c}=e;if(c.composing)return!1;const u=c.state.doc.resolve(n);if(u.parent.type.spec.code||!!(!((t=u.nodeBefore||u.nodeAfter)===null||t===void 0)&&t.marks.find(h=>h.type.spec.code)))return!1;let l=!1;const f=500,p=u.parent.textBetween(Math.max(0,u.parentOffset-f),u.parentOffset,void 0," ")+s;return i.forEach(h=>{if(l)return;const d=Hd(p,h.find);if(!d)return;const m=c.state.tr,v=so({state:c.state,transaction:m}),y={from:n-(d[0].length-s.length),to:o},{commands:g,chain:D,can:b}=new io({editor:e,state:v});h.handler({state:v,range:y,match:d,commands:g,chain:D,can:b})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:n,to:o,text:s}),c.dispatch(m),l=!0)}),l}function jd(r){const{editor:t,rules:e}=r,n=new bt({state:{init(){return null},apply(o,s){const i=o.getMeta(this);return i||(o.selectionSet||o.docChanged?null:s)}},props:{handleTextInput(o,s,i,a){return Oo({editor:t,from:s,to:i,text:a,rules:e,plugin:n})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&Oo({editor:t,from:s.pos,to:s.pos,text:"",rules:e,plugin:n})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?Oo({editor:t,from:i.pos,to:i.pos,text:`
`,rules:e,plugin:n}):!1}},isInputRules:!0});return n}function Ud(r){return typeof r=="number"}class Jd{constructor(t){this.find=t.find,this.handler=t.handler}}const Kd=(r,t)=>{if(Ps(t))return[...r.matchAll(t)];const e=t(r);return e?e.map(n=>{const o=[];return o.push(n.text),o.index=n.index,o.input=r,o.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(n.replaceWith)),o}):[]};function Wd(r){const{editor:t,state:e,from:n,to:o,rule:s}=r,{commands:i,chain:a,can:c}=new io({editor:t,state:e}),u=[];return e.doc.nodesBetween(n,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const h=Math.max(n,p),d=Math.min(o,p+f.content.size),m=f.textBetween(h-p,d-p,void 0,"\uFFFC");Kd(m,s.find).forEach(y=>{if(y.index===void 0)return;const g=h+y.index+1,D=g+y[0].length,b={from:e.tr.mapping.map(g),to:e.tr.mapping.map(D)},A=s.handler({state:e,range:b,match:y,commands:i,chain:a,can:c});u.push(A)})}),u.every(f=>f!==null)}function Gd(r){const{editor:t,rules:e}=r;let n=!1;return e.map(s=>new bt({props:{handlePaste:(i,a)=>{var c;const u=(c=a.clipboardData)===null||c===void 0?void 0:c.getData("text/html");return n=!!(u!=null&&u.includes("data-pm-slice")),!1}},appendTransaction:(i,a,c)=>{if(!i[0].getMeta("paste")||n)return;const l=a.doc.content.findDiffStart(c.doc.content),f=a.doc.content.findDiffEnd(c.doc.content);if(!Ud(l)||!f||l===f.b)return;const p=c.tr,h=so({state:c,transaction:p});if(!(!Wd({editor:t,state:h,from:Math.max(l-1,0),to:f.b,rule:s})||!p.steps.length))return p}}))}function Du(r){const t=[],{nodeExtensions:e,markExtensions:n}=oo(r),o=[...e,...n],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return r.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},c=T(i,"addGlobalAttributes",a);if(!c)return;c().forEach(l=>{l.types.forEach(f=>{Object.entries(l.attributes).forEach(([p,h])=>{t.push({type:f,name:p,attribute:x(x({},s),h)})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},c=T(i,"addAttributes",a);if(!c)return;const u=c();Object.entries(u).forEach(([l,f])=>{t.push({type:i.name,name:l,attribute:x(x({},s),f)})})}),t}function At(...r){return r.filter(t=>!!t).reduce((t,e)=>{const n=x({},t);return Object.entries(e).forEach(([o,s])=>{if(!n[o]){n[o]=s;return}o==="class"?n[o]=[n[o],s].join(" "):o==="style"?n[o]=[n[o],s].join("; "):n[o]=s}),n},{})}function ls(r,t){return t.filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(r.attrs)||{}:{[e.name]:r.attrs[e.name]}).reduce((e,n)=>At(e,n),{})}function $d(r={}){return Object.keys(r).length===0&&r.constructor===Object}function Zd(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function ea(r,t){return r.style?r:Et(x({},r),{getAttrs:e=>{const n=r.getAttrs?r.getAttrs(e):r.attrs;if(n===!1)return!1;const o=t.filter(s=>s.attribute.rendered).reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(e):Zd(e.getAttribute(i.name));return gu(a)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${i.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),a==null?s:Et(x({},s),{[i.name]:a})},{});return x(x({},n),o)}})}function ra(r){return Object.fromEntries(Object.entries(r).filter(([t,e])=>t==="attrs"&&$d(e)?!1:e!=null))}function Yd(r){var t;const e=Du(r),{nodeExtensions:n,markExtensions:o}=oo(r),s=(t=n.find(c=>T(c,"topNode")))===null||t===void 0?void 0:t.name,i=Object.fromEntries(n.map(c=>{const u=e.filter(v=>v.type===c.name),l={name:c.name,options:c.options,storage:c.storage},f=r.reduce((v,y)=>{const g=T(y,"extendNodeSchema",l);return x(x({},v),g?g(c):{})},{}),p=ra(Et(x({},f),{content:z(T(c,"content",l)),marks:z(T(c,"marks",l)),group:z(T(c,"group",l)),inline:z(T(c,"inline",l)),atom:z(T(c,"atom",l)),selectable:z(T(c,"selectable",l)),draggable:z(T(c,"draggable",l)),code:z(T(c,"code",l)),defining:z(T(c,"defining",l)),isolating:z(T(c,"isolating",l)),attrs:Object.fromEntries(u.map(v=>{var y;return[v.name,{default:(y=v==null?void 0:v.attribute)===null||y===void 0?void 0:y.default}]}))})),h=z(T(c,"parseHTML",l));h&&(p.parseDOM=h.map(v=>ea(v,u)));const d=T(c,"renderHTML",l);d&&(p.toDOM=v=>d({node:v,HTMLAttributes:ls(v,u)}));const m=T(c,"renderText",l);return m&&(p.toText=m),[c.name,p]})),a=Object.fromEntries(o.map(c=>{const u=e.filter(m=>m.type===c.name),l={name:c.name,options:c.options,storage:c.storage},f=r.reduce((m,v)=>{const y=T(v,"extendMarkSchema",l);return x(x({},m),y?y(c):{})},{}),p=ra(Et(x({},f),{inclusive:z(T(c,"inclusive",l)),excludes:z(T(c,"excludes",l)),group:z(T(c,"group",l)),spanning:z(T(c,"spanning",l)),code:z(T(c,"code",l)),attrs:Object.fromEntries(u.map(m=>{var v;return[m.name,{default:(v=m==null?void 0:m.attribute)===null||v===void 0?void 0:v.default}]}))})),h=z(T(c,"parseHTML",l));h&&(p.parseDOM=h.map(m=>ea(m,u)));const d=T(c,"renderHTML",l);return d&&(p.toDOM=m=>d({mark:m,HTMLAttributes:ls(m,u)})),[c.name,p]}));return new Ee({topNode:s,nodes:i,marks:a})}function Fo(r,t){return t.nodes[r]||t.marks[r]||null}function na(r,t){return Array.isArray(t)?t.some(e=>(typeof e=="string"?e:e.name)===r.name):t}function Qd(r){const t=r.filter((e,n)=>r.indexOf(e)!==n);return[...new Set(t)]}class We{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=We.resolve(t),this.schema=Yd(this.extensions),this.extensions.forEach(n=>{var o;this.editor.extensionStorage[n.name]=n.storage;const s={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Fo(n.name,this.schema)};n.type==="mark"&&((o=z(T(n,"keepOnSplit",s)))!==null&&o!==void 0?o:!0)&&this.splittableMarks.push(n.name);const i=T(n,"onBeforeCreate",s);i&&this.editor.on("beforeCreate",i);const a=T(n,"onCreate",s);a&&this.editor.on("create",a);const c=T(n,"onUpdate",s);c&&this.editor.on("update",c);const u=T(n,"onSelectionUpdate",s);u&&this.editor.on("selectionUpdate",u);const l=T(n,"onTransaction",s);l&&this.editor.on("transaction",l);const f=T(n,"onFocus",s);f&&this.editor.on("focus",f);const p=T(n,"onBlur",s);p&&this.editor.on("blur",p);const h=T(n,"onDestroy",s);h&&this.editor.on("destroy",h)})}static resolve(t){const e=We.sort(We.flatten(t)),n=Qd(e.map(o=>o.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},o=T(e,"addExtensions",n);return o?[e,...this.flatten(o())]:e}).flat(10)}static sort(t){return t.sort((n,o)=>{const s=T(n,"priority")||100,i=T(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Fo(e.name,this.schema)},o=T(e,"addCommands",n);return o?x(x({},t),o()):t},{})}get plugins(){const{editor:t}=this,e=We.sort([...this.extensions].reverse()),n=[],o=[],s=e.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:t,type:Fo(i.name,this.schema)},c=[],u=T(i,"addKeyboardShortcuts",a);if(u){const h=Object.fromEntries(Object.entries(u()).map(([m,v])=>[m,()=>v({editor:t})])),d=Mp(h);c.push(d)}const l=T(i,"addInputRules",a);na(i,t.options.enableInputRules)&&l&&n.push(...l());const f=T(i,"addPasteRules",a);na(i,t.options.enablePasteRules)&&f&&o.push(...f());const p=T(i,"addProseMirrorPlugins",a);if(p){const h=p();c.push(...h)}return c}).flat();return[jd({editor:t,rules:n}),...Gd({editor:t,rules:o}),...s]}get attributes(){return Du(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=oo(this.extensions);return Object.fromEntries(e.filter(n=>!!T(n,"addNodeView")).map(n=>{const o=this.attributes.filter(c=>c.type===n.name),s={name:n.name,options:n.options,storage:n.storage,editor:t,type:ot(n.name,this.schema)},i=T(n,"addNodeView",s);if(!i)return[];const a=(c,u,l,f)=>{const p=ls(c,o);return i()({editor:t,node:c,getPos:l,decorations:f,HTMLAttributes:p,extension:n})};return[n.name,a]}))}}class Xd{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(o=>o.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(o=>o!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}const tm=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class em extends Xd{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Vd(tm))}setOptions(t={}){this.options=x(x({},this.options),t),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t){this.setOptions({editable:t})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=hu(e)?e(t,this.state.plugins):[...this.state.plugins,t],o=this.state.reconfigure({plugins:n});this.view.updateState(o)}unregisterPlugin(t){if(this.isDestroyed)return;const e=typeof t=="string"?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(o=>!o.key.startsWith(e))});this.view.updateState(n)}createExtensionManager(){const e=[...this.options.enableCoreExtensions?Object.values(Rd):[],...this.options.extensions].filter(n=>["extension","node","mark"].includes(n==null?void 0:n.type));this.extensionManager=new We(e,this)}createCommandManager(){this.commandManager=new io({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=yu(this.options.content,this.schema,this.options.parseOptions),e=vu(t,this.options.autofocus);this.view=new et(this.options.element,Et(x({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:vt.create({doc:t,selection:e})}));const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),s=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),s&&this.emit("blur",{editor:this,event:s.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return ku(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,o=typeof t=="string"?e:t;return Ld(this.state,n,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Pd(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return qd(this.state.doc,{blockSeparator:e,textSerializers:x(x({},n),mu(this.schema))})}get isEmpty(){return zd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}}class Mt{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=x(x({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=z(T(this,"addOptions",{name:this.name}))),this.storage=z(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Mt(t)}configure(t={}){const e=this.extend();return e.options=ro(this.options,t),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Mt(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=z(T(e,"addOptions",{name:e.name})),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}}class Ae{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=x(x({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=z(T(this,"addOptions",{name:this.name}))),this.storage=z(T(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ae(t)}configure(t={}){const e=this.extend();return e.options=ro(this.options,t),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Ae(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=z(T(e,"addOptions",{name:e.name})),e.storage=z(T(e,"addStorage",{name:e.name,options:e.options})),e}}function rm(r){return new ao({find:r.find,handler:({state:t,range:e,match:n})=>{const o=z(r.getAttributes,void 0,n)||{},{tr:s}=t,i=e.from;let a=e.to;if(n[1]){const c=n[0].lastIndexOf(n[1]);let u=i+c;u>a?u=a:a=u+n[1].length;const l=n[0][n[0].length-1];s.insertText(l,i+n[0].length-1),s.replaceWith(u,a,r.type.create(o))}else n[0]&&s.replaceWith(i,a,r.type.create(o))}})}function bn(r,t,e){const n=[];return r===t?e.resolve(r).marks().forEach(o=>{const s=e.resolve(r-1),i=qs(s,o.type);!i||n.push(x({mark:o},i))}):e.nodesBetween(r,t,(o,s)=>{n.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),n}function ar(r){return new ao({find:r.find,handler:({state:t,range:e,match:n})=>{const o=z(r.getAttributes,void 0,n);if(o===!1||o===null)return null;const{tr:s}=t,i=n[n.length-1],a=n[0];let c=e.to;if(i){const u=a.search(/\S/),l=e.from+a.indexOf(i),f=l+i.length;if(bn(e.from,e.to,t.doc).filter(h=>h.mark.type.excluded.find(m=>m===r.type&&m!==h.mark.type)).filter(h=>h.to>l).length)return null;f<e.to&&s.delete(f,e.to),l>e.from&&s.delete(e.from+u,l),c=e.from+u+i.length,s.addMark(e.from+u,c,r.type.create(o||{})),s.removeStoredMark(r.type)}}})}function fs(r){return new ao({find:r.find,handler:({state:t,range:e,match:n})=>{const o=t.doc.resolve(e.from),s=z(r.getAttributes,void 0,n)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),r.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,r.type,s)}})}function Vs(r){return new ao({find:r.find,handler:({state:t,range:e,match:n})=>{const o=z(r.getAttributes,void 0,n)||{},s=t.tr.delete(e.from,e.to),a=s.doc.resolve(e.from).blockRange(),c=a&&bs(a,r.type,o);if(!c)return null;s.wrap(a,c);const u=s.doc.resolve(e.from-1).nodeBefore;u&&u.type===r.type&&Jr(s.doc,e.from-1)&&(!r.joinPredicate||r.joinPredicate(n,u))&&s.join(e.from-1)}})}function Le(r){return new Jd({find:r.find,handler:({state:t,range:e,match:n})=>{const o=z(r.getAttributes,void 0,n);if(o===!1||o===null)return null;const{tr:s}=t,i=n[n.length-1],a=n[0];let c=e.to;if(i){const u=a.search(/\S/),l=e.from+a.indexOf(i),f=l+i.length;if(bn(e.from,e.to,t.doc).filter(h=>h.mark.type.excluded.find(m=>m===r.type&&m!==h.mark.type)).filter(h=>h.to>l).length)return null;f<e.to&&s.delete(f,e.to),l>e.from&&s.delete(e.from+u,l),c=e.from+u+i.length,s.addMark(e.from+u,c,r.type.create(o||{})),s.removeStoredMark(r.type)}}})}function nm(r,t){const e=new tt(r);return t.forEach(n=>{n.steps.forEach(o=>{e.step(o)})}),e}function om(r,t,e){const n=[];return r.nodesBetween(t.from,t.to,(o,s)=>{e(o)&&n.push({node:o,pos:s})}),n}function sm(r,t=JSON.stringify){const e={};return r.filter(n=>{const o=t(n);return Object.prototype.hasOwnProperty.call(e,o)?!1:e[o]=!0})}function im(r){const t=sm(r);return t.length===1?t:t.filter((e,n)=>!t.filter((s,i)=>i!==n).some(s=>e.oldRange.from>=s.oldRange.from&&e.oldRange.to<=s.oldRange.to&&e.newRange.from>=s.newRange.from&&e.newRange.to<=s.newRange.to))}function am(r){const{mapping:t,steps:e}=r,n=[];return t.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,c)=>{i.push({from:a,to:c})});else{const{from:a,to:c}=e[s];if(a===void 0||c===void 0)return;i.push({from:a,to:c})}i.forEach(({from:a,to:c})=>{const u=t.slice(s).map(a,-1),l=t.slice(s).map(c),f=t.invert().map(u,-1),p=t.invert().map(l);n.push({oldRange:{from:f,to:p},newRange:{from:u,to:l}})})}),im(n)}const cm=/^\s*>\s$/,Hs=Mt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return["blockquote",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vs({find:cm,type:this.type})]}}),um=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,lm=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,fm=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,pm=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Sr=Ae.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ar({find:um,type:this.type}),ar({find:fm,type:this.type})]},addPasteRules(){return[Le({find:lm,type:this.type}),Le({find:pm,type:this.type})]}}),hm=/^\s*([-+*])\s$/,js=Mt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",At(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Vs({find:hm,type:this.type})]}}),dm=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,mm=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Us=Ae.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ar({find:dm,type:this.type})]},addPasteRules(){return[Le({find:mm,type:this.type})]}}),gm=/^```([a-z]+)?[\s\n]$/,vm=/^~~~([a-z]+)?[\s\n]$/,kn=Mt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:r=>{var t;const{languageClassPrefix:e}=this.options,s=[...((t=r.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(i=>i.startsWith(e)).map(i=>i.replace(e,""))[0];return s||null},renderHTML:r=>r.language?{class:this.options.languageClassPrefix+r.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:r}){return["pre",this.options.HTMLAttributes,["code",r,0]]},addCommands(){return{setCodeBlock:r=>({commands:t})=>t.setNode(this.name,r),toggleCodeBlock:r=>({commands:t})=>t.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:t}=this.editor.state.selection,e=t.pos===1;return!r||t.parent.type.name!==this.name?!1:e||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=r,{selection:e}=t,{$from:n,empty:o}=e;if(!o||n.parent.type!==this.type)return!1;const s=n.parentOffset===n.parent.nodeSize-2,i=n.parent.textContent.endsWith(`

`);return!s||!i?!1:r.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=r,{selection:e,doc:n}=t,{$from:o,empty:s}=e;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0||n.nodeAt(a)?!1:r.commands.exitCode()}}},addInputRules(){return[fs({find:gm,type:this.type,getAttributes:r=>({language:r[1]})}),fs({find:vm,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new bt({key:new Nt("codeBlockVSCodeHandler"),props:{handlePaste:(r,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const e=t.clipboardData.getData("text/plain"),n=t.clipboardData.getData("vscode-editor-data"),o=n?JSON.parse(n):void 0,s=o==null?void 0:o.mode;if(!e||!s)return!1;const{tr:i}=r.state;return i.replaceSelectionWith(this.type.create({language:s})),i.setSelection(G.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(e.replace(/\r\n?/g,`
`)),i.setMeta("paste",!0),r.dispatch(i),!0}}})]}}),ym=Mt.create({name:"doc",topNode:!0,content:"block+"});function bm(r){return r===void 0&&(r={}),new bt({view:function(e){return new oe(e,r)}})}var oe=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(o){var s=function(i){return n[o](i)};return t.dom.addEventListener(o,s),{name:o,handler:s}})};oe.prototype.destroy=function(){var t=this;this.handlers.forEach(function(e){var n=e.name,o=e.handler;return t.editorView.dom.removeEventListener(n,o)})};oe.prototype.update=function(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())};oe.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())};oe.prototype.updateOverlay=function(){var t=this.editorView.state.doc.resolve(this.cursorPos),e;if(!t.parent.inlineContent){var n=t.nodeBefore,o=t.nodeAfter;if(n||o){var s=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?s.bottom:s.top;n&&o&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:s.left,right:s.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var a=this.editorView.coordsAtPos(this.cursorPos);e={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var u,l;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,l=-pageYOffset;else{var f=c.getBoundingClientRect();u=f.left-c.scrollLeft,l=f.top-c.scrollTop}this.element.style.left=e.left-u+"px",this.element.style.top=e.top-l+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"};oe.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.setCursor(null)},t)};oe.prototype.dragover=function(t){if(!!this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),o=n&&n.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,e):o;if(e&&!s){var i=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(i=mc(this.editorView.state.doc,i,this.editorView.dragging.slice),i==null))return this.setCursor(null);this.setCursor(i),this.scheduleRemoval(5e3)}}};oe.prototype.dragend=function(){this.scheduleRemoval(20)};oe.prototype.drop=function(){this.scheduleRemoval(20)};oe.prototype.dragleave=function(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)};const km=Ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:null}},addProseMirrorPlugins(){return[bm(this.options)]}});var Wt=function(r){function t(e){r.call(this,e,e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.map=function(n,o){var s=n.resolve(o.map(this.head));return t.valid(s)?new t(s):r.near(s)},t.prototype.content=function(){return S.empty},t.prototype.eq=function(n){return n instanceof t&&n.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(n,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(n.resolve(o.pos))},t.prototype.getBookmark=function(){return new Dn(this.anchor)},t.valid=function(n){var o=n.parent;if(o.isTextblock||!Dm(n)||!Cm(n))return!1;var s=o.type.spec.allowGapCursor;if(s!=null)return s;var i=o.contentMatchAt(n.index()).defaultType;return i&&i.isTextblock},t.findFrom=function(n,o,s){t:for(;;){if(!s&&t.valid(n))return n;for(var i=n.pos,a=null,c=n.depth;;c--){var u=n.node(c);if(o>0?n.indexAfter(c)<u.childCount:n.index(c)>0){a=u.child(o>0?n.indexAfter(c):n.index(c)-1);break}else if(c==0)return null;i+=o;var l=n.doc.resolve(i);if(t.valid(l))return l}for(;;){var f=o>0?a.firstChild:a.lastChild;if(!f){if(a.isAtom&&!a.isText&&!P.isSelectable(a)){n=n.doc.resolve(i+a.nodeSize*o),s=!1;continue t}break}a=f,i+=o;var p=n.doc.resolve(i);if(t.valid(p))return p}return null}},t}(B);Wt.prototype.visible=!1;B.jsonID("gapcursor",Wt);var Dn=function(t){this.pos=t};Dn.prototype.map=function(t){return new Dn(t.map(this.pos))};Dn.prototype.resolve=function(t){var e=t.resolve(this.pos);return Wt.valid(e)?new Wt(e):B.near(e)};function Dm(r){for(var t=r.depth;t>=0;t--){var e=r.index(t),n=r.node(t);if(e==0){if(n.type.spec.isolating)return!0;continue}for(var o=n.child(e-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Cm(r){for(var t=r.depth;t>=0;t--){var e=r.indexAfter(t),n=r.node(t);if(e==n.childCount){if(n.type.spec.isolating)return!0;continue}for(var o=n.child(e);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}var xm=function(){return new bt({props:{decorations:_m,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&Wt.valid(n))return new Wt(n)},handleClick:Em,handleKeyDown:Am}})},Am=pu({ArrowLeft:en("horiz",-1),ArrowRight:en("horiz",1),ArrowUp:en("vert",-1),ArrowDown:en("vert",1)});function en(r,t){var e=r=="vert"?t>0?"down":"up":t>0?"right":"left";return function(n,o,s){var i=n.selection,a=t>0?i.$to:i.$from,c=i.empty;if(i instanceof G){if(!s.endOfTextblock(e)||a.depth==0)return!1;c=!1,a=n.doc.resolve(t>0?a.after():a.before())}var u=Wt.findFrom(a,t,c);return u?(o&&o(n.tr.setSelection(new Wt(u))),!0):!1}}function Em(r,t,e){if(!r.editable)return!1;var n=r.state.doc.resolve(t);if(!Wt.valid(n))return!1;var o=r.posAtCoords({left:e.clientX,top:e.clientY}),s=o.inside;return s>-1&&P.isSelectable(r.state.doc.nodeAt(s))?!1:(r.dispatch(r.state.tr.setSelection(new Wt(n))),!0)}function _m(r){if(!(r.selection instanceof Wt))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Z.create(r.doc,[nt.widget(r.selection.head,t,{key:"gapcursor"})])}const wm=Ot.create({name:"gapCursor",addProseMirrorPlugins(){return[xm()]},extendNodeSchema(r){var t;const e={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(t=z(T(r,"allowGapCursor",e)))!==null&&t!==void 0?t:null}}}),Js=Mt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",At(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:t,state:e,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:o,storedMarks:s}=e;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=n.extensionManager,c=s||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:l})=>{if(l&&c&&i){const f=c.filter(p=>a.includes(p.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Cu=Mt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:t}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:r=>({commands:t})=>this.options.levels.includes(r.level)?t.setNode(this.name,r):!1,toggleHeading:r=>({commands:t})=>this.options.levels.includes(r.level)?t.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,t)=>Et(x({},r),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(r=>fs({find:new RegExp(`^(#{1,${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}});var Cn=200,at=function(){};at.prototype.append=function(t){return t.length?(t=at.from(t),!this.length&&t||t.length<Cn&&this.leafAppend(t)||this.length<Cn&&t.leafPrepend(this)||this.appendInner(t)):this};at.prototype.prepend=function(t){return t.length?at.from(t).append(this):this};at.prototype.appendInner=function(t){return new Sm(this,t)};at.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?at.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};at.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};at.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};at.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var o=[];return this.forEach(function(s,i){return o.push(t(s,i))},e,n),o};at.from=function(t){return t instanceof at?t:t&&t.length?new xu(t):at.empty};var xu=function(r){function t(n){r.call(this),this.values=n}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new t(this.values.slice(o,s))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,s,i,a){for(var c=s;c<i;c++)if(o(this.values[c],a+c)===!1)return!1},t.prototype.forEachInvertedInner=function(o,s,i,a){for(var c=s-1;c>=i;c--)if(o(this.values[c],a+c)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=Cn)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=Cn)return new t(o.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(at);at.empty=new xu([]);var Sm=function(r){function t(e,n){r.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(n,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(n,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(n,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(n,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(n,Math.min(o,a),s,i)===!1)return!1},t.prototype.sliceInner=function(n,o){if(n==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(n,o):n>=s?this.right.slice(n-s,o-s):this.left.slice(n,s).append(this.right.slice(0,o-s))},t.prototype.leafAppend=function(n){var o=this.right.leafAppend(n);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(n){var o=this.left.leafPrepend(n);if(o)return new t(o,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(at),Au=at,Mm=500,lt=function(t,e){this.items=t,this.eventCount=e};lt.prototype.popEvent=function(t,e){var n=this;if(this.eventCount==0)return null;for(var o=this.items.length;;o--){var s=this.items.get(o-1);if(s.selection){--o;break}}var i,a;e&&(i=this.remapping(o,this.items.length),a=i.maps.length);var c=t.tr,u,l,f=[],p=[];return this.items.forEach(function(h,d){if(!h.step){i||(i=n.remapping(o,d+1),a=i.maps.length),a--,p.push(h);return}if(i){p.push(new ee(h.map));var m=h.step.map(i.slice(a)),v;m&&c.maybeStep(m).doc&&(v=c.mapping.maps[c.mapping.maps.length-1],f.push(new ee(v,null,null,f.length+p.length))),a--,v&&i.appendMap(v,a)}else c.maybeStep(h.step);if(h.selection)return u=i?h.selection.map(i.slice(a)):h.selection,l=new lt(n.items.slice(0,o).append(p.reverse().concat(f)),n.eventCount-1),!1},this.items.length,0),{remaining:l,transform:c,selection:u}};lt.prototype.addTransform=function(t,e,n,o){for(var s=[],i=this.eventCount,a=this.items,c=!o&&a.length?a.get(a.length-1):null,u=0;u<t.steps.length;u++){var l=t.steps[u].invert(t.docs[u]),f=new ee(t.mapping.maps[u],l,e),p=void 0;(p=c&&c.merge(f))&&(f=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(f),e&&(i++,e=null),o||(c=f)}var h=i-n.depth;return h>Om&&(a=Tm(a,h),i-=h),new lt(a.append(s),i)};lt.prototype.remapping=function(t,e){var n=new gt;return this.items.forEach(function(o,s){var i=o.mirrorOffset!=null&&s-o.mirrorOffset>=t?n.maps.length-o.mirrorOffset:null;n.appendMap(o.map,i)},t,e),n};lt.prototype.addMaps=function(t){return this.eventCount==0?this:new lt(this.items.append(t.map(function(e){return new ee(e)})),this.eventCount)};lt.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],o=Math.max(0,this.items.length-e),s=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(function(h){h.selection&&a--},o);var c=e;this.items.forEach(function(h){var d=s.getMirror(--c);if(d!=null){i=Math.min(i,d);var m=s.maps[d];if(h.step){var v=t.steps[d].invert(t.docs[d]),y=h.selection&&h.selection.map(s.slice(c+1,d));y&&a++,n.push(new ee(m,v,y))}else n.push(new ee(m))}},o);for(var u=[],l=e;l<i;l++)u.push(new ee(s.maps[l]));var f=this.items.slice(0,o).append(u).append(n),p=new lt(f,a);return p.emptyItemCount()>Mm&&(p=p.compress(this.items.length-n.length)),p};lt.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(e){e.step||t++}),t};lt.prototype.compress=function(t){t===void 0&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,o=[],s=0;return this.items.forEach(function(i,a){if(a>=t)o.push(i),i.selection&&s++;else if(i.step){var c=i.step.map(e.slice(n)),u=c&&c.getMap();if(n--,u&&e.appendMap(u,n),c){var l=i.selection&&i.selection.map(e.slice(n));l&&s++;var f=new ee(u.invert(),c,l),p,h=o.length-1;(p=o.length&&o[h].merge(f))?o[h]=p:o.push(f)}}else i.map&&n--},this.items.length,0),new lt(Au.from(o.reverse()),s)};lt.empty=new lt(Au.empty,0);function Tm(r,t){var e;return r.forEach(function(n,o){if(n.selection&&t--==0)return e=o,!1}),r.slice(e)}var ee=function(t,e,n,o){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=o};ee.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new ee(e.getMap().invert(),e,this.selection)}};var ve=function(t,e,n,o){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=o},Om=20;function Fm(r,t,e,n){var o=e.getMeta(ke),s;if(o)return o.historyState;e.getMeta(Bm)&&(r=new ve(r.done,r.undone,null,0));var i=e.getMeta("appendedTransaction");if(e.steps.length==0)return r;if(i&&i.getMeta(ke))return i.getMeta(ke).redo?new ve(r.done.addTransform(e,null,n,an(t)),r.undone,oa(e.mapping.maps[e.steps.length-1]),r.prevTime):new ve(r.done,r.undone.addTransform(e,null,n,an(t)),null,r.prevTime);if(e.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){var a=r.prevTime==0||!i&&(r.prevTime<(e.time||0)-n.newGroupDelay||!Nm(e,r.prevRanges)),c=i?No(r.prevRanges,e.mapping):oa(e.mapping.maps[e.steps.length-1]);return new ve(r.done.addTransform(e,a?t.selection.getBookmark():null,n,an(t)),lt.empty,c,e.time)}else return(s=e.getMeta("rebased"))?new ve(r.done.rebased(e,s),r.undone.rebased(e,s),No(r.prevRanges,e.mapping),r.prevTime):new ve(r.done.addMaps(e.mapping.maps),r.undone.addMaps(e.mapping.maps),No(r.prevRanges,e.mapping),r.prevTime)}function Nm(r,t){if(!t)return!1;if(!r.docChanged)return!0;var e=!1;return r.mapping.maps[0].forEach(function(n,o){for(var s=0;s<t.length;s+=2)n<=t[s+1]&&o>=t[s]&&(e=!0)}),e}function oa(r){var t=[];return r.forEach(function(e,n,o,s){return t.push(o,s)}),t}function No(r,t){if(!r)return null;for(var e=[],n=0;n<r.length;n+=2){var o=t.map(r[n],1),s=t.map(r[n+1],-1);o<=s&&e.push(o,s)}return e}function Eu(r,t,e,n){var o=an(t),s=ke.get(t).spec.config,i=(n?r.undone:r.done).popEvent(t,o);if(!!i){var a=i.selection.resolve(i.transform.doc),c=(n?r.done:r.undone).addTransform(i.transform,t.selection.getBookmark(),s,o),u=new ve(n?c:i.remaining,n?i.remaining:c,null,0);e(i.transform.setSelection(a).setMeta(ke,{redo:n,historyState:u}).scrollIntoView())}}var Bo=!1,sa=null;function an(r){var t=r.plugins;if(sa!=t){Bo=!1,sa=t;for(var e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Bo=!0;break}}return Bo}var ke=new Nt("history"),Bm=new Nt("closeHistory");function Rm(r){return r={depth:r&&r.depth||100,newGroupDelay:r&&r.newGroupDelay||500},new bt({key:ke,state:{init:function(){return new ve(lt.empty,lt.empty,null,0)},apply:function(e,n,o){return Fm(n,o,e,r)}},config:r,props:{handleDOMEvents:{beforeinput:function(e,n){var o=n.inputType=="historyUndo"?_u(e.state,e.dispatch):n.inputType=="historyRedo"?wu(e.state,e.dispatch):!1;return o&&n.preventDefault(),o}}}})}function _u(r,t){var e=ke.getState(r);return!e||e.done.eventCount==0?!1:(t&&Eu(e,r,t,!1),!0)}function wu(r,t){var e=ke.getState(r);return!e||e.undone.eventCount==0?!1:(t&&Eu(e,r,t,!0),!0)}const Im=Ot.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:t})=>_u(r,t),redo:()=>({state:r,dispatch:t})=>wu(r,t)}},addProseMirrorPlugins(){return[Rm(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),Ks=Mt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",At(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r})=>r().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{var n;if(e){const{parent:o,pos:s}=t.selection.$from,i=s+1;if(t.doc.nodeAt(i))t.setSelection(G.create(t.doc,i));else{const c=(n=o.type.contentMatch.defaultType)===null||n===void 0?void 0:n.create();c&&(t.insert(i,c),t.setSelection(G.create(t.doc,i)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[rm({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Lm=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Pm=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,qm=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,zm=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Mr=Ae.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ar({find:Lm,type:this.type}),ar({find:qm,type:this.type})]},addPasteRules(){return[Le({find:Pm,type:this.type}),Le({find:zm,type:this.type})]}}),Ws=Mt.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",At(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Vm=/^(\d+)\.\s$/,Gs=Mt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const n=r,{start:t}=n,e=di(n,["start"]);return t===1?["ol",At(this.options.HTMLAttributes,e),0]:["ol",At(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Vs({find:Vm,type:this.type,getAttributes:r=>({start:+r[1]}),joinPredicate:(r,t)=>t.childCount+t.attrs.start===+r[1]})]}}),$s=Mt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Hm=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,jm=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Zs=Ae.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ar({find:Hm,type:this.type})]},addPasteRules(){return[Le({find:jm,type:this.type})]}}),Um=Mt.create({name:"text",group:"inline"}),Jm=Ot.create({name:"starterKit",addExtensions(){var r,t,e,n,o,s,i,a,c,u,l,f,p,h,d,m,v,y;const g=[];return this.options.blockquote!==!1&&g.push(Hs.configure((r=this.options)===null||r===void 0?void 0:r.blockquote)),this.options.bold!==!1&&g.push(Sr.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&g.push(js.configure((e=this.options)===null||e===void 0?void 0:e.bulletList)),this.options.code!==!1&&g.push(Us.configure((n=this.options)===null||n===void 0?void 0:n.code)),this.options.codeBlock!==!1&&g.push(kn.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&g.push(ym.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&g.push(km.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&g.push(wm.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&g.push(Js.configure((c=this.options)===null||c===void 0?void 0:c.hardBreak)),this.options.heading!==!1&&g.push(Cu.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&g.push(Im.configure((l=this.options)===null||l===void 0?void 0:l.history)),this.options.horizontalRule!==!1&&g.push(Ks.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&g.push(Mr.configure((p=this.options)===null||p===void 0?void 0:p.italic)),this.options.listItem!==!1&&g.push(Ws.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&g.push(Gs.configure((d=this.options)===null||d===void 0?void 0:d.orderedList)),this.options.paragraph!==!1&&g.push($s.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&g.push(Zs.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&g.push(Um.configure((y=this.options)===null||y===void 0?void 0:y.text)),g}});function Ys(r){this.j={},this.jr=[],this.jd=null,this.t=r}Ys.prototype={accepts:function(){return!!this.t},tt:function(t,e){if(e&&e.j)return this.j[t]=e,e;var n=e,o=this.j[t];if(o)return n&&(o.t=n),o;o=$();var s=xn(this,t);return s?(Object.assign(o.j,s.j),o.jr.append(s.jr),o.jr=s.jd,o.t=n||s.t):o.t=n,this.j[t]=o,o}};var $=function(){return new Ys},N=function(t){return new Ys(t)},w=function(t,e,n){t.j[e]||(t.j[e]=n)},rt=function(t,e,n){t.jr.push([e,n])},xn=function(t,e){var n=t.j[e];if(n)return n;for(var o=0;o<t.jr.length;o++){var s=t.jr[o][0],i=t.jr[o][1];if(s.test(e))return i}return t.jd},H=function(t,e,n){for(var o=0;o<e.length;o++)w(t,e[o],n)},Km=function(t,e){for(var n=0;n<e.length;n++){var o=e[n][0],s=e[n][1];w(t,o,s)}},Me=function(t,e,n,o){for(var s=0,i=e.length,a;s<i&&(a=t.j[e[s]]);)t=a,s++;if(s>=i)return[];for(;s<i-1;)a=o(),w(t,e[s],a),t=a,s++;w(t,e[i-1],n)},Ht="DOMAIN",ue="LOCALHOST",Yt="TLD",Rt="NUM",cr="PROTOCOL",Qs="MAILTO",Su="WS",Xs="NL",Ge="OPENBRACE",Tr="OPENBRACKET",Or="OPENANGLEBRACKET",Fr="OPENPAREN",Oe="CLOSEBRACE",$e="CLOSEBRACKET",Ze="CLOSEANGLEBRACKET",Ye="CLOSEPAREN",An="AMPERSAND",En="APOSTROPHE",_n="ASTERISK",Qe="AT",wn="BACKSLASH",Sn="BACKTICK",Mn="CARET",Nr="COLON",ti="COMMA",Tn="DOLLAR",ye="DOT",On="EQUALS",ei="EXCLAMATION",Fn="HYPHEN",Nn="PERCENT",Bn="PIPE",Rn="PLUS",In="POUND",Ln="QUERY",ri="QUOTE",ni="SEMI",le="SLASH",Pn="TILDE",qn="UNDERSCORE",zn="SYM",Wm=Object.freeze({__proto__:null,DOMAIN:Ht,LOCALHOST:ue,TLD:Yt,NUM:Rt,PROTOCOL:cr,MAILTO:Qs,WS:Su,NL:Xs,OPENBRACE:Ge,OPENBRACKET:Tr,OPENANGLEBRACKET:Or,OPENPAREN:Fr,CLOSEBRACE:Oe,CLOSEBRACKET:$e,CLOSEANGLEBRACKET:Ze,CLOSEPAREN:Ye,AMPERSAND:An,APOSTROPHE:En,ASTERISK:_n,AT:Qe,BACKSLASH:wn,BACKTICK:Sn,CARET:Mn,COLON:Nr,COMMA:ti,DOLLAR:Tn,DOT:ye,EQUALS:On,EXCLAMATION:ei,HYPHEN:Fn,PERCENT:Nn,PIPE:Bn,PLUS:Rn,POUND:In,QUERY:Ln,QUOTE:ri,SEMI:ni,SLASH:le,TILDE:Pn,UNDERSCORE:qn,SYM:zn}),ia="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw verm\xF6gensberater-ctb verm\xF6gensberatung-pwb \u03B5\u03BB \u03B5\u03C5 \u0431\u0433 \u0431\u0435\u043B \u0434\u0435\u0442\u0438 \u0435\u044E \u043A\u0430\u0442\u043E\u043B\u0438\u043A \u043A\u043E\u043C \u049B\u0430\u0437 \u043C\u043A\u0434 \u043C\u043E\u043D \u043C\u043E\u0441\u043A\u0432\u0430 \u043E\u043D\u043B\u0430\u0439\u043D \u043E\u0440\u0433 \u0440\u0443\u0441 \u0440\u0444 \u0441\u0430\u0439\u0442 \u0441\u0440\u0431 \u0443\u043A\u0440 \u10D2\u10D4 \u0570\u0561\u0575 \u05D9\u05E9\u05E8\u05D0\u05DC \u05E7\u05D5\u05DD \u0627\u0628\u0648\u0638\u0628\u064A \u0627\u062A\u0635\u0627\u0644\u0627\u062A \u0627\u0631\u0627\u0645\u0643\u0648 \u0627\u0644\u0627\u0631\u062F\u0646 \u0627\u0644\u0628\u062D\u0631\u064A\u0646 \u0627\u0644\u062C\u0632\u0627\u0626\u0631 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629 \u0627\u0644\u0639\u0644\u064A\u0627\u0646 \u0627\u0644\u0645\u063A\u0631\u0628 \u0627\u0645\u0627\u0631\u0627\u062A \u0627\u06CC\u0631\u0627\u0646 \u0628\u0627\u0631\u062A \u0628\u0627\u0632\u0627\u0631 \u0628\u06BE\u0627\u0631\u062A \u0628\u064A\u062A\u0643 \u067E\u0627\u06A9\u0633\u062A\u0627\u0646 \u0680\u0627\u0631\u062A \u062A\u0648\u0646\u0633 \u0633\u0648\u062F\u0627\u0646 \u0633\u0648\u0631\u064A\u0629 \u0634\u0628\u0643\u0629 \u0639\u0631\u0627\u0642 \u0639\u0631\u0628 \u0639\u0645\u0627\u0646 \u0641\u0644\u0633\u0637\u064A\u0646 \u0642\u0637\u0631 \u0643\u0627\u062B\u0648\u0644\u064A\u0643 \u0643\u0648\u0645 \u0645\u0635\u0631 \u0645\u0644\u064A\u0633\u064A\u0627 \u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627 \u0645\u0648\u0642\u0639 \u0647\u0645\u0631\u0627\u0647 \u0915\u0949\u092E \u0928\u0947\u091F \u092D\u093E\u0930\u0924 \u092D\u093E\u0930\u0924\u092E\u094D \u092D\u093E\u0930\u094B\u0924 \u0938\u0902\u0917\u0920\u0928 \u09AC\u09BE\u0982\u09B2\u09BE \u09AD\u09BE\u09B0\u09A4 \u09AD\u09BE\u09F0\u09A4 \u0A2D\u0A3E\u0A30\u0A24 \u0AAD\u0ABE\u0AB0\u0AA4 \u0B2D\u0B3E\u0B30\u0B24 \u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE \u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8 \u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD \u0C2D\u0C3E\u0C30\u0C24\u0C4D \u0CAD\u0CBE\u0CB0\u0CA4 \u0D2D\u0D3E\u0D30\u0D24\u0D02 \u0DBD\u0D82\u0D9A\u0DCF \u0E04\u0E2D\u0E21 \u0E44\u0E17\u0E22 \u0EA5\u0EB2\u0EA7 \uB2F7\uB137 \uB2F7\uCEF4 \uC0BC\uC131 \uD55C\uAD6D \u30A2\u30DE\u30BE\u30F3 \u30B0\u30FC\u30B0\u30EB \u30AF\u30E9\u30A6\u30C9 \u30B3\u30E0 \u30B9\u30C8\u30A2 \u30BB\u30FC\u30EB \u30D5\u30A1\u30C3\u30B7\u30E7\u30F3 \u30DD\u30A4\u30F3\u30C8 \u307F\u3093\u306A \u4E16\u754C \u4E2D\u4FE1 \u4E2D\u56FD \u4E2D\u570B \u4E2D\u6587\u7F51 \u4E9A\u9A6C\u900A \u4F01\u4E1A \u4F5B\u5C71 \u4FE1\u606F \u5065\u5EB7 \u516B\u5366 \u516C\u53F8 \u516C\u76CA \u53F0\u6E7E \u53F0\u7063 \u5546\u57CE \u5546\u5E97 \u5546\u6807 \u5609\u91CC \u5609\u91CC\u5927\u9152\u5E97 \u5728\u7EBF \u5927\u4F17\u6C7D\u8F66 \u5927\u62FF \u5929\u4E3B\u6559 \u5A31\u4E50 \u5BB6\u96FB \u5E7F\u4E1C \u5FAE\u535A \u6148\u5584 \u6211\u7231\u4F60 \u624B\u673A \u62DB\u8058 \u653F\u52A1 \u653F\u5E9C \u65B0\u52A0\u5761 \u65B0\u95FB \u65F6\u5C1A \u66F8\u7C4D \u673A\u6784 \u6DE1\u9A6C\u9521 \u6E38\u620F \u6FB3\u9580 \u70B9\u770B \u79FB\u52A8 \u7EC4\u7EC7\u673A\u6784 \u7F51\u5740 \u7F51\u5E97 \u7F51\u7AD9 \u7F51\u7EDC \u8054\u901A \u8BFA\u57FA\u4E9A \u8C37\u6B4C \u8D2D\u7269 \u901A\u8CA9 \u96C6\u56E2 \u96FB\u8A0A\u76C8\u79D1 \u98DE\u5229\u6D66 \u98DF\u54C1 \u9910\u5385 \u9999\u683C\u91CC\u62C9 \u9999\u6E2F".split(" "),yr=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,br=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,kr=/\uFE0F/,Dr=/\d/,aa=/\s/;function Gm(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=$(),e=N(Rt),n=N(Ht),o=$(),s=N(Su),i=[[Dr,n],[yr,n],[br,n],[kr,n]],a=function(){var b=N(Ht);return b.j={"-":o},b.jr=[].concat(i),b},c=function(b){var A=a();return A.t=b,A};Km(t,[["'",N(En)],["{",N(Ge)],["[",N(Tr)],["<",N(Or)],["(",N(Fr)],["}",N(Oe)],["]",N($e)],[">",N(Ze)],[")",N(Ye)],["&",N(An)],["*",N(_n)],["@",N(Qe)],["`",N(Sn)],["^",N(Mn)],[":",N(Nr)],[",",N(ti)],["$",N(Tn)],[".",N(ye)],["=",N(On)],["!",N(ei)],["-",N(Fn)],["%",N(Nn)],["|",N(Bn)],["+",N(Rn)],["#",N(In)],["?",N(Ln)],['"',N(ri)],["/",N(le)],[";",N(ni)],["~",N(Pn)],["_",N(qn)],["\\",N(wn)]]),w(t,`
`,N(Xs)),rt(t,aa,s),w(s,`
`,$()),rt(s,aa,s);for(var u=0;u<ia.length;u++)Me(t,ia[u],c(Yt),a);var l=a(),f=a(),p=a(),h=a();Me(t,"file",l,a),Me(t,"ftp",f,a),Me(t,"http",p,a),Me(t,"mailto",h,a);var d=a(),m=N(cr),v=N(Qs);w(f,"s",d),w(f,":",m),w(p,"s",d),w(p,":",m),w(l,":",m),w(d,":",m),w(h,":",v);for(var y=a(),g=0;g<r.length;g++)Me(t,r[g],y,a);return w(y,":",m),Me(t,"localhost",c(ue),a),rt(t,Dr,e),rt(t,yr,n),rt(t,br,n),rt(t,kr,n),rt(e,Dr,e),rt(e,yr,n),rt(e,br,n),rt(e,kr,n),w(e,"-",o),w(n,"-",o),w(o,"-",o),rt(n,Dr,n),rt(n,yr,n),rt(n,br,n),rt(n,kr,n),rt(o,Dr,n),rt(o,yr,n),rt(o,br,n),rt(o,kr,n),t.jd=N(zn),t}function $m(r,t){for(var e=Zm(t.replace(/[A-Z]/g,function(h){return h.toLowerCase()})),n=e.length,o=[],s=0,i=0;i<n;){for(var a=r,c=null,u=0,l=null,f=-1,p=-1;i<n&&(c=xn(a,e[i]));)a=c,a.accepts()?(f=0,p=0,l=a):f>=0&&(f+=e[i].length,p++),u+=e[i].length,s+=e[i].length,i++;s-=f,i-=p,u-=f,o.push({t:l.t,v:t.substr(s-u,u),s:s-u,e:s})}return o}function Zm(r){for(var t=[],e=r.length,n=0;n<e;){var o=r.charCodeAt(n),s=void 0,i=o<55296||o>56319||n+1===e||(s=r.charCodeAt(n+1))<56320||s>57343?r[n]:r.slice(n,n+2);t.push(i),n+=i.length}return t}var Mu={defaultProtocol:"http",events:null,format:ca,formatHref:ca,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function ca(r){return r}function Ym(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=Object.create(r.prototype);for(var o in e)n[o]=e[o];return n.constructor=t,t.prototype=n,t}function Vn(){}Vn.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mu.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}}};function He(r,t){function e(n,o){this.t=r,this.v=n,this.tk=o}return Ym(Vn,e,t),e}var Tu=He("email",{isLink:!0}),ps=He("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),hs=He("text"),Ou=He("nl"),ge=He("url",{isLink:!0,toHref:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mu.defaultProtocol,e=this.tk,n=!1,o=!1,s=[],i=0;e[i].t===cr;)n=!0,s.push(e[i].v),i++;for(;e[i].t===le;)o=!0,s.push(e[i].v),i++;for(;i<e.length;i++)s.push(e[i].v);return s=s.join(""),n||o||(s="".concat(t,"://").concat(s)),s},hasProtocol:function(){return this.tk[0].t===cr}}),Qm=Object.freeze({__proto__:null,MultiToken:Vn,Base:Vn,createTokenClass:He,MailtoEmail:Tu,Email:ps,Text:hs,Nl:Ou,Url:ge});function Xm(){var r=$(),t=$(),e=$(),n=$(),o=$(),s=$(),i=$(),a=N(ge),c=$(),u=N(ge),l=N(ge),f=$(),p=$(),h=$(),d=$(),m=$(),v=N(ge),y=N(ge),g=N(ge),D=N(ge),b=$(),A=$(),k=$(),M=$(),F=$(),q=$(),O=N(ps),K=$(),kt=N(ps),_=N(Tu),W=$(),I=$(),R=$(),$t=$(),Yr=N(Ou);w(r,Xs,Yr),w(r,cr,t),w(r,Qs,e),w(t,le,n),w(n,le,o),w(r,Yt,s),w(r,Ht,s),w(r,ue,a),w(r,Rt,s),w(o,Yt,l),w(o,Ht,l),w(o,Rt,l),w(o,ue,l),w(s,ye,i),w(F,ye,q),w(i,Yt,a),w(i,Ht,s),w(i,Rt,s),w(i,ue,s),w(q,Yt,O),w(q,Ht,F),w(q,Rt,F),w(q,ue,F),w(a,ye,i),w(O,ye,q),w(a,Nr,c),w(a,le,l),w(c,Rt,u),w(u,le,l),w(O,Nr,K),w(K,Rt,kt);var pt=[An,_n,Qe,wn,Sn,Mn,Tn,Ht,On,Fn,ue,Rt,Nn,Bn,Rn,In,cr,le,zn,Pn,Yt,qn],ht=[En,Ze,Oe,$e,Ye,Nr,ti,ye,ei,Or,Ge,Tr,Fr,Ln,ri,ni];w(l,Ge,p),w(l,Tr,h),w(l,Or,d),w(l,Fr,m),w(f,Ge,p),w(f,Tr,h),w(f,Or,d),w(f,Fr,m),w(p,Oe,l),w(h,$e,l),w(d,Ze,l),w(m,Ye,l),w(v,Oe,l),w(y,$e,l),w(g,Ze,l),w(D,Ye,l),w(b,Oe,l),w(A,$e,l),w(k,Ze,l),w(M,Ye,l),H(p,pt,v),H(h,pt,y),H(d,pt,g),H(m,pt,D),H(p,ht,b),H(h,ht,A),H(d,ht,k),H(m,ht,M),H(v,pt,v),H(y,pt,y),H(g,pt,g),H(D,pt,D),H(v,ht,v),H(y,ht,y),H(g,ht,g),H(D,ht,D),H(b,pt,v),H(A,pt,y),H(k,pt,g),H(M,pt,D),H(b,ht,b),H(A,ht,A),H(k,ht,k),H(M,ht,M),H(l,pt,l),H(f,pt,l),H(l,ht,f),H(f,ht,f),w(e,Yt,_),w(e,Ht,_),w(e,Rt,_),w(e,ue,_),H(_,pt,_),H(_,ht,W),H(W,pt,_),H(W,ht,W);var gr=[An,En,_n,wn,Sn,Mn,Oe,Tn,Ht,On,Fn,Rt,Ge,Nn,Bn,Rn,In,Ln,le,zn,Pn,Yt,qn];return H(s,gr,I),w(s,Qe,R),H(a,gr,I),w(a,Qe,R),H(i,gr,I),H(I,gr,I),w(I,Qe,R),w(I,ye,$t),H($t,gr,I),w(R,Yt,F),w(R,Ht,F),w(R,Rt,F),w(R,ue,O),r}function tg(r,t,e){for(var n=e.length,o=0,s=[],i=[];o<n;){for(var a=r,c=null,u=null,l=0,f=null,p=-1;o<n&&!(c=xn(a,e[o].t));)i.push(e[o++]);for(;o<n&&(u=c||xn(a,e[o].t));)c=null,a=u,a.accepts()?(p=0,f=a):p>=0&&p++,o++,l++;if(p<0)for(var h=o-l;h<o;h++)i.push(e[h]);else{i.length>0&&(s.push(Ro(hs,t,i)),i=[]),o-=p,l-=p;var d=f.t,m=e.slice(o-l,o);s.push(Ro(d,t,m))}}return i.length>0&&s.push(Ro(hs,t,i)),s}function Ro(r,t,e){var n=e[0].s,o=e[e.length-1].e,s=t.substr(n,o-n);return new r(s,e)}var jt={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function eg(){jt.scanner={start:Gm(jt.customProtocols),tokens:Wm},jt.parser={start:Xm(),tokens:Qm};for(var r={createTokenClass:He},t=0;t<jt.pluginQueue.length;t++)jt.pluginQueue[t][1]({scanner:jt.scanner,parser:jt.parser,utils:r});jt.initialized=!0}function Fu(r){return jt.initialized||eg(),tg(jt.parser.start,r,$m(jt.scanner.start,r))}function oi(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=Fu(r),n=[],o=0;o<e.length;o++){var s=e[o];s.isLink&&(!t||s.t===t)&&n.push(s.toObject())}return n}function ua(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=Fu(r);return e.length===1&&e[0].isLink&&(!t||e[0].t===t)}function rg(r){return new bt({key:new Nt("autolink"),appendTransaction:(t,e,n)=>{const o=t.some(l=>l.docChanged)&&!e.doc.eq(n.doc),s=t.some(l=>l.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=n,a=nm(e.doc,t),{mapping:c}=a;if(am(a).forEach(({oldRange:l,newRange:f})=>{bn(l.from,l.to,e.doc).filter(p=>p.mark.type===r.type).forEach(p=>{const h=c.map(p.from),d=c.map(p.to),m=bn(h,d,n.doc).filter(A=>A.mark.type===r.type);if(!m.length)return;const v=m[0],y=e.doc.textBetween(p.from,p.to,void 0," "),g=n.doc.textBetween(v.from,v.to,void 0," "),D=ua(y),b=ua(g);D&&!b&&i.removeMark(v.from,v.to,r.type)}),om(n.doc,f,p=>p.isTextblock).forEach(p=>{const h=n.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");oi(h).filter(d=>d.isLink).map(d=>Et(x({},d),{from:p.pos+d.start+1,to:p.pos+d.end+1})).filter(d=>{const m=f.from>=d.from&&f.from<=d.to,v=f.to>=d.from&&f.to<=d.to;return m||v}).forEach(d=>{i.addMark(d.from,d.to,r.type.create({href:d.href}))})})}),!!i.steps.length)return i}})}function ng(r){return new bt({key:new Nt("handleClickLink"),props:{handleClick:(t,e,n)=>{var o;const s=ku(t.state,r.type.name);return((o=n.target)===null||o===void 0?void 0:o.closest("a"))&&s.href?(window.open(s.href,s.target),!0):!1}}})}function og(r){return new bt({key:new Nt("handlePasteLink"),props:{handlePaste:(t,e,n)=>{const{state:o}=t,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";n.content.forEach(u=>{a+=u.textContent});const c=oi(a).find(u=>u.isLink&&u.value===a);return!a||!c?!1:(r.editor.commands.setMark(r.type,{href:c.href}),!0)}}})}const Nu=Ae.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:r}){return["a",At(this.options.HTMLAttributes,r),0]},addCommands(){return{setLink:r=>({chain:t})=>t().setMark(this.name,r).setMeta("preventAutolink",!0).run(),toggleLink:r=>({chain:t})=>t().toggleMark(this.name,r,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:r})=>r().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Le({find:r=>oi(r).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:r=>{var t;return{href:(t=r.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const r=[];return this.options.autolink&&r.push(rg({type:this.type})),this.options.openOnClick&&r.push(ng({type:this.type})),this.options.linkOnPaste&&r.push(og({editor:this.editor,type:this.type})),r}});var It;(function(r){r.MARKDOWN="markdown",r.PREVIEW="preview",r.READONLY="readonly"})(It||(It={}));const sg="\xC1",ig="\xE1",ag="\u0102",cg="\u0103",ug="\u223E",lg="\u223F",fg="\u223E\u0333",pg="\xC2",hg="\xE2",dg="\xB4",mg="\u0410",gg="\u0430",vg="\xC6",yg="\xE6",bg="\u2061",kg="\u{1D504}",Dg="\u{1D51E}",Cg="\xC0",xg="\xE0",Ag="\u2135",Eg="\u2135",_g="\u0391",wg="\u03B1",Sg="\u0100",Mg="\u0101",Tg="\u2A3F",Og="&",Fg="&",Ng="\u2A55",Bg="\u2A53",Rg="\u2227",Ig="\u2A5C",Lg="\u2A58",Pg="\u2A5A",qg="\u2220",zg="\u29A4",Vg="\u2220",Hg="\u29A8",jg="\u29A9",Ug="\u29AA",Jg="\u29AB",Kg="\u29AC",Wg="\u29AD",Gg="\u29AE",$g="\u29AF",Zg="\u2221",Yg="\u221F",Qg="\u22BE",Xg="\u299D",tv="\u2222",ev="\xC5",rv="\u237C",nv="\u0104",ov="\u0105",sv="\u{1D538}",iv="\u{1D552}",av="\u2A6F",cv="\u2248",uv="\u2A70",lv="\u224A",fv="\u224B",pv="'",hv="\u2061",dv="\u2248",mv="\u224A",gv="\xC5",vv="\xE5",yv="\u{1D49C}",bv="\u{1D4B6}",kv="\u2254",Dv="*",Cv="\u2248",xv="\u224D",Av="\xC3",Ev="\xE3",_v="\xC4",wv="\xE4",Sv="\u2233",Mv="\u2A11",Tv="\u224C",Ov="\u03F6",Fv="\u2035",Nv="\u223D",Bv="\u22CD",Rv="\u2216",Iv="\u2AE7",Lv="\u22BD",Pv="\u2305",qv="\u2306",zv="\u2305",Vv="\u23B5",Hv="\u23B6",jv="\u224C",Uv="\u0411",Jv="\u0431",Kv="\u201E",Wv="\u2235",Gv="\u2235",$v="\u2235",Zv="\u29B0",Yv="\u03F6",Qv="\u212C",Xv="\u212C",t0="\u0392",e0="\u03B2",r0="\u2136",n0="\u226C",o0="\u{1D505}",s0="\u{1D51F}",i0="\u22C2",a0="\u25EF",c0="\u22C3",u0="\u2A00",l0="\u2A01",f0="\u2A02",p0="\u2A06",h0="\u2605",d0="\u25BD",m0="\u25B3",g0="\u2A04",v0="\u22C1",y0="\u22C0",b0="\u290D",k0="\u29EB",D0="\u25AA",C0="\u25B4",x0="\u25BE",A0="\u25C2",E0="\u25B8",_0="\u2423",w0="\u2592",S0="\u2591",M0="\u2593",T0="\u2588",O0="=\u20E5",F0="\u2261\u20E5",N0="\u2AED",B0="\u2310",R0="\u{1D539}",I0="\u{1D553}",L0="\u22A5",P0="\u22A5",q0="\u22C8",z0="\u29C9",V0="\u2510",H0="\u2555",j0="\u2556",U0="\u2557",J0="\u250C",K0="\u2552",W0="\u2553",G0="\u2554",$0="\u2500",Z0="\u2550",Y0="\u252C",Q0="\u2564",X0="\u2565",ty="\u2566",ey="\u2534",ry="\u2567",ny="\u2568",oy="\u2569",sy="\u229F",iy="\u229E",ay="\u22A0",cy="\u2518",uy="\u255B",ly="\u255C",fy="\u255D",py="\u2514",hy="\u2558",dy="\u2559",my="\u255A",gy="\u2502",vy="\u2551",yy="\u253C",by="\u256A",ky="\u256B",Dy="\u256C",Cy="\u2524",xy="\u2561",Ay="\u2562",Ey="\u2563",_y="\u251C",wy="\u255E",Sy="\u255F",My="\u2560",Ty="\u2035",Oy="\u02D8",Fy="\u02D8",Ny="\xA6",By="\u{1D4B7}",Ry="\u212C",Iy="\u204F",Ly="\u223D",Py="\u22CD",qy="\u29C5",zy="\\",Vy="\u27C8",Hy="\u2022",jy="\u2022",Uy="\u224E",Jy="\u2AAE",Ky="\u224F",Wy="\u224E",Gy="\u224F",$y="\u0106",Zy="\u0107",Yy="\u2A44",Qy="\u2A49",Xy="\u2A4B",tb="\u2229",eb="\u22D2",rb="\u2A47",nb="\u2A40",ob="\u2145",sb="\u2229\uFE00",ib="\u2041",ab="\u02C7",cb="\u212D",ub="\u2A4D",lb="\u010C",fb="\u010D",pb="\xC7",hb="\xE7",db="\u0108",mb="\u0109",gb="\u2230",vb="\u2A4C",yb="\u2A50",bb="\u010A",kb="\u010B",Db="\xB8",Cb="\xB8",xb="\u29B2",Ab="\xA2",Eb="\xB7",_b="\xB7",wb="\u{1D520}",Sb="\u212D",Mb="\u0427",Tb="\u0447",Ob="\u2713",Fb="\u2713",Nb="\u03A7",Bb="\u03C7",Rb="\u02C6",Ib="\u2257",Lb="\u21BA",Pb="\u21BB",qb="\u229B",zb="\u229A",Vb="\u229D",Hb="\u2299",jb="\xAE",Ub="\u24C8",Jb="\u2296",Kb="\u2295",Wb="\u2297",Gb="\u25CB",$b="\u29C3",Zb="\u2257",Yb="\u2A10",Qb="\u2AEF",Xb="\u29C2",tk="\u2232",ek="\u201D",rk="\u2019",nk="\u2663",ok="\u2663",sk=":",ik="\u2237",ak="\u2A74",ck="\u2254",uk="\u2254",lk=",",fk="@",pk="\u2201",hk="\u2218",dk="\u2201",mk="\u2102",gk="\u2245",vk="\u2A6D",yk="\u2261",bk="\u222E",kk="\u222F",Dk="\u222E",Ck="\u{1D554}",xk="\u2102",Ak="\u2210",Ek="\u2210",_k="\xA9",wk="\xA9",Sk="\u2117",Mk="\u2233",Tk="\u21B5",Ok="\u2717",Fk="\u2A2F",Nk="\u{1D49E}",Bk="\u{1D4B8}",Rk="\u2ACF",Ik="\u2AD1",Lk="\u2AD0",Pk="\u2AD2",qk="\u22EF",zk="\u2938",Vk="\u2935",Hk="\u22DE",jk="\u22DF",Uk="\u21B6",Jk="\u293D",Kk="\u2A48",Wk="\u2A46",Gk="\u224D",$k="\u222A",Zk="\u22D3",Yk="\u2A4A",Qk="\u228D",Xk="\u2A45",tD="\u222A\uFE00",eD="\u21B7",rD="\u293C",nD="\u22DE",oD="\u22DF",sD="\u22CE",iD="\u22CF",aD="\xA4",cD="\u21B6",uD="\u21B7",lD="\u22CE",fD="\u22CF",pD="\u2232",hD="\u2231",dD="\u232D",mD="\u2020",gD="\u2021",vD="\u2138",yD="\u2193",bD="\u21A1",kD="\u21D3",DD="\u2010",CD="\u2AE4",xD="\u22A3",AD="\u290F",ED="\u02DD",_D="\u010E",wD="\u010F",SD="\u0414",MD="\u0434",TD="\u2021",OD="\u21CA",FD="\u2145",ND="\u2146",BD="\u2911",RD="\u2A77",ID="\xB0",LD="\u2207",PD="\u0394",qD="\u03B4",zD="\u29B1",VD="\u297F",HD="\u{1D507}",jD="\u{1D521}",UD="\u2965",JD="\u21C3",KD="\u21C2",WD="\xB4",GD="\u02D9",$D="\u02DD",ZD="`",YD="\u02DC",QD="\u22C4",XD="\u22C4",tC="\u22C4",eC="\u2666",rC="\u2666",nC="\xA8",oC="\u2146",sC="\u03DD",iC="\u22F2",aC="\xF7",cC="\xF7",uC="\u22C7",lC="\u22C7",fC="\u0402",pC="\u0452",hC="\u231E",dC="\u230D",mC="$",gC="\u{1D53B}",vC="\u{1D555}",yC="\xA8",bC="\u02D9",kC="\u20DC",DC="\u2250",CC="\u2251",xC="\u2250",AC="\u2238",EC="\u2214",_C="\u22A1",wC="\u2306",SC="\u222F",MC="\xA8",TC="\u21D3",OC="\u21D0",FC="\u21D4",NC="\u2AE4",BC="\u27F8",RC="\u27FA",IC="\u27F9",LC="\u21D2",PC="\u22A8",qC="\u21D1",zC="\u21D5",VC="\u2225",HC="\u2913",jC="\u2193",UC="\u2193",JC="\u21D3",KC="\u21F5",WC="\u0311",GC="\u21CA",$C="\u21C3",ZC="\u21C2",YC="\u2950",QC="\u295E",XC="\u2956",t1="\u21BD",e1="\u295F",r1="\u2957",n1="\u21C1",o1="\u21A7",s1="\u22A4",i1="\u2910",a1="\u231F",c1="\u230C",u1="\u{1D49F}",l1="\u{1D4B9}",f1="\u0405",p1="\u0455",h1="\u29F6",d1="\u0110",m1="\u0111",g1="\u22F1",v1="\u25BF",y1="\u25BE",b1="\u21F5",k1="\u296F",D1="\u29A6",C1="\u040F",x1="\u045F",A1="\u27FF",E1="\xC9",_1="\xE9",w1="\u2A6E",S1="\u011A",M1="\u011B",T1="\xCA",O1="\xEA",F1="\u2256",N1="\u2255",B1="\u042D",R1="\u044D",I1="\u2A77",L1="\u0116",P1="\u0117",q1="\u2251",z1="\u2147",V1="\u2252",H1="\u{1D508}",j1="\u{1D522}",U1="\u2A9A",J1="\xC8",K1="\xE8",W1="\u2A96",G1="\u2A98",$1="\u2A99",Z1="\u2208",Y1="\u23E7",Q1="\u2113",X1="\u2A95",tx="\u2A97",ex="\u0112",rx="\u0113",nx="\u2205",ox="\u2205",sx="\u25FB",ix="\u2205",ax="\u25AB",cx="\u2004",ux="\u2005",lx="\u2003",fx="\u014A",px="\u014B",hx="\u2002",dx="\u0118",mx="\u0119",gx="\u{1D53C}",vx="\u{1D556}",yx="\u22D5",bx="\u29E3",kx="\u2A71",Dx="\u03B5",Cx="\u0395",xx="\u03B5",Ax="\u03F5",Ex="\u2256",_x="\u2255",wx="\u2242",Sx="\u2A96",Mx="\u2A95",Tx="\u2A75",Ox="=",Fx="\u2242",Nx="\u225F",Bx="\u21CC",Rx="\u2261",Ix="\u2A78",Lx="\u29E5",Px="\u2971",qx="\u2253",zx="\u212F",Vx="\u2130",Hx="\u2250",jx="\u2A73",Ux="\u2242",Jx="\u0397",Kx="\u03B7",Wx="\xD0",Gx="\xF0",$x="\xCB",Zx="\xEB",Yx="\u20AC",Qx="!",Xx="\u2203",tA="\u2203",eA="\u2130",rA="\u2147",nA="\u2147",oA="\u2252",sA="\u0424",iA="\u0444",aA="\u2640",cA="\uFB03",uA="\uFB00",lA="\uFB04",fA="\u{1D509}",pA="\u{1D523}",hA="\uFB01",dA="\u25FC",mA="\u25AA",gA="fj",vA="\u266D",yA="\uFB02",bA="\u25B1",kA="\u0192",DA="\u{1D53D}",CA="\u{1D557}",xA="\u2200",AA="\u2200",EA="\u22D4",_A="\u2AD9",wA="\u2131",SA="\u2A0D",MA="\xBD",TA="\u2153",OA="\xBC",FA="\u2155",NA="\u2159",BA="\u215B",RA="\u2154",IA="\u2156",LA="\xBE",PA="\u2157",qA="\u215C",zA="\u2158",VA="\u215A",HA="\u215D",jA="\u215E",UA="\u2044",JA="\u2322",KA="\u{1D4BB}",WA="\u2131",GA="\u01F5",$A="\u0393",ZA="\u03B3",YA="\u03DC",QA="\u03DD",XA="\u2A86",tE="\u011E",eE="\u011F",rE="\u0122",nE="\u011C",oE="\u011D",sE="\u0413",iE="\u0433",aE="\u0120",cE="\u0121",uE="\u2265",lE="\u2267",fE="\u2A8C",pE="\u22DB",hE="\u2265",dE="\u2267",mE="\u2A7E",gE="\u2AA9",vE="\u2A7E",yE="\u2A80",bE="\u2A82",kE="\u2A84",DE="\u22DB\uFE00",CE="\u2A94",xE="\u{1D50A}",AE="\u{1D524}",EE="\u226B",_E="\u22D9",wE="\u22D9",SE="\u2137",ME="\u0403",TE="\u0453",OE="\u2AA5",FE="\u2277",NE="\u2A92",BE="\u2AA4",RE="\u2A8A",IE="\u2A8A",LE="\u2A88",PE="\u2269",qE="\u2A88",zE="\u2269",VE="\u22E7",HE="\u{1D53E}",jE="\u{1D558}",UE="`",JE="\u2265",KE="\u22DB",WE="\u2267",GE="\u2AA2",$E="\u2277",ZE="\u2A7E",YE="\u2273",QE="\u{1D4A2}",XE="\u210A",t_="\u2273",e_="\u2A8E",r_="\u2A90",n_="\u2AA7",o_="\u2A7A",s_=">",i_=">",a_="\u226B",c_="\u22D7",u_="\u2995",l_="\u2A7C",f_="\u2A86",p_="\u2978",h_="\u22D7",d_="\u22DB",m_="\u2A8C",g_="\u2277",v_="\u2273",y_="\u2269\uFE00",b_="\u2269\uFE00",k_="\u02C7",D_="\u200A",C_="\xBD",x_="\u210B",A_="\u042A",E_="\u044A",__="\u2948",w_="\u2194",S_="\u21D4",M_="\u21AD",T_="^",O_="\u210F",F_="\u0124",N_="\u0125",B_="\u2665",R_="\u2665",I_="\u2026",L_="\u22B9",P_="\u{1D525}",q_="\u210C",z_="\u210B",V_="\u2925",H_="\u2926",j_="\u21FF",U_="\u223B",J_="\u21A9",K_="\u21AA",W_="\u{1D559}",G_="\u210D",$_="\u2015",Z_="\u2500",Y_="\u{1D4BD}",Q_="\u210B",X_="\u210F",tw="\u0126",ew="\u0127",rw="\u224E",nw="\u224F",ow="\u2043",sw="\u2010",iw="\xCD",aw="\xED",cw="\u2063",uw="\xCE",lw="\xEE",fw="\u0418",pw="\u0438",hw="\u0130",dw="\u0415",mw="\u0435",gw="\xA1",vw="\u21D4",yw="\u{1D526}",bw="\u2111",kw="\xCC",Dw="\xEC",Cw="\u2148",xw="\u2A0C",Aw="\u222D",Ew="\u29DC",_w="\u2129",ww="\u0132",Sw="\u0133",Mw="\u012A",Tw="\u012B",Ow="\u2111",Fw="\u2148",Nw="\u2110",Bw="\u2111",Rw="\u0131",Iw="\u2111",Lw="\u22B7",Pw="\u01B5",qw="\u21D2",zw="\u2105",Vw="\u221E",Hw="\u29DD",jw="\u0131",Uw="\u22BA",Jw="\u222B",Kw="\u222C",Ww="\u2124",Gw="\u222B",$w="\u22BA",Zw="\u22C2",Yw="\u2A17",Qw="\u2A3C",Xw="\u2063",tS="\u2062",eS="\u0401",rS="\u0451",nS="\u012E",oS="\u012F",sS="\u{1D540}",iS="\u{1D55A}",aS="\u0399",cS="\u03B9",uS="\u2A3C",lS="\xBF",fS="\u{1D4BE}",pS="\u2110",hS="\u2208",dS="\u22F5",mS="\u22F9",gS="\u22F4",vS="\u22F3",yS="\u2208",bS="\u2062",kS="\u0128",DS="\u0129",CS="\u0406",xS="\u0456",AS="\xCF",ES="\xEF",_S="\u0134",wS="\u0135",SS="\u0419",MS="\u0439",TS="\u{1D50D}",OS="\u{1D527}",FS="\u0237",NS="\u{1D541}",BS="\u{1D55B}",RS="\u{1D4A5}",IS="\u{1D4BF}",LS="\u0408",PS="\u0458",qS="\u0404",zS="\u0454",VS="\u039A",HS="\u03BA",jS="\u03F0",US="\u0136",JS="\u0137",KS="\u041A",WS="\u043A",GS="\u{1D50E}",$S="\u{1D528}",ZS="\u0138",YS="\u0425",QS="\u0445",XS="\u040C",tM="\u045C",eM="\u{1D542}",rM="\u{1D55C}",nM="\u{1D4A6}",oM="\u{1D4C0}",sM="\u21DA",iM="\u0139",aM="\u013A",cM="\u29B4",uM="\u2112",lM="\u039B",fM="\u03BB",pM="\u27E8",hM="\u27EA",dM="\u2991",mM="\u27E8",gM="\u2A85",vM="\u2112",yM="\xAB",bM="\u21E4",kM="\u291F",DM="\u2190",CM="\u219E",xM="\u21D0",AM="\u291D",EM="\u21A9",_M="\u21AB",wM="\u2939",SM="\u2973",MM="\u21A2",TM="\u2919",OM="\u291B",FM="\u2AAB",NM="\u2AAD",BM="\u2AAD\uFE00",RM="\u290C",IM="\u290E",LM="\u2772",PM="{",qM="[",zM="\u298B",VM="\u298F",HM="\u298D",jM="\u013D",UM="\u013E",JM="\u013B",KM="\u013C",WM="\u2308",GM="{",$M="\u041B",ZM="\u043B",YM="\u2936",QM="\u201C",XM="\u201E",tT="\u2967",eT="\u294B",rT="\u21B2",nT="\u2264",oT="\u2266",sT="\u27E8",iT="\u21E4",aT="\u2190",cT="\u2190",uT="\u21D0",lT="\u21C6",fT="\u21A2",pT="\u2308",hT="\u27E6",dT="\u2961",mT="\u2959",gT="\u21C3",vT="\u230A",yT="\u21BD",bT="\u21BC",kT="\u21C7",DT="\u2194",CT="\u2194",xT="\u21D4",AT="\u21C6",ET="\u21CB",_T="\u21AD",wT="\u294E",ST="\u21A4",MT="\u22A3",TT="\u295A",OT="\u22CB",FT="\u29CF",NT="\u22B2",BT="\u22B4",RT="\u2951",IT="\u2960",LT="\u2958",PT="\u21BF",qT="\u2952",zT="\u21BC",VT="\u2A8B",HT="\u22DA",jT="\u2264",UT="\u2266",JT="\u2A7D",KT="\u2AA8",WT="\u2A7D",GT="\u2A7F",$T="\u2A81",ZT="\u2A83",YT="\u22DA\uFE00",QT="\u2A93",XT="\u2A85",tO="\u22D6",eO="\u22DA",rO="\u2A8B",nO="\u22DA",oO="\u2266",sO="\u2276",iO="\u2276",aO="\u2AA1",cO="\u2272",uO="\u2A7D",lO="\u2272",fO="\u297C",pO="\u230A",hO="\u{1D50F}",dO="\u{1D529}",mO="\u2276",gO="\u2A91",vO="\u2962",yO="\u21BD",bO="\u21BC",kO="\u296A",DO="\u2584",CO="\u0409",xO="\u0459",AO="\u21C7",EO="\u226A",_O="\u22D8",wO="\u231E",SO="\u21DA",MO="\u296B",TO="\u25FA",OO="\u013F",FO="\u0140",NO="\u23B0",BO="\u23B0",RO="\u2A89",IO="\u2A89",LO="\u2A87",PO="\u2268",qO="\u2A87",zO="\u2268",VO="\u22E6",HO="\u27EC",jO="\u21FD",UO="\u27E6",JO="\u27F5",KO="\u27F5",WO="\u27F8",GO="\u27F7",$O="\u27F7",ZO="\u27FA",YO="\u27FC",QO="\u27F6",XO="\u27F6",tF="\u27F9",eF="\u21AB",rF="\u21AC",nF="\u2985",oF="\u{1D543}",sF="\u{1D55D}",iF="\u2A2D",aF="\u2A34",cF="\u2217",uF="_",lF="\u2199",fF="\u2198",pF="\u25CA",hF="\u25CA",dF="\u29EB",mF="(",gF="\u2993",vF="\u21C6",yF="\u231F",bF="\u21CB",kF="\u296D",DF="\u200E",CF="\u22BF",xF="\u2039",AF="\u{1D4C1}",EF="\u2112",_F="\u21B0",wF="\u21B0",SF="\u2272",MF="\u2A8D",TF="\u2A8F",OF="[",FF="\u2018",NF="\u201A",BF="\u0141",RF="\u0142",IF="\u2AA6",LF="\u2A79",PF="<",qF="<",zF="\u226A",VF="\u22D6",HF="\u22CB",jF="\u22C9",UF="\u2976",JF="\u2A7B",KF="\u25C3",WF="\u22B4",GF="\u25C2",$F="\u2996",ZF="\u294A",YF="\u2966",QF="\u2268\uFE00",XF="\u2268\uFE00",tN="\xAF",eN="\u2642",rN="\u2720",nN="\u2720",oN="\u21A6",sN="\u21A6",iN="\u21A7",aN="\u21A4",cN="\u21A5",uN="\u25AE",lN="\u2A29",fN="\u041C",pN="\u043C",hN="\u2014",dN="\u223A",mN="\u2221",gN="\u205F",vN="\u2133",yN="\u{1D510}",bN="\u{1D52A}",kN="\u2127",DN="\xB5",CN="*",xN="\u2AF0",AN="\u2223",EN="\xB7",_N="\u229F",wN="\u2212",SN="\u2238",MN="\u2A2A",TN="\u2213",ON="\u2ADB",FN="\u2026",NN="\u2213",BN="\u22A7",RN="\u{1D544}",IN="\u{1D55E}",LN="\u2213",PN="\u{1D4C2}",qN="\u2133",zN="\u223E",VN="\u039C",HN="\u03BC",jN="\u22B8",UN="\u22B8",JN="\u2207",KN="\u0143",WN="\u0144",GN="\u2220\u20D2",$N="\u2249",ZN="\u2A70\u0338",YN="\u224B\u0338",QN="\u0149",XN="\u2249",t2="\u266E",e2="\u2115",r2="\u266E",n2="\xA0",o2="\u224E\u0338",s2="\u224F\u0338",i2="\u2A43",a2="\u0147",c2="\u0148",u2="\u0145",l2="\u0146",f2="\u2247",p2="\u2A6D\u0338",h2="\u2A42",d2="\u041D",m2="\u043D",g2="\u2013",v2="\u2924",y2="\u2197",b2="\u21D7",k2="\u2197",D2="\u2260",C2="\u2250\u0338",x2="\u200B",A2="\u200B",E2="\u200B",_2="\u200B",w2="\u2262",S2="\u2928",M2="\u2242\u0338",T2="\u226B",O2="\u226A",F2=`
`,N2="\u2204",B2="\u2204",R2="\u{1D511}",I2="\u{1D52B}",L2="\u2267\u0338",P2="\u2271",q2="\u2271",z2="\u2267\u0338",V2="\u2A7E\u0338",H2="\u2A7E\u0338",j2="\u22D9\u0338",U2="\u2275",J2="\u226B\u20D2",K2="\u226F",W2="\u226F",G2="\u226B\u0338",$2="\u21AE",Z2="\u21CE",Y2="\u2AF2",Q2="\u220B",X2="\u22FC",tB="\u22FA",eB="\u220B",rB="\u040A",nB="\u045A",oB="\u219A",sB="\u21CD",iB="\u2025",aB="\u2266\u0338",cB="\u2270",uB="\u219A",lB="\u21CD",fB="\u21AE",pB="\u21CE",hB="\u2270",dB="\u2266\u0338",mB="\u2A7D\u0338",gB="\u2A7D\u0338",vB="\u226E",yB="\u22D8\u0338",bB="\u2274",kB="\u226A\u20D2",DB="\u226E",CB="\u22EA",xB="\u22EC",AB="\u226A\u0338",EB="\u2224",_B="\u2060",wB="\xA0",SB="\u{1D55F}",MB="\u2115",TB="\u2AEC",OB="\xAC",FB="\u2262",NB="\u226D",BB="\u2226",RB="\u2209",IB="\u2260",LB="\u2242\u0338",PB="\u2204",qB="\u226F",zB="\u2271",VB="\u2267\u0338",HB="\u226B\u0338",jB="\u2279",UB="\u2A7E\u0338",JB="\u2275",KB="\u224E\u0338",WB="\u224F\u0338",GB="\u2209",$B="\u22F5\u0338",ZB="\u22F9\u0338",YB="\u2209",QB="\u22F7",XB="\u22F6",tR="\u29CF\u0338",eR="\u22EA",rR="\u22EC",nR="\u226E",oR="\u2270",sR="\u2278",iR="\u226A\u0338",aR="\u2A7D\u0338",cR="\u2274",uR="\u2AA2\u0338",lR="\u2AA1\u0338",fR="\u220C",pR="\u220C",hR="\u22FE",dR="\u22FD",mR="\u2280",gR="\u2AAF\u0338",vR="\u22E0",yR="\u220C",bR="\u29D0\u0338",kR="\u22EB",DR="\u22ED",CR="\u228F\u0338",xR="\u22E2",AR="\u2290\u0338",ER="\u22E3",_R="\u2282\u20D2",wR="\u2288",SR="\u2281",MR="\u2AB0\u0338",TR="\u22E1",OR="\u227F\u0338",FR="\u2283\u20D2",NR="\u2289",BR="\u2241",RR="\u2244",IR="\u2247",LR="\u2249",PR="\u2224",qR="\u2226",zR="\u2226",VR="\u2AFD\u20E5",HR="\u2202\u0338",jR="\u2A14",UR="\u2280",JR="\u22E0",KR="\u2280",WR="\u2AAF\u0338",GR="\u2AAF\u0338",$R="\u2933\u0338",ZR="\u219B",YR="\u21CF",QR="\u219D\u0338",XR="\u219B",tI="\u21CF",eI="\u22EB",rI="\u22ED",nI="\u2281",oI="\u22E1",sI="\u2AB0\u0338",iI="\u{1D4A9}",aI="\u{1D4C3}",cI="\u2224",uI="\u2226",lI="\u2241",fI="\u2244",pI="\u2244",hI="\u2224",dI="\u2226",mI="\u22E2",gI="\u22E3",vI="\u2284",yI="\u2AC5\u0338",bI="\u2288",kI="\u2282\u20D2",DI="\u2288",CI="\u2AC5\u0338",xI="\u2281",AI="\u2AB0\u0338",EI="\u2285",_I="\u2AC6\u0338",wI="\u2289",SI="\u2283\u20D2",MI="\u2289",TI="\u2AC6\u0338",OI="\u2279",FI="\xD1",NI="\xF1",BI="\u2278",RI="\u22EA",II="\u22EC",LI="\u22EB",PI="\u22ED",qI="\u039D",zI="\u03BD",VI="#",HI="\u2116",jI="\u2007",UI="\u224D\u20D2",JI="\u22AC",KI="\u22AD",WI="\u22AE",GI="\u22AF",$I="\u2265\u20D2",ZI=">\u20D2",YI="\u2904",QI="\u29DE",XI="\u2902",tL="\u2264\u20D2",eL="<\u20D2",rL="\u22B4\u20D2",nL="\u2903",oL="\u22B5\u20D2",sL="\u223C\u20D2",iL="\u2923",aL="\u2196",cL="\u21D6",uL="\u2196",lL="\u2927",fL="\xD3",pL="\xF3",hL="\u229B",dL="\xD4",mL="\xF4",gL="\u229A",vL="\u041E",yL="\u043E",bL="\u229D",kL="\u0150",DL="\u0151",CL="\u2A38",xL="\u2299",AL="\u29BC",EL="\u0152",_L="\u0153",wL="\u29BF",SL="\u{1D512}",ML="\u{1D52C}",TL="\u02DB",OL="\xD2",FL="\xF2",NL="\u29C1",BL="\u29B5",RL="\u03A9",IL="\u222E",LL="\u21BA",PL="\u29BE",qL="\u29BB",zL="\u203E",VL="\u29C0",HL="\u014C",jL="\u014D",UL="\u03A9",JL="\u03C9",KL="\u039F",WL="\u03BF",GL="\u29B6",$L="\u2296",ZL="\u{1D546}",YL="\u{1D560}",QL="\u29B7",XL="\u201C",tP="\u2018",eP="\u29B9",rP="\u2295",nP="\u21BB",oP="\u2A54",sP="\u2228",iP="\u2A5D",aP="\u2134",cP="\u2134",uP="\xAA",lP="\xBA",fP="\u22B6",pP="\u2A56",hP="\u2A57",dP="\u2A5B",mP="\u24C8",gP="\u{1D4AA}",vP="\u2134",yP="\xD8",bP="\xF8",kP="\u2298",DP="\xD5",CP="\xF5",xP="\u2A36",AP="\u2A37",EP="\u2297",_P="\xD6",wP="\xF6",SP="\u233D",MP="\u203E",TP="\u23DE",OP="\u23B4",FP="\u23DC",NP="\xB6",BP="\u2225",RP="\u2225",IP="\u2AF3",LP="\u2AFD",PP="\u2202",qP="\u2202",zP="\u041F",VP="\u043F",HP="%",jP=".",UP="\u2030",JP="\u22A5",KP="\u2031",WP="\u{1D513}",GP="\u{1D52D}",$P="\u03A6",ZP="\u03C6",YP="\u03D5",QP="\u2133",XP="\u260E",tq="\u03A0",eq="\u03C0",rq="\u22D4",nq="\u03D6",oq="\u210F",sq="\u210E",iq="\u210F",aq="\u2A23",cq="\u229E",uq="\u2A22",lq="+",fq="\u2214",pq="\u2A25",hq="\u2A72",dq="\xB1",mq="\xB1",gq="\u2A26",vq="\u2A27",yq="\xB1",bq="\u210C",kq="\u2A15",Dq="\u{1D561}",Cq="\u2119",xq="\xA3",Aq="\u2AB7",Eq="\u2ABB",_q="\u227A",wq="\u227C",Sq="\u2AB7",Mq="\u227A",Tq="\u227C",Oq="\u227A",Fq="\u2AAF",Nq="\u227C",Bq="\u227E",Rq="\u2AAF",Iq="\u2AB9",Lq="\u2AB5",Pq="\u22E8",qq="\u2AAF",zq="\u2AB3",Vq="\u227E",Hq="\u2032",jq="\u2033",Uq="\u2119",Jq="\u2AB9",Kq="\u2AB5",Wq="\u22E8",Gq="\u220F",$q="\u220F",Zq="\u232E",Yq="\u2312",Qq="\u2313",Xq="\u221D",tz="\u221D",ez="\u2237",rz="\u221D",nz="\u227E",oz="\u22B0",sz="\u{1D4AB}",iz="\u{1D4C5}",az="\u03A8",cz="\u03C8",uz="\u2008",lz="\u{1D514}",fz="\u{1D52E}",pz="\u2A0C",hz="\u{1D562}",dz="\u211A",mz="\u2057",gz="\u{1D4AC}",vz="\u{1D4C6}",yz="\u210D",bz="\u2A16",kz="?",Dz="\u225F",Cz='"',xz='"',Az="\u21DB",Ez="\u223D\u0331",_z="\u0154",wz="\u0155",Sz="\u221A",Mz="\u29B3",Tz="\u27E9",Oz="\u27EB",Fz="\u2992",Nz="\u29A5",Bz="\u27E9",Rz="\xBB",Iz="\u2975",Lz="\u21E5",Pz="\u2920",qz="\u2933",zz="\u2192",Vz="\u21A0",Hz="\u21D2",jz="\u291E",Uz="\u21AA",Jz="\u21AC",Kz="\u2945",Wz="\u2974",Gz="\u2916",$z="\u21A3",Zz="\u219D",Yz="\u291A",Qz="\u291C",Xz="\u2236",t3="\u211A",e3="\u290D",r3="\u290F",n3="\u2910",o3="\u2773",s3="}",i3="]",a3="\u298C",c3="\u298E",u3="\u2990",l3="\u0158",f3="\u0159",p3="\u0156",h3="\u0157",d3="\u2309",m3="}",g3="\u0420",v3="\u0440",y3="\u2937",b3="\u2969",k3="\u201D",D3="\u201D",C3="\u21B3",x3="\u211C",A3="\u211B",E3="\u211C",_3="\u211D",w3="\u211C",S3="\u25AD",M3="\xAE",T3="\xAE",O3="\u220B",F3="\u21CB",N3="\u296F",B3="\u297D",R3="\u230B",I3="\u{1D52F}",L3="\u211C",P3="\u2964",q3="\u21C1",z3="\u21C0",V3="\u296C",H3="\u03A1",j3="\u03C1",U3="\u03F1",J3="\u27E9",K3="\u21E5",W3="\u2192",G3="\u2192",$3="\u21D2",Z3="\u21C4",Y3="\u21A3",Q3="\u2309",X3="\u27E7",t8="\u295D",e8="\u2955",r8="\u21C2",n8="\u230B",o8="\u21C1",s8="\u21C0",i8="\u21C4",a8="\u21CC",c8="\u21C9",u8="\u219D",l8="\u21A6",f8="\u22A2",p8="\u295B",h8="\u22CC",d8="\u29D0",m8="\u22B3",g8="\u22B5",v8="\u294F",y8="\u295C",b8="\u2954",k8="\u21BE",D8="\u2953",C8="\u21C0",x8="\u02DA",A8="\u2253",E8="\u21C4",_8="\u21CC",w8="\u200F",S8="\u23B1",M8="\u23B1",T8="\u2AEE",O8="\u27ED",F8="\u21FE",N8="\u27E7",B8="\u2986",R8="\u{1D563}",I8="\u211D",L8="\u2A2E",P8="\u2A35",q8="\u2970",z8=")",V8="\u2994",H8="\u2A12",j8="\u21C9",U8="\u21DB",J8="\u203A",K8="\u{1D4C7}",W8="\u211B",G8="\u21B1",$8="\u21B1",Z8="]",Y8="\u2019",Q8="\u2019",X8="\u22CC",t6="\u22CA",e6="\u25B9",r6="\u22B5",n6="\u25B8",o6="\u29CE",s6="\u29F4",i6="\u2968",a6="\u211E",c6="\u015A",u6="\u015B",l6="\u201A",f6="\u2AB8",p6="\u0160",h6="\u0161",d6="\u2ABC",m6="\u227B",g6="\u227D",v6="\u2AB0",y6="\u2AB4",b6="\u015E",k6="\u015F",D6="\u015C",C6="\u015D",x6="\u2ABA",A6="\u2AB6",E6="\u22E9",_6="\u2A13",w6="\u227F",S6="\u0421",M6="\u0441",T6="\u22A1",O6="\u22C5",F6="\u2A66",N6="\u2925",B6="\u2198",R6="\u21D8",I6="\u2198",L6="\xA7",P6=";",q6="\u2929",z6="\u2216",V6="\u2216",H6="\u2736",j6="\u{1D516}",U6="\u{1D530}",J6="\u2322",K6="\u266F",W6="\u0429",G6="\u0449",$6="\u0428",Z6="\u0448",Y6="\u2193",Q6="\u2190",X6="\u2223",t5="\u2225",e5="\u2192",r5="\u2191",n5="\xAD",o5="\u03A3",s5="\u03C3",i5="\u03C2",a5="\u03C2",c5="\u223C",u5="\u2A6A",l5="\u2243",f5="\u2243",p5="\u2A9E",h5="\u2AA0",d5="\u2A9D",m5="\u2A9F",g5="\u2246",v5="\u2A24",y5="\u2972",b5="\u2190",k5="\u2218",D5="\u2216",C5="\u2A33",x5="\u29E4",A5="\u2223",E5="\u2323",_5="\u2AAA",w5="\u2AAC",S5="\u2AAC\uFE00",M5="\u042C",T5="\u044C",O5="\u233F",F5="\u29C4",N5="/",B5="\u{1D54A}",R5="\u{1D564}",I5="\u2660",L5="\u2660",P5="\u2225",q5="\u2293",z5="\u2293\uFE00",V5="\u2294",H5="\u2294\uFE00",j5="\u221A",U5="\u228F",J5="\u2291",K5="\u228F",W5="\u2291",G5="\u2290",$5="\u2292",Z5="\u2290",Y5="\u2292",Q5="\u25A1",X5="\u25A1",t9="\u2293",e9="\u228F",r9="\u2291",n9="\u2290",o9="\u2292",s9="\u2294",i9="\u25AA",a9="\u25A1",c9="\u25AA",u9="\u2192",l9="\u{1D4AE}",f9="\u{1D4C8}",p9="\u2216",h9="\u2323",d9="\u22C6",m9="\u22C6",g9="\u2606",v9="\u2605",y9="\u03F5",b9="\u03D5",k9="\xAF",D9="\u2282",C9="\u22D0",x9="\u2ABD",A9="\u2AC5",E9="\u2286",_9="\u2AC3",w9="\u2AC1",S9="\u2ACB",M9="\u228A",T9="\u2ABF",O9="\u2979",F9="\u2282",N9="\u22D0",B9="\u2286",R9="\u2AC5",I9="\u2286",L9="\u228A",P9="\u2ACB",q9="\u2AC7",z9="\u2AD5",V9="\u2AD3",H9="\u2AB8",j9="\u227B",U9="\u227D",J9="\u227B",K9="\u2AB0",W9="\u227D",G9="\u227F",$9="\u2AB0",Z9="\u2ABA",Y9="\u2AB6",Q9="\u22E9",X9="\u227F",tV="\u220B",eV="\u2211",rV="\u2211",nV="\u266A",oV="\xB9",sV="\xB2",iV="\xB3",aV="\u2283",cV="\u22D1",uV="\u2ABE",lV="\u2AD8",fV="\u2AC6",pV="\u2287",hV="\u2AC4",dV="\u2283",mV="\u2287",gV="\u27C9",vV="\u2AD7",yV="\u297B",bV="\u2AC2",kV="\u2ACC",DV="\u228B",CV="\u2AC0",xV="\u2283",AV="\u22D1",EV="\u2287",_V="\u2AC6",wV="\u228B",SV="\u2ACC",MV="\u2AC8",TV="\u2AD4",OV="\u2AD6",FV="\u2926",NV="\u2199",BV="\u21D9",RV="\u2199",IV="\u292A",LV="\xDF",PV="	",qV="\u2316",zV="\u03A4",VV="\u03C4",HV="\u23B4",jV="\u0164",UV="\u0165",JV="\u0162",KV="\u0163",WV="\u0422",GV="\u0442",$V="\u20DB",ZV="\u2315",YV="\u{1D517}",QV="\u{1D531}",XV="\u2234",t7="\u2234",e7="\u2234",r7="\u0398",n7="\u03B8",o7="\u03D1",s7="\u03D1",i7="\u2248",a7="\u223C",c7="\u205F\u200A",u7="\u2009",l7="\u2009",f7="\u2248",p7="\u223C",h7="\xDE",d7="\xFE",m7="\u02DC",g7="\u223C",v7="\u2243",y7="\u2245",b7="\u2248",k7="\u2A31",D7="\u22A0",C7="\xD7",x7="\u2A30",A7="\u222D",E7="\u2928",_7="\u2336",w7="\u2AF1",S7="\u22A4",M7="\u{1D54B}",T7="\u{1D565}",O7="\u2ADA",F7="\u2929",N7="\u2034",B7="\u2122",R7="\u2122",I7="\u25B5",L7="\u25BF",P7="\u25C3",q7="\u22B4",z7="\u225C",V7="\u25B9",H7="\u22B5",j7="\u25EC",U7="\u225C",J7="\u2A3A",K7="\u20DB",W7="\u2A39",G7="\u29CD",$7="\u2A3B",Z7="\u23E2",Y7="\u{1D4AF}",Q7="\u{1D4C9}",X7="\u0426",t4="\u0446",e4="\u040B",r4="\u045B",n4="\u0166",o4="\u0167",s4="\u226C",i4="\u219E",a4="\u21A0",c4="\xDA",u4="\xFA",l4="\u2191",f4="\u219F",p4="\u21D1",h4="\u2949",d4="\u040E",m4="\u045E",g4="\u016C",v4="\u016D",y4="\xDB",b4="\xFB",k4="\u0423",D4="\u0443",C4="\u21C5",x4="\u0170",A4="\u0171",E4="\u296E",_4="\u297E",w4="\u{1D518}",S4="\u{1D532}",M4="\xD9",T4="\xF9",O4="\u2963",F4="\u21BF",N4="\u21BE",B4="\u2580",R4="\u231C",I4="\u231C",L4="\u230F",P4="\u25F8",q4="\u016A",z4="\u016B",V4="\xA8",H4="_",j4="\u23DF",U4="\u23B5",J4="\u23DD",K4="\u22C3",W4="\u228E",G4="\u0172",$4="\u0173",Z4="\u{1D54C}",Y4="\u{1D566}",Q4="\u2912",X4="\u2191",tH="\u2191",eH="\u21D1",rH="\u21C5",nH="\u2195",oH="\u2195",sH="\u21D5",iH="\u296E",aH="\u21BF",cH="\u21BE",uH="\u228E",lH="\u2196",fH="\u2197",pH="\u03C5",hH="\u03D2",dH="\u03D2",mH="\u03A5",gH="\u03C5",vH="\u21A5",yH="\u22A5",bH="\u21C8",kH="\u231D",DH="\u231D",CH="\u230E",xH="\u016E",AH="\u016F",EH="\u25F9",_H="\u{1D4B0}",wH="\u{1D4CA}",SH="\u22F0",MH="\u0168",TH="\u0169",OH="\u25B5",FH="\u25B4",NH="\u21C8",BH="\xDC",RH="\xFC",IH="\u29A7",LH="\u299C",PH="\u03F5",qH="\u03F0",zH="\u2205",VH="\u03D5",HH="\u03D6",jH="\u221D",UH="\u2195",JH="\u21D5",KH="\u03F1",WH="\u03C2",GH="\u228A\uFE00",$H="\u2ACB\uFE00",ZH="\u228B\uFE00",YH="\u2ACC\uFE00",QH="\u03D1",XH="\u22B2",tj="\u22B3",ej="\u2AE8",rj="\u2AEB",nj="\u2AE9",oj="\u0412",sj="\u0432",ij="\u22A2",aj="\u22A8",cj="\u22A9",uj="\u22AB",lj="\u2AE6",fj="\u22BB",pj="\u2228",hj="\u22C1",dj="\u225A",mj="\u22EE",gj="|",vj="\u2016",yj="|",bj="\u2016",kj="\u2223",Dj="|",Cj="\u2758",xj="\u2240",Aj="\u200A",Ej="\u{1D519}",_j="\u{1D533}",wj="\u22B2",Sj="\u2282\u20D2",Mj="\u2283\u20D2",Tj="\u{1D54D}",Oj="\u{1D567}",Fj="\u221D",Nj="\u22B3",Bj="\u{1D4B1}",Rj="\u{1D4CB}",Ij="\u2ACB\uFE00",Lj="\u228A\uFE00",Pj="\u2ACC\uFE00",qj="\u228B\uFE00",zj="\u22AA",Vj="\u299A",Hj="\u0174",jj="\u0175",Uj="\u2A5F",Jj="\u2227",Kj="\u22C0",Wj="\u2259",Gj="\u2118",$j="\u{1D51A}",Zj="\u{1D534}",Yj="\u{1D54E}",Qj="\u{1D568}",Xj="\u2118",tU="\u2240",eU="\u2240",rU="\u{1D4B2}",nU="\u{1D4CC}",oU="\u22C2",sU="\u25EF",iU="\u22C3",aU="\u25BD",cU="\u{1D51B}",uU="\u{1D535}",lU="\u27F7",fU="\u27FA",pU="\u039E",hU="\u03BE",dU="\u27F5",mU="\u27F8",gU="\u27FC",vU="\u22FB",yU="\u2A00",bU="\u{1D54F}",kU="\u{1D569}",DU="\u2A01",CU="\u2A02",xU="\u27F6",AU="\u27F9",EU="\u{1D4B3}",_U="\u{1D4CD}",wU="\u2A06",SU="\u2A04",MU="\u25B3",TU="\u22C1",OU="\u22C0",FU="\xDD",NU="\xFD",BU="\u042F",RU="\u044F",IU="\u0176",LU="\u0177",PU="\u042B",qU="\u044B",zU="\xA5",VU="\u{1D51C}",HU="\u{1D536}",jU="\u0407",UU="\u0457",JU="\u{1D550}",KU="\u{1D56A}",WU="\u{1D4B4}",GU="\u{1D4CE}",$U="\u042E",ZU="\u044E",YU="\xFF",QU="\u0178",XU="\u0179",tJ="\u017A",eJ="\u017D",rJ="\u017E",nJ="\u0417",oJ="\u0437",sJ="\u017B",iJ="\u017C",aJ="\u2128",cJ="\u200B",uJ="\u0396",lJ="\u03B6",fJ="\u{1D537}",pJ="\u2128",hJ="\u0416",dJ="\u0436",mJ="\u21DD",gJ="\u{1D56B}",vJ="\u2124",yJ="\u{1D4B5}",bJ="\u{1D4CF}",kJ="\u200D",DJ="\u200C",CJ={Aacute:sg,aacute:ig,Abreve:ag,abreve:cg,ac:ug,acd:lg,acE:fg,Acirc:pg,acirc:hg,acute:dg,Acy:mg,acy:gg,AElig:vg,aelig:yg,af:bg,Afr:kg,afr:Dg,Agrave:Cg,agrave:xg,alefsym:Ag,aleph:Eg,Alpha:_g,alpha:wg,Amacr:Sg,amacr:Mg,amalg:Tg,amp:Og,AMP:Fg,andand:Ng,And:Bg,and:Rg,andd:Ig,andslope:Lg,andv:Pg,ang:qg,ange:zg,angle:Vg,angmsdaa:Hg,angmsdab:jg,angmsdac:Ug,angmsdad:Jg,angmsdae:Kg,angmsdaf:Wg,angmsdag:Gg,angmsdah:$g,angmsd:Zg,angrt:Yg,angrtvb:Qg,angrtvbd:Xg,angsph:tv,angst:ev,angzarr:rv,Aogon:nv,aogon:ov,Aopf:sv,aopf:iv,apacir:av,ap:cv,apE:uv,ape:lv,apid:fv,apos:pv,ApplyFunction:hv,approx:dv,approxeq:mv,Aring:gv,aring:vv,Ascr:yv,ascr:bv,Assign:kv,ast:Dv,asymp:Cv,asympeq:xv,Atilde:Av,atilde:Ev,Auml:_v,auml:wv,awconint:Sv,awint:Mv,backcong:Tv,backepsilon:Ov,backprime:Fv,backsim:Nv,backsimeq:Bv,Backslash:Rv,Barv:Iv,barvee:Lv,barwed:Pv,Barwed:qv,barwedge:zv,bbrk:Vv,bbrktbrk:Hv,bcong:jv,Bcy:Uv,bcy:Jv,bdquo:Kv,becaus:Wv,because:Gv,Because:$v,bemptyv:Zv,bepsi:Yv,bernou:Qv,Bernoullis:Xv,Beta:t0,beta:e0,beth:r0,between:n0,Bfr:o0,bfr:s0,bigcap:i0,bigcirc:a0,bigcup:c0,bigodot:u0,bigoplus:l0,bigotimes:f0,bigsqcup:p0,bigstar:h0,bigtriangledown:d0,bigtriangleup:m0,biguplus:g0,bigvee:v0,bigwedge:y0,bkarow:b0,blacklozenge:k0,blacksquare:D0,blacktriangle:C0,blacktriangledown:x0,blacktriangleleft:A0,blacktriangleright:E0,blank:_0,blk12:w0,blk14:S0,blk34:M0,block:T0,bne:O0,bnequiv:F0,bNot:N0,bnot:B0,Bopf:R0,bopf:I0,bot:L0,bottom:P0,bowtie:q0,boxbox:z0,boxdl:V0,boxdL:H0,boxDl:j0,boxDL:U0,boxdr:J0,boxdR:K0,boxDr:W0,boxDR:G0,boxh:$0,boxH:Z0,boxhd:Y0,boxHd:Q0,boxhD:X0,boxHD:ty,boxhu:ey,boxHu:ry,boxhU:ny,boxHU:oy,boxminus:sy,boxplus:iy,boxtimes:ay,boxul:cy,boxuL:uy,boxUl:ly,boxUL:fy,boxur:py,boxuR:hy,boxUr:dy,boxUR:my,boxv:gy,boxV:vy,boxvh:yy,boxvH:by,boxVh:ky,boxVH:Dy,boxvl:Cy,boxvL:xy,boxVl:Ay,boxVL:Ey,boxvr:_y,boxvR:wy,boxVr:Sy,boxVR:My,bprime:Ty,breve:Oy,Breve:Fy,brvbar:Ny,bscr:By,Bscr:Ry,bsemi:Iy,bsim:Ly,bsime:Py,bsolb:qy,bsol:zy,bsolhsub:Vy,bull:Hy,bullet:jy,bump:Uy,bumpE:Jy,bumpe:Ky,Bumpeq:Wy,bumpeq:Gy,Cacute:$y,cacute:Zy,capand:Yy,capbrcup:Qy,capcap:Xy,cap:tb,Cap:eb,capcup:rb,capdot:nb,CapitalDifferentialD:ob,caps:sb,caret:ib,caron:ab,Cayleys:cb,ccaps:ub,Ccaron:lb,ccaron:fb,Ccedil:pb,ccedil:hb,Ccirc:db,ccirc:mb,Cconint:gb,ccups:vb,ccupssm:yb,Cdot:bb,cdot:kb,cedil:Db,Cedilla:Cb,cemptyv:xb,cent:Ab,centerdot:Eb,CenterDot:_b,cfr:wb,Cfr:Sb,CHcy:Mb,chcy:Tb,check:Ob,checkmark:Fb,Chi:Nb,chi:Bb,circ:Rb,circeq:Ib,circlearrowleft:Lb,circlearrowright:Pb,circledast:qb,circledcirc:zb,circleddash:Vb,CircleDot:Hb,circledR:jb,circledS:Ub,CircleMinus:Jb,CirclePlus:Kb,CircleTimes:Wb,cir:Gb,cirE:$b,cire:Zb,cirfnint:Yb,cirmid:Qb,cirscir:Xb,ClockwiseContourIntegral:tk,CloseCurlyDoubleQuote:ek,CloseCurlyQuote:rk,clubs:nk,clubsuit:ok,colon:sk,Colon:ik,Colone:ak,colone:ck,coloneq:uk,comma:lk,commat:fk,comp:pk,compfn:hk,complement:dk,complexes:mk,cong:gk,congdot:vk,Congruent:yk,conint:bk,Conint:kk,ContourIntegral:Dk,copf:Ck,Copf:xk,coprod:Ak,Coproduct:Ek,copy:_k,COPY:wk,copysr:Sk,CounterClockwiseContourIntegral:Mk,crarr:Tk,cross:Ok,Cross:Fk,Cscr:Nk,cscr:Bk,csub:Rk,csube:Ik,csup:Lk,csupe:Pk,ctdot:qk,cudarrl:zk,cudarrr:Vk,cuepr:Hk,cuesc:jk,cularr:Uk,cularrp:Jk,cupbrcap:Kk,cupcap:Wk,CupCap:Gk,cup:$k,Cup:Zk,cupcup:Yk,cupdot:Qk,cupor:Xk,cups:tD,curarr:eD,curarrm:rD,curlyeqprec:nD,curlyeqsucc:oD,curlyvee:sD,curlywedge:iD,curren:aD,curvearrowleft:cD,curvearrowright:uD,cuvee:lD,cuwed:fD,cwconint:pD,cwint:hD,cylcty:dD,dagger:mD,Dagger:gD,daleth:vD,darr:yD,Darr:bD,dArr:kD,dash:DD,Dashv:CD,dashv:xD,dbkarow:AD,dblac:ED,Dcaron:_D,dcaron:wD,Dcy:SD,dcy:MD,ddagger:TD,ddarr:OD,DD:FD,dd:ND,DDotrahd:BD,ddotseq:RD,deg:ID,Del:LD,Delta:PD,delta:qD,demptyv:zD,dfisht:VD,Dfr:HD,dfr:jD,dHar:UD,dharl:JD,dharr:KD,DiacriticalAcute:WD,DiacriticalDot:GD,DiacriticalDoubleAcute:$D,DiacriticalGrave:ZD,DiacriticalTilde:YD,diam:QD,diamond:XD,Diamond:tC,diamondsuit:eC,diams:rC,die:nC,DifferentialD:oC,digamma:sC,disin:iC,div:aC,divide:cC,divideontimes:uC,divonx:lC,DJcy:fC,djcy:pC,dlcorn:hC,dlcrop:dC,dollar:mC,Dopf:gC,dopf:vC,Dot:yC,dot:bC,DotDot:kC,doteq:DC,doteqdot:CC,DotEqual:xC,dotminus:AC,dotplus:EC,dotsquare:_C,doublebarwedge:wC,DoubleContourIntegral:SC,DoubleDot:MC,DoubleDownArrow:TC,DoubleLeftArrow:OC,DoubleLeftRightArrow:FC,DoubleLeftTee:NC,DoubleLongLeftArrow:BC,DoubleLongLeftRightArrow:RC,DoubleLongRightArrow:IC,DoubleRightArrow:LC,DoubleRightTee:PC,DoubleUpArrow:qC,DoubleUpDownArrow:zC,DoubleVerticalBar:VC,DownArrowBar:HC,downarrow:jC,DownArrow:UC,Downarrow:JC,DownArrowUpArrow:KC,DownBreve:WC,downdownarrows:GC,downharpoonleft:$C,downharpoonright:ZC,DownLeftRightVector:YC,DownLeftTeeVector:QC,DownLeftVectorBar:XC,DownLeftVector:t1,DownRightTeeVector:e1,DownRightVectorBar:r1,DownRightVector:n1,DownTeeArrow:o1,DownTee:s1,drbkarow:i1,drcorn:a1,drcrop:c1,Dscr:u1,dscr:l1,DScy:f1,dscy:p1,dsol:h1,Dstrok:d1,dstrok:m1,dtdot:g1,dtri:v1,dtrif:y1,duarr:b1,duhar:k1,dwangle:D1,DZcy:C1,dzcy:x1,dzigrarr:A1,Eacute:E1,eacute:_1,easter:w1,Ecaron:S1,ecaron:M1,Ecirc:T1,ecirc:O1,ecir:F1,ecolon:N1,Ecy:B1,ecy:R1,eDDot:I1,Edot:L1,edot:P1,eDot:q1,ee:z1,efDot:V1,Efr:H1,efr:j1,eg:U1,Egrave:J1,egrave:K1,egs:W1,egsdot:G1,el:$1,Element:Z1,elinters:Y1,ell:Q1,els:X1,elsdot:tx,Emacr:ex,emacr:rx,empty:nx,emptyset:ox,EmptySmallSquare:sx,emptyv:ix,EmptyVerySmallSquare:ax,emsp13:cx,emsp14:ux,emsp:lx,ENG:fx,eng:px,ensp:hx,Eogon:dx,eogon:mx,Eopf:gx,eopf:vx,epar:yx,eparsl:bx,eplus:kx,epsi:Dx,Epsilon:Cx,epsilon:xx,epsiv:Ax,eqcirc:Ex,eqcolon:_x,eqsim:wx,eqslantgtr:Sx,eqslantless:Mx,Equal:Tx,equals:Ox,EqualTilde:Fx,equest:Nx,Equilibrium:Bx,equiv:Rx,equivDD:Ix,eqvparsl:Lx,erarr:Px,erDot:qx,escr:zx,Escr:Vx,esdot:Hx,Esim:jx,esim:Ux,Eta:Jx,eta:Kx,ETH:Wx,eth:Gx,Euml:$x,euml:Zx,euro:Yx,excl:Qx,exist:Xx,Exists:tA,expectation:eA,exponentiale:rA,ExponentialE:nA,fallingdotseq:oA,Fcy:sA,fcy:iA,female:aA,ffilig:cA,fflig:uA,ffllig:lA,Ffr:fA,ffr:pA,filig:hA,FilledSmallSquare:dA,FilledVerySmallSquare:mA,fjlig:gA,flat:vA,fllig:yA,fltns:bA,fnof:kA,Fopf:DA,fopf:CA,forall:xA,ForAll:AA,fork:EA,forkv:_A,Fouriertrf:wA,fpartint:SA,frac12:MA,frac13:TA,frac14:OA,frac15:FA,frac16:NA,frac18:BA,frac23:RA,frac25:IA,frac34:LA,frac35:PA,frac38:qA,frac45:zA,frac56:VA,frac58:HA,frac78:jA,frasl:UA,frown:JA,fscr:KA,Fscr:WA,gacute:GA,Gamma:$A,gamma:ZA,Gammad:YA,gammad:QA,gap:XA,Gbreve:tE,gbreve:eE,Gcedil:rE,Gcirc:nE,gcirc:oE,Gcy:sE,gcy:iE,Gdot:aE,gdot:cE,ge:uE,gE:lE,gEl:fE,gel:pE,geq:hE,geqq:dE,geqslant:mE,gescc:gE,ges:vE,gesdot:yE,gesdoto:bE,gesdotol:kE,gesl:DE,gesles:CE,Gfr:xE,gfr:AE,gg:EE,Gg:_E,ggg:wE,gimel:SE,GJcy:ME,gjcy:TE,gla:OE,gl:FE,glE:NE,glj:BE,gnap:RE,gnapprox:IE,gne:LE,gnE:PE,gneq:qE,gneqq:zE,gnsim:VE,Gopf:HE,gopf:jE,grave:UE,GreaterEqual:JE,GreaterEqualLess:KE,GreaterFullEqual:WE,GreaterGreater:GE,GreaterLess:$E,GreaterSlantEqual:ZE,GreaterTilde:YE,Gscr:QE,gscr:XE,gsim:t_,gsime:e_,gsiml:r_,gtcc:n_,gtcir:o_,gt:s_,GT:i_,Gt:a_,gtdot:c_,gtlPar:u_,gtquest:l_,gtrapprox:f_,gtrarr:p_,gtrdot:h_,gtreqless:d_,gtreqqless:m_,gtrless:g_,gtrsim:v_,gvertneqq:y_,gvnE:b_,Hacek:k_,hairsp:D_,half:C_,hamilt:x_,HARDcy:A_,hardcy:E_,harrcir:__,harr:w_,hArr:S_,harrw:M_,Hat:T_,hbar:O_,Hcirc:F_,hcirc:N_,hearts:B_,heartsuit:R_,hellip:I_,hercon:L_,hfr:P_,Hfr:q_,HilbertSpace:z_,hksearow:V_,hkswarow:H_,hoarr:j_,homtht:U_,hookleftarrow:J_,hookrightarrow:K_,hopf:W_,Hopf:G_,horbar:$_,HorizontalLine:Z_,hscr:Y_,Hscr:Q_,hslash:X_,Hstrok:tw,hstrok:ew,HumpDownHump:rw,HumpEqual:nw,hybull:ow,hyphen:sw,Iacute:iw,iacute:aw,ic:cw,Icirc:uw,icirc:lw,Icy:fw,icy:pw,Idot:hw,IEcy:dw,iecy:mw,iexcl:gw,iff:vw,ifr:yw,Ifr:bw,Igrave:kw,igrave:Dw,ii:Cw,iiiint:xw,iiint:Aw,iinfin:Ew,iiota:_w,IJlig:ww,ijlig:Sw,Imacr:Mw,imacr:Tw,image:Ow,ImaginaryI:Fw,imagline:Nw,imagpart:Bw,imath:Rw,Im:Iw,imof:Lw,imped:Pw,Implies:qw,incare:zw,in:"\u2208",infin:Vw,infintie:Hw,inodot:jw,intcal:Uw,int:Jw,Int:Kw,integers:Ww,Integral:Gw,intercal:$w,Intersection:Zw,intlarhk:Yw,intprod:Qw,InvisibleComma:Xw,InvisibleTimes:tS,IOcy:eS,iocy:rS,Iogon:nS,iogon:oS,Iopf:sS,iopf:iS,Iota:aS,iota:cS,iprod:uS,iquest:lS,iscr:fS,Iscr:pS,isin:hS,isindot:dS,isinE:mS,isins:gS,isinsv:vS,isinv:yS,it:bS,Itilde:kS,itilde:DS,Iukcy:CS,iukcy:xS,Iuml:AS,iuml:ES,Jcirc:_S,jcirc:wS,Jcy:SS,jcy:MS,Jfr:TS,jfr:OS,jmath:FS,Jopf:NS,jopf:BS,Jscr:RS,jscr:IS,Jsercy:LS,jsercy:PS,Jukcy:qS,jukcy:zS,Kappa:VS,kappa:HS,kappav:jS,Kcedil:US,kcedil:JS,Kcy:KS,kcy:WS,Kfr:GS,kfr:$S,kgreen:ZS,KHcy:YS,khcy:QS,KJcy:XS,kjcy:tM,Kopf:eM,kopf:rM,Kscr:nM,kscr:oM,lAarr:sM,Lacute:iM,lacute:aM,laemptyv:cM,lagran:uM,Lambda:lM,lambda:fM,lang:pM,Lang:hM,langd:dM,langle:mM,lap:gM,Laplacetrf:vM,laquo:yM,larrb:bM,larrbfs:kM,larr:DM,Larr:CM,lArr:xM,larrfs:AM,larrhk:EM,larrlp:_M,larrpl:wM,larrsim:SM,larrtl:MM,latail:TM,lAtail:OM,lat:FM,late:NM,lates:BM,lbarr:RM,lBarr:IM,lbbrk:LM,lbrace:PM,lbrack:qM,lbrke:zM,lbrksld:VM,lbrkslu:HM,Lcaron:jM,lcaron:UM,Lcedil:JM,lcedil:KM,lceil:WM,lcub:GM,Lcy:$M,lcy:ZM,ldca:YM,ldquo:QM,ldquor:XM,ldrdhar:tT,ldrushar:eT,ldsh:rT,le:nT,lE:oT,LeftAngleBracket:sT,LeftArrowBar:iT,leftarrow:aT,LeftArrow:cT,Leftarrow:uT,LeftArrowRightArrow:lT,leftarrowtail:fT,LeftCeiling:pT,LeftDoubleBracket:hT,LeftDownTeeVector:dT,LeftDownVectorBar:mT,LeftDownVector:gT,LeftFloor:vT,leftharpoondown:yT,leftharpoonup:bT,leftleftarrows:kT,leftrightarrow:DT,LeftRightArrow:CT,Leftrightarrow:xT,leftrightarrows:AT,leftrightharpoons:ET,leftrightsquigarrow:_T,LeftRightVector:wT,LeftTeeArrow:ST,LeftTee:MT,LeftTeeVector:TT,leftthreetimes:OT,LeftTriangleBar:FT,LeftTriangle:NT,LeftTriangleEqual:BT,LeftUpDownVector:RT,LeftUpTeeVector:IT,LeftUpVectorBar:LT,LeftUpVector:PT,LeftVectorBar:qT,LeftVector:zT,lEg:VT,leg:HT,leq:jT,leqq:UT,leqslant:JT,lescc:KT,les:WT,lesdot:GT,lesdoto:$T,lesdotor:ZT,lesg:YT,lesges:QT,lessapprox:XT,lessdot:tO,lesseqgtr:eO,lesseqqgtr:rO,LessEqualGreater:nO,LessFullEqual:oO,LessGreater:sO,lessgtr:iO,LessLess:aO,lesssim:cO,LessSlantEqual:uO,LessTilde:lO,lfisht:fO,lfloor:pO,Lfr:hO,lfr:dO,lg:mO,lgE:gO,lHar:vO,lhard:yO,lharu:bO,lharul:kO,lhblk:DO,LJcy:CO,ljcy:xO,llarr:AO,ll:EO,Ll:_O,llcorner:wO,Lleftarrow:SO,llhard:MO,lltri:TO,Lmidot:OO,lmidot:FO,lmoustache:NO,lmoust:BO,lnap:RO,lnapprox:IO,lne:LO,lnE:PO,lneq:qO,lneqq:zO,lnsim:VO,loang:HO,loarr:jO,lobrk:UO,longleftarrow:JO,LongLeftArrow:KO,Longleftarrow:WO,longleftrightarrow:GO,LongLeftRightArrow:$O,Longleftrightarrow:ZO,longmapsto:YO,longrightarrow:QO,LongRightArrow:XO,Longrightarrow:tF,looparrowleft:eF,looparrowright:rF,lopar:nF,Lopf:oF,lopf:sF,loplus:iF,lotimes:aF,lowast:cF,lowbar:uF,LowerLeftArrow:lF,LowerRightArrow:fF,loz:pF,lozenge:hF,lozf:dF,lpar:mF,lparlt:gF,lrarr:vF,lrcorner:yF,lrhar:bF,lrhard:kF,lrm:DF,lrtri:CF,lsaquo:xF,lscr:AF,Lscr:EF,lsh:_F,Lsh:wF,lsim:SF,lsime:MF,lsimg:TF,lsqb:OF,lsquo:FF,lsquor:NF,Lstrok:BF,lstrok:RF,ltcc:IF,ltcir:LF,lt:PF,LT:qF,Lt:zF,ltdot:VF,lthree:HF,ltimes:jF,ltlarr:UF,ltquest:JF,ltri:KF,ltrie:WF,ltrif:GF,ltrPar:$F,lurdshar:ZF,luruhar:YF,lvertneqq:QF,lvnE:XF,macr:tN,male:eN,malt:rN,maltese:nN,Map:"\u2905",map:oN,mapsto:sN,mapstodown:iN,mapstoleft:aN,mapstoup:cN,marker:uN,mcomma:lN,Mcy:fN,mcy:pN,mdash:hN,mDDot:dN,measuredangle:mN,MediumSpace:gN,Mellintrf:vN,Mfr:yN,mfr:bN,mho:kN,micro:DN,midast:CN,midcir:xN,mid:AN,middot:EN,minusb:_N,minus:wN,minusd:SN,minusdu:MN,MinusPlus:TN,mlcp:ON,mldr:FN,mnplus:NN,models:BN,Mopf:RN,mopf:IN,mp:LN,mscr:PN,Mscr:qN,mstpos:zN,Mu:VN,mu:HN,multimap:jN,mumap:UN,nabla:JN,Nacute:KN,nacute:WN,nang:GN,nap:$N,napE:ZN,napid:YN,napos:QN,napprox:XN,natural:t2,naturals:e2,natur:r2,nbsp:n2,nbump:o2,nbumpe:s2,ncap:i2,Ncaron:a2,ncaron:c2,Ncedil:u2,ncedil:l2,ncong:f2,ncongdot:p2,ncup:h2,Ncy:d2,ncy:m2,ndash:g2,nearhk:v2,nearr:y2,neArr:b2,nearrow:k2,ne:D2,nedot:C2,NegativeMediumSpace:x2,NegativeThickSpace:A2,NegativeThinSpace:E2,NegativeVeryThinSpace:_2,nequiv:w2,nesear:S2,nesim:M2,NestedGreaterGreater:T2,NestedLessLess:O2,NewLine:F2,nexist:N2,nexists:B2,Nfr:R2,nfr:I2,ngE:L2,nge:P2,ngeq:q2,ngeqq:z2,ngeqslant:V2,nges:H2,nGg:j2,ngsim:U2,nGt:J2,ngt:K2,ngtr:W2,nGtv:G2,nharr:$2,nhArr:Z2,nhpar:Y2,ni:Q2,nis:X2,nisd:tB,niv:eB,NJcy:rB,njcy:nB,nlarr:oB,nlArr:sB,nldr:iB,nlE:aB,nle:cB,nleftarrow:uB,nLeftarrow:lB,nleftrightarrow:fB,nLeftrightarrow:pB,nleq:hB,nleqq:dB,nleqslant:mB,nles:gB,nless:vB,nLl:yB,nlsim:bB,nLt:kB,nlt:DB,nltri:CB,nltrie:xB,nLtv:AB,nmid:EB,NoBreak:_B,NonBreakingSpace:wB,nopf:SB,Nopf:MB,Not:TB,not:OB,NotCongruent:FB,NotCupCap:NB,NotDoubleVerticalBar:BB,NotElement:RB,NotEqual:IB,NotEqualTilde:LB,NotExists:PB,NotGreater:qB,NotGreaterEqual:zB,NotGreaterFullEqual:VB,NotGreaterGreater:HB,NotGreaterLess:jB,NotGreaterSlantEqual:UB,NotGreaterTilde:JB,NotHumpDownHump:KB,NotHumpEqual:WB,notin:GB,notindot:$B,notinE:ZB,notinva:YB,notinvb:QB,notinvc:XB,NotLeftTriangleBar:tR,NotLeftTriangle:eR,NotLeftTriangleEqual:rR,NotLess:nR,NotLessEqual:oR,NotLessGreater:sR,NotLessLess:iR,NotLessSlantEqual:aR,NotLessTilde:cR,NotNestedGreaterGreater:uR,NotNestedLessLess:lR,notni:fR,notniva:pR,notnivb:hR,notnivc:dR,NotPrecedes:mR,NotPrecedesEqual:gR,NotPrecedesSlantEqual:vR,NotReverseElement:yR,NotRightTriangleBar:bR,NotRightTriangle:kR,NotRightTriangleEqual:DR,NotSquareSubset:CR,NotSquareSubsetEqual:xR,NotSquareSuperset:AR,NotSquareSupersetEqual:ER,NotSubset:_R,NotSubsetEqual:wR,NotSucceeds:SR,NotSucceedsEqual:MR,NotSucceedsSlantEqual:TR,NotSucceedsTilde:OR,NotSuperset:FR,NotSupersetEqual:NR,NotTilde:BR,NotTildeEqual:RR,NotTildeFullEqual:IR,NotTildeTilde:LR,NotVerticalBar:PR,nparallel:qR,npar:zR,nparsl:VR,npart:HR,npolint:jR,npr:UR,nprcue:JR,nprec:KR,npreceq:WR,npre:GR,nrarrc:$R,nrarr:ZR,nrArr:YR,nrarrw:QR,nrightarrow:XR,nRightarrow:tI,nrtri:eI,nrtrie:rI,nsc:nI,nsccue:oI,nsce:sI,Nscr:iI,nscr:aI,nshortmid:cI,nshortparallel:uI,nsim:lI,nsime:fI,nsimeq:pI,nsmid:hI,nspar:dI,nsqsube:mI,nsqsupe:gI,nsub:vI,nsubE:yI,nsube:bI,nsubset:kI,nsubseteq:DI,nsubseteqq:CI,nsucc:xI,nsucceq:AI,nsup:EI,nsupE:_I,nsupe:wI,nsupset:SI,nsupseteq:MI,nsupseteqq:TI,ntgl:OI,Ntilde:FI,ntilde:NI,ntlg:BI,ntriangleleft:RI,ntrianglelefteq:II,ntriangleright:LI,ntrianglerighteq:PI,Nu:qI,nu:zI,num:VI,numero:HI,numsp:jI,nvap:UI,nvdash:JI,nvDash:KI,nVdash:WI,nVDash:GI,nvge:$I,nvgt:ZI,nvHarr:YI,nvinfin:QI,nvlArr:XI,nvle:tL,nvlt:eL,nvltrie:rL,nvrArr:nL,nvrtrie:oL,nvsim:sL,nwarhk:iL,nwarr:aL,nwArr:cL,nwarrow:uL,nwnear:lL,Oacute:fL,oacute:pL,oast:hL,Ocirc:dL,ocirc:mL,ocir:gL,Ocy:vL,ocy:yL,odash:bL,Odblac:kL,odblac:DL,odiv:CL,odot:xL,odsold:AL,OElig:EL,oelig:_L,ofcir:wL,Ofr:SL,ofr:ML,ogon:TL,Ograve:OL,ograve:FL,ogt:NL,ohbar:BL,ohm:RL,oint:IL,olarr:LL,olcir:PL,olcross:qL,oline:zL,olt:VL,Omacr:HL,omacr:jL,Omega:UL,omega:JL,Omicron:KL,omicron:WL,omid:GL,ominus:$L,Oopf:ZL,oopf:YL,opar:QL,OpenCurlyDoubleQuote:XL,OpenCurlyQuote:tP,operp:eP,oplus:rP,orarr:nP,Or:oP,or:sP,ord:iP,order:aP,orderof:cP,ordf:uP,ordm:lP,origof:fP,oror:pP,orslope:hP,orv:dP,oS:mP,Oscr:gP,oscr:vP,Oslash:yP,oslash:bP,osol:kP,Otilde:DP,otilde:CP,otimesas:xP,Otimes:AP,otimes:EP,Ouml:_P,ouml:wP,ovbar:SP,OverBar:MP,OverBrace:TP,OverBracket:OP,OverParenthesis:FP,para:NP,parallel:BP,par:RP,parsim:IP,parsl:LP,part:PP,PartialD:qP,Pcy:zP,pcy:VP,percnt:HP,period:jP,permil:UP,perp:JP,pertenk:KP,Pfr:WP,pfr:GP,Phi:$P,phi:ZP,phiv:YP,phmmat:QP,phone:XP,Pi:tq,pi:eq,pitchfork:rq,piv:nq,planck:oq,planckh:sq,plankv:iq,plusacir:aq,plusb:cq,pluscir:uq,plus:lq,plusdo:fq,plusdu:pq,pluse:hq,PlusMinus:dq,plusmn:mq,plussim:gq,plustwo:vq,pm:yq,Poincareplane:bq,pointint:kq,popf:Dq,Popf:Cq,pound:xq,prap:Aq,Pr:Eq,pr:_q,prcue:wq,precapprox:Sq,prec:Mq,preccurlyeq:Tq,Precedes:Oq,PrecedesEqual:Fq,PrecedesSlantEqual:Nq,PrecedesTilde:Bq,preceq:Rq,precnapprox:Iq,precneqq:Lq,precnsim:Pq,pre:qq,prE:zq,precsim:Vq,prime:Hq,Prime:jq,primes:Uq,prnap:Jq,prnE:Kq,prnsim:Wq,prod:Gq,Product:$q,profalar:Zq,profline:Yq,profsurf:Qq,prop:Xq,Proportional:tz,Proportion:ez,propto:rz,prsim:nz,prurel:oz,Pscr:sz,pscr:iz,Psi:az,psi:cz,puncsp:uz,Qfr:lz,qfr:fz,qint:pz,qopf:hz,Qopf:dz,qprime:mz,Qscr:gz,qscr:vz,quaternions:yz,quatint:bz,quest:kz,questeq:Dz,quot:Cz,QUOT:xz,rAarr:Az,race:Ez,Racute:_z,racute:wz,radic:Sz,raemptyv:Mz,rang:Tz,Rang:Oz,rangd:Fz,range:Nz,rangle:Bz,raquo:Rz,rarrap:Iz,rarrb:Lz,rarrbfs:Pz,rarrc:qz,rarr:zz,Rarr:Vz,rArr:Hz,rarrfs:jz,rarrhk:Uz,rarrlp:Jz,rarrpl:Kz,rarrsim:Wz,Rarrtl:Gz,rarrtl:$z,rarrw:Zz,ratail:Yz,rAtail:Qz,ratio:Xz,rationals:t3,rbarr:e3,rBarr:r3,RBarr:n3,rbbrk:o3,rbrace:s3,rbrack:i3,rbrke:a3,rbrksld:c3,rbrkslu:u3,Rcaron:l3,rcaron:f3,Rcedil:p3,rcedil:h3,rceil:d3,rcub:m3,Rcy:g3,rcy:v3,rdca:y3,rdldhar:b3,rdquo:k3,rdquor:D3,rdsh:C3,real:x3,realine:A3,realpart:E3,reals:_3,Re:w3,rect:S3,reg:M3,REG:T3,ReverseElement:O3,ReverseEquilibrium:F3,ReverseUpEquilibrium:N3,rfisht:B3,rfloor:R3,rfr:I3,Rfr:L3,rHar:P3,rhard:q3,rharu:z3,rharul:V3,Rho:H3,rho:j3,rhov:U3,RightAngleBracket:J3,RightArrowBar:K3,rightarrow:W3,RightArrow:G3,Rightarrow:$3,RightArrowLeftArrow:Z3,rightarrowtail:Y3,RightCeiling:Q3,RightDoubleBracket:X3,RightDownTeeVector:t8,RightDownVectorBar:e8,RightDownVector:r8,RightFloor:n8,rightharpoondown:o8,rightharpoonup:s8,rightleftarrows:i8,rightleftharpoons:a8,rightrightarrows:c8,rightsquigarrow:u8,RightTeeArrow:l8,RightTee:f8,RightTeeVector:p8,rightthreetimes:h8,RightTriangleBar:d8,RightTriangle:m8,RightTriangleEqual:g8,RightUpDownVector:v8,RightUpTeeVector:y8,RightUpVectorBar:b8,RightUpVector:k8,RightVectorBar:D8,RightVector:C8,ring:x8,risingdotseq:A8,rlarr:E8,rlhar:_8,rlm:w8,rmoustache:S8,rmoust:M8,rnmid:T8,roang:O8,roarr:F8,robrk:N8,ropar:B8,ropf:R8,Ropf:I8,roplus:L8,rotimes:P8,RoundImplies:q8,rpar:z8,rpargt:V8,rppolint:H8,rrarr:j8,Rrightarrow:U8,rsaquo:J8,rscr:K8,Rscr:W8,rsh:G8,Rsh:$8,rsqb:Z8,rsquo:Y8,rsquor:Q8,rthree:X8,rtimes:t6,rtri:e6,rtrie:r6,rtrif:n6,rtriltri:o6,RuleDelayed:s6,ruluhar:i6,rx:a6,Sacute:c6,sacute:u6,sbquo:l6,scap:f6,Scaron:p6,scaron:h6,Sc:d6,sc:m6,sccue:g6,sce:v6,scE:y6,Scedil:b6,scedil:k6,Scirc:D6,scirc:C6,scnap:x6,scnE:A6,scnsim:E6,scpolint:_6,scsim:w6,Scy:S6,scy:M6,sdotb:T6,sdot:O6,sdote:F6,searhk:N6,searr:B6,seArr:R6,searrow:I6,sect:L6,semi:P6,seswar:q6,setminus:z6,setmn:V6,sext:H6,Sfr:j6,sfr:U6,sfrown:J6,sharp:K6,SHCHcy:W6,shchcy:G6,SHcy:$6,shcy:Z6,ShortDownArrow:Y6,ShortLeftArrow:Q6,shortmid:X6,shortparallel:t5,ShortRightArrow:e5,ShortUpArrow:r5,shy:n5,Sigma:o5,sigma:s5,sigmaf:i5,sigmav:a5,sim:c5,simdot:u5,sime:l5,simeq:f5,simg:p5,simgE:h5,siml:d5,simlE:m5,simne:g5,simplus:v5,simrarr:y5,slarr:b5,SmallCircle:k5,smallsetminus:D5,smashp:C5,smeparsl:x5,smid:A5,smile:E5,smt:_5,smte:w5,smtes:S5,SOFTcy:M5,softcy:T5,solbar:O5,solb:F5,sol:N5,Sopf:B5,sopf:R5,spades:I5,spadesuit:L5,spar:P5,sqcap:q5,sqcaps:z5,sqcup:V5,sqcups:H5,Sqrt:j5,sqsub:U5,sqsube:J5,sqsubset:K5,sqsubseteq:W5,sqsup:G5,sqsupe:$5,sqsupset:Z5,sqsupseteq:Y5,square:Q5,Square:X5,SquareIntersection:t9,SquareSubset:e9,SquareSubsetEqual:r9,SquareSuperset:n9,SquareSupersetEqual:o9,SquareUnion:s9,squarf:i9,squ:a9,squf:c9,srarr:u9,Sscr:l9,sscr:f9,ssetmn:p9,ssmile:h9,sstarf:d9,Star:m9,star:g9,starf:v9,straightepsilon:y9,straightphi:b9,strns:k9,sub:D9,Sub:C9,subdot:x9,subE:A9,sube:E9,subedot:_9,submult:w9,subnE:S9,subne:M9,subplus:T9,subrarr:O9,subset:F9,Subset:N9,subseteq:B9,subseteqq:R9,SubsetEqual:I9,subsetneq:L9,subsetneqq:P9,subsim:q9,subsub:z9,subsup:V9,succapprox:H9,succ:j9,succcurlyeq:U9,Succeeds:J9,SucceedsEqual:K9,SucceedsSlantEqual:W9,SucceedsTilde:G9,succeq:$9,succnapprox:Z9,succneqq:Y9,succnsim:Q9,succsim:X9,SuchThat:tV,sum:eV,Sum:rV,sung:nV,sup1:oV,sup2:sV,sup3:iV,sup:aV,Sup:cV,supdot:uV,supdsub:lV,supE:fV,supe:pV,supedot:hV,Superset:dV,SupersetEqual:mV,suphsol:gV,suphsub:vV,suplarr:yV,supmult:bV,supnE:kV,supne:DV,supplus:CV,supset:xV,Supset:AV,supseteq:EV,supseteqq:_V,supsetneq:wV,supsetneqq:SV,supsim:MV,supsub:TV,supsup:OV,swarhk:FV,swarr:NV,swArr:BV,swarrow:RV,swnwar:IV,szlig:LV,Tab:PV,target:qV,Tau:zV,tau:VV,tbrk:HV,Tcaron:jV,tcaron:UV,Tcedil:JV,tcedil:KV,Tcy:WV,tcy:GV,tdot:$V,telrec:ZV,Tfr:YV,tfr:QV,there4:XV,therefore:t7,Therefore:e7,Theta:r7,theta:n7,thetasym:o7,thetav:s7,thickapprox:i7,thicksim:a7,ThickSpace:c7,ThinSpace:u7,thinsp:l7,thkap:f7,thksim:p7,THORN:h7,thorn:d7,tilde:m7,Tilde:g7,TildeEqual:v7,TildeFullEqual:y7,TildeTilde:b7,timesbar:k7,timesb:D7,times:C7,timesd:x7,tint:A7,toea:E7,topbot:_7,topcir:w7,top:S7,Topf:M7,topf:T7,topfork:O7,tosa:F7,tprime:N7,trade:B7,TRADE:R7,triangle:I7,triangledown:L7,triangleleft:P7,trianglelefteq:q7,triangleq:z7,triangleright:V7,trianglerighteq:H7,tridot:j7,trie:U7,triminus:J7,TripleDot:K7,triplus:W7,trisb:G7,tritime:$7,trpezium:Z7,Tscr:Y7,tscr:Q7,TScy:X7,tscy:t4,TSHcy:e4,tshcy:r4,Tstrok:n4,tstrok:o4,twixt:s4,twoheadleftarrow:i4,twoheadrightarrow:a4,Uacute:c4,uacute:u4,uarr:l4,Uarr:f4,uArr:p4,Uarrocir:h4,Ubrcy:d4,ubrcy:m4,Ubreve:g4,ubreve:v4,Ucirc:y4,ucirc:b4,Ucy:k4,ucy:D4,udarr:C4,Udblac:x4,udblac:A4,udhar:E4,ufisht:_4,Ufr:w4,ufr:S4,Ugrave:M4,ugrave:T4,uHar:O4,uharl:F4,uharr:N4,uhblk:B4,ulcorn:R4,ulcorner:I4,ulcrop:L4,ultri:P4,Umacr:q4,umacr:z4,uml:V4,UnderBar:H4,UnderBrace:j4,UnderBracket:U4,UnderParenthesis:J4,Union:K4,UnionPlus:W4,Uogon:G4,uogon:$4,Uopf:Z4,uopf:Y4,UpArrowBar:Q4,uparrow:X4,UpArrow:tH,Uparrow:eH,UpArrowDownArrow:rH,updownarrow:nH,UpDownArrow:oH,Updownarrow:sH,UpEquilibrium:iH,upharpoonleft:aH,upharpoonright:cH,uplus:uH,UpperLeftArrow:lH,UpperRightArrow:fH,upsi:pH,Upsi:hH,upsih:dH,Upsilon:mH,upsilon:gH,UpTeeArrow:vH,UpTee:yH,upuparrows:bH,urcorn:kH,urcorner:DH,urcrop:CH,Uring:xH,uring:AH,urtri:EH,Uscr:_H,uscr:wH,utdot:SH,Utilde:MH,utilde:TH,utri:OH,utrif:FH,uuarr:NH,Uuml:BH,uuml:RH,uwangle:IH,vangrt:LH,varepsilon:PH,varkappa:qH,varnothing:zH,varphi:VH,varpi:HH,varpropto:jH,varr:UH,vArr:JH,varrho:KH,varsigma:WH,varsubsetneq:GH,varsubsetneqq:$H,varsupsetneq:ZH,varsupsetneqq:YH,vartheta:QH,vartriangleleft:XH,vartriangleright:tj,vBar:ej,Vbar:rj,vBarv:nj,Vcy:oj,vcy:sj,vdash:ij,vDash:aj,Vdash:cj,VDash:uj,Vdashl:lj,veebar:fj,vee:pj,Vee:hj,veeeq:dj,vellip:mj,verbar:gj,Verbar:vj,vert:yj,Vert:bj,VerticalBar:kj,VerticalLine:Dj,VerticalSeparator:Cj,VerticalTilde:xj,VeryThinSpace:Aj,Vfr:Ej,vfr:_j,vltri:wj,vnsub:Sj,vnsup:Mj,Vopf:Tj,vopf:Oj,vprop:Fj,vrtri:Nj,Vscr:Bj,vscr:Rj,vsubnE:Ij,vsubne:Lj,vsupnE:Pj,vsupne:qj,Vvdash:zj,vzigzag:Vj,Wcirc:Hj,wcirc:jj,wedbar:Uj,wedge:Jj,Wedge:Kj,wedgeq:Wj,weierp:Gj,Wfr:$j,wfr:Zj,Wopf:Yj,wopf:Qj,wp:Xj,wr:tU,wreath:eU,Wscr:rU,wscr:nU,xcap:oU,xcirc:sU,xcup:iU,xdtri:aU,Xfr:cU,xfr:uU,xharr:lU,xhArr:fU,Xi:pU,xi:hU,xlarr:dU,xlArr:mU,xmap:gU,xnis:vU,xodot:yU,Xopf:bU,xopf:kU,xoplus:DU,xotime:CU,xrarr:xU,xrArr:AU,Xscr:EU,xscr:_U,xsqcup:wU,xuplus:SU,xutri:MU,xvee:TU,xwedge:OU,Yacute:FU,yacute:NU,YAcy:BU,yacy:RU,Ycirc:IU,ycirc:LU,Ycy:PU,ycy:qU,yen:zU,Yfr:VU,yfr:HU,YIcy:jU,yicy:UU,Yopf:JU,yopf:KU,Yscr:WU,yscr:GU,YUcy:$U,yucy:ZU,yuml:YU,Yuml:QU,Zacute:XU,zacute:tJ,Zcaron:eJ,zcaron:rJ,Zcy:nJ,zcy:oJ,Zdot:sJ,zdot:iJ,zeetrf:aJ,ZeroWidthSpace:cJ,Zeta:uJ,zeta:lJ,zfr:fJ,Zfr:pJ,ZHcy:hJ,zhcy:dJ,zigrarr:mJ,zopf:gJ,Zopf:vJ,Zscr:yJ,zscr:bJ,zwj:kJ,zwnj:DJ};var Hn=CJ,si=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,la={};function xJ(r){var t,e,n=la[r];if(n)return n;for(n=la[r]=[],t=0;t<128;t++)e=String.fromCharCode(t),/^[0-9a-z]$/i.test(e)?n.push(e):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<r.length;t++)n[r.charCodeAt(t)]=r[t];return n}function co(r,t,e){var n,o,s,i,a,c="";for(typeof t!="string"&&(e=t,t=co.defaultChars),typeof e=="undefined"&&(e=!0),a=xJ(t),n=0,o=r.length;n<o;n++){if(s=r.charCodeAt(n),e&&s===37&&n+2<o&&/^[0-9a-f]{2}$/i.test(r.slice(n+1,n+3))){c+=r.slice(n,n+3),n+=2;continue}if(s<128){c+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&n+1<o&&(i=r.charCodeAt(n+1),i>=56320&&i<=57343)){c+=encodeURIComponent(r[n]+r[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(r[n])}return c}co.defaultChars=";/?:@&=+$,-_.!~*'()#";co.componentChars="-_.!~*'()";var AJ=co,fa={};function EJ(r){var t,e,n=fa[r];if(n)return n;for(n=fa[r]=[],t=0;t<128;t++)e=String.fromCharCode(t),n.push(e);for(t=0;t<r.length;t++)e=r.charCodeAt(t),n[e]="%"+("0"+e.toString(16).toUpperCase()).slice(-2);return n}function uo(r,t){var e;return typeof t!="string"&&(t=uo.defaultChars),e=EJ(t),r.replace(/(%[a-f0-9]{2})+/gi,function(n){var o,s,i,a,c,u,l,f="";for(o=0,s=n.length;o<s;o+=3){if(i=parseInt(n.slice(o+1,o+3),16),i<128){f+=e[i];continue}if((i&224)===192&&o+3<s&&(a=parseInt(n.slice(o+4,o+6),16),(a&192)===128)){l=i<<6&1984|a&63,l<128?f+="\uFFFD\uFFFD":f+=String.fromCharCode(l),o+=3;continue}if((i&240)===224&&o+6<s&&(a=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16),(a&192)===128&&(c&192)===128)){l=i<<12&61440|a<<6&4032|c&63,l<2048||l>=55296&&l<=57343?f+="\uFFFD\uFFFD\uFFFD":f+=String.fromCharCode(l),o+=6;continue}if((i&248)===240&&o+9<s&&(a=parseInt(n.slice(o+4,o+6),16),c=parseInt(n.slice(o+7,o+9),16),u=parseInt(n.slice(o+10,o+12),16),(a&192)===128&&(c&192)===128&&(u&192)===128)){l=i<<18&1835008|a<<12&258048|c<<6&4032|u&63,l<65536||l>1114111?f+="\uFFFD\uFFFD\uFFFD\uFFFD":(l-=65536,f+=String.fromCharCode(55296+(l>>10),56320+(l&1023))),o+=9;continue}f+="\uFFFD"}return f})}uo.defaultChars=";/?:@&=+$,#";uo.componentChars="";var _J=uo,wJ=function(t){var e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e};function jn(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var SJ=/^([a-z0-9.+-]+:)/i,MJ=/:[0-9]*$/,TJ=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,OJ=["<",">",'"',"`"," ","\r",`
`,"	"],FJ=["{","}","|","\\","^","`"].concat(OJ),NJ=["'"].concat(FJ),pa=["%","/","?",";","#"].concat(NJ),ha=["/","?","#"],BJ=255,da=/^[+a-z0-9A-Z_-]{0,63}$/,RJ=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ma={javascript:!0,"javascript:":!0},ga={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function IJ(r,t){if(r&&r instanceof jn)return r;var e=new jn;return e.parse(r,t),e}jn.prototype.parse=function(r,t){var e,n,o,s,i,a=r;if(a=a.trim(),!t&&r.split("#").length===1){var c=TJ.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var u=SJ.exec(a);if(u&&(u=u[0],o=u.toLowerCase(),this.protocol=u,a=a.substr(u.length)),(t||u||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=a.substr(0,2)==="//",i&&!(u&&ma[u])&&(a=a.substr(2),this.slashes=!0)),!ma[u]&&(i||u&&!ga[u])){var l=-1;for(e=0;e<ha.length;e++)s=a.indexOf(ha[e]),s!==-1&&(l===-1||s<l)&&(l=s);var f,p;for(l===-1?p=a.lastIndexOf("@"):p=a.lastIndexOf("@",l),p!==-1&&(f=a.slice(0,p),a=a.slice(p+1),this.auth=f),l=-1,e=0;e<pa.length;e++)s=a.indexOf(pa[e]),s!==-1&&(l===-1||s<l)&&(l=s);l===-1&&(l=a.length),a[l-1]===":"&&l--;var h=a.slice(0,l);a=a.slice(l),this.parseHost(h),this.hostname=this.hostname||"";var d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){var m=this.hostname.split(/\./);for(e=0,n=m.length;e<n;e++){var v=m[e];if(!!v&&!v.match(da)){for(var y="",g=0,D=v.length;g<D;g++)v.charCodeAt(g)>127?y+="x":y+=v[g];if(!y.match(da)){var b=m.slice(0,e),A=m.slice(e+1),k=v.match(RJ);k&&(b.push(k[1]),A.unshift(k[2])),A.length&&(a=A.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>BJ&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var M=a.indexOf("#");M!==-1&&(this.hash=a.substr(M),a=a.slice(0,M));var F=a.indexOf("?");return F!==-1&&(this.search=a.substr(F),a=a.slice(0,F)),a&&(this.pathname=a),ga[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this};jn.prototype.parseHost=function(r){var t=MJ.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var LJ=IJ,PJ=AJ,qJ=_J,zJ=wJ,VJ=LJ,be={encode:PJ,decode:qJ,format:zJ,parse:VJ},Bu=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ru=/[\0-\x1F\x7F-\x9F]/,HJ=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Iu=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,jJ=Bu,UJ=Ru,JJ=HJ,KJ=si,WJ=Iu,GJ={Any:jJ,Cc:UJ,Cf:JJ,P:KJ,Z:WJ},U=al(function(r,t){function e(_){return Object.prototype.toString.call(_)}function n(_){return e(_)==="[object String]"}var o=Object.prototype.hasOwnProperty;function s(_,W){return o.call(_,W)}function i(_){var W=Array.prototype.slice.call(arguments,1);return W.forEach(function(I){if(!!I){if(typeof I!="object")throw new TypeError(I+"must be object");Object.keys(I).forEach(function(R){_[R]=I[R]})}}),_}function a(_,W,I){return[].concat(_.slice(0,W),I,_.slice(W+1))}function c(_){return!(_>=55296&&_<=57343||_>=64976&&_<=65007||(_&65535)===65535||(_&65535)===65534||_>=0&&_<=8||_===11||_>=14&&_<=31||_>=127&&_<=159||_>1114111)}function u(_){if(_>65535){_-=65536;var W=55296+(_>>10),I=56320+(_&1023);return String.fromCharCode(W,I)}return String.fromCharCode(_)}var l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,f=/&([a-z#][a-z0-9]{1,31});/gi,p=new RegExp(l.source+"|"+f.source,"gi"),h=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function d(_,W){var I=0;return s(Hn,W)?Hn[W]:W.charCodeAt(0)===35&&h.test(W)&&(I=W[1].toLowerCase()==="x"?parseInt(W.slice(2),16):parseInt(W.slice(1),10),c(I))?u(I):_}function m(_){return _.indexOf("\\")<0?_:_.replace(l,"$1")}function v(_){return _.indexOf("\\")<0&&_.indexOf("&")<0?_:_.replace(p,function(W,I,R){return I||d(W,R)})}var y=/[&<>"]/,g=/[&<>"]/g,D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function b(_){return D[_]}function A(_){return y.test(_)?_.replace(g,b):_}var k=/[.?*+^$[\]\\(){}|-]/g;function M(_){return _.replace(k,"\\$&")}function F(_){switch(_){case 9:case 32:return!0}return!1}function q(_){if(_>=8192&&_<=8202)return!0;switch(_){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function O(_){return si.test(_)}function K(_){switch(_){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function kt(_){return _=_.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(_=_.replace(/ẞ/g,"\xDF")),_.toLowerCase().toUpperCase()}t.lib={},t.lib.mdurl=be,t.lib.ucmicro=GJ,t.assign=i,t.isString=n,t.has=s,t.unescapeMd=m,t.unescapeAll=v,t.isValidEntityCode=c,t.fromCodePoint=u,t.escapeHtml=A,t.arrayReplaceAt=a,t.isSpace=F,t.isWhiteSpace=q,t.isMdAsciiPunct=K,t.isPunctChar=O,t.escapeRE=M,t.normalizeReference=kt}),$J=function(t,e,n){var o,s,i,a,c=-1,u=t.posMax,l=t.pos;for(t.pos=e+1,o=1;t.pos<u;){if(i=t.src.charCodeAt(t.pos),i===93&&(o--,o===0)){s=!0;break}if(a=t.pos,t.md.inline.skipToken(t),i===91){if(a===t.pos-1)o++;else if(n)return t.pos=l,-1}}return s&&(c=t.pos),t.pos=l,c},va=U.unescapeAll,ZJ=function(t,e,n){var o,s,i=0,a=e,c={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(e)===60){for(e++;e<n;){if(o=t.charCodeAt(e),o===10||o===60)return c;if(o===62)return c.pos=e+1,c.str=va(t.slice(a+1,e)),c.ok=!0,c;if(o===92&&e+1<n){e+=2;continue}e++}return c}for(s=0;e<n&&(o=t.charCodeAt(e),!(o===32||o<32||o===127));){if(o===92&&e+1<n){if(t.charCodeAt(e+1)===32)break;e+=2;continue}if(o===40&&(s++,s>32))return c;if(o===41){if(s===0)break;s--}e++}return a===e||s!==0||(c.str=va(t.slice(a,e)),c.lines=i,c.pos=e,c.ok=!0),c},YJ=U.unescapeAll,QJ=function(t,e,n){var o,s,i=0,a=e,c={ok:!1,pos:0,lines:0,str:""};if(e>=n||(s=t.charCodeAt(e),s!==34&&s!==39&&s!==40))return c;for(e++,s===40&&(s=41);e<n;){if(o=t.charCodeAt(e),o===s)return c.pos=e+1,c.lines=i,c.str=YJ(t.slice(a+1,e)),c.ok=!0,c;if(o===40&&s===41)return c;o===10?i++:o===92&&e+1<n&&(e++,t.charCodeAt(e)===10&&i++),e++}return c},XJ=$J,tK=ZJ,eK=QJ,rK={parseLinkLabel:XJ,parseLinkDestination:tK,parseLinkTitle:eK},nK=U.assign,oK=U.unescapeAll,Pe=U.escapeHtml,se={};se.code_inline=function(r,t,e,n,o){var s=r[t];return"<code"+o.renderAttrs(s)+">"+Pe(r[t].content)+"</code>"};se.code_block=function(r,t,e,n,o){var s=r[t];return"<pre"+o.renderAttrs(s)+"><code>"+Pe(r[t].content)+`</code></pre>
`};se.fence=function(r,t,e,n,o){var s=r[t],i=s.info?oK(s.info).trim():"",a="",c="",u,l,f,p,h;return i&&(f=i.split(/(\s+)/g),a=f[0],c=f.slice(2).join("")),e.highlight?u=e.highlight(s.content,a,c)||Pe(s.content):u=Pe(s.content),u.indexOf("<pre")===0?u+`
`:i?(l=s.attrIndex("class"),p=s.attrs?s.attrs.slice():[],l<0?p.push(["class",e.langPrefix+a]):(p[l]=p[l].slice(),p[l][1]+=" "+e.langPrefix+a),h={attrs:p},"<pre><code"+o.renderAttrs(h)+">"+u+`</code></pre>
`):"<pre><code"+o.renderAttrs(s)+">"+u+`</code></pre>
`};se.image=function(r,t,e,n,o){var s=r[t];return s.attrs[s.attrIndex("alt")][1]=o.renderInlineAsText(s.children,e,n),o.renderToken(r,t,e)};se.hardbreak=function(r,t,e){return e.xhtmlOut?`<br />
`:`<br>
`};se.softbreak=function(r,t,e){return e.breaks?e.xhtmlOut?`<br />
`:`<br>
`:`
`};se.text=function(r,t){return Pe(r[t].content)};se.html_block=function(r,t){return r[t].content};se.html_inline=function(r,t){return r[t].content};function hr(){this.rules=nK({},se)}hr.prototype.renderAttrs=function(t){var e,n,o;if(!t.attrs)return"";for(o="",e=0,n=t.attrs.length;e<n;e++)o+=" "+Pe(t.attrs[e][0])+'="'+Pe(t.attrs[e][1])+'"';return o};hr.prototype.renderToken=function(t,e,n){var o,s="",i=!1,a=t[e];return a.hidden?"":(a.block&&a.nesting!==-1&&e&&t[e-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(s+=" /"),a.block&&(i=!0,a.nesting===1&&e+1<t.length&&(o=t[e+1],(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(i=!1))),s+=i?`>
`:">",s)};hr.prototype.renderInline=function(r,t,e){for(var n,o="",s=this.rules,i=0,a=r.length;i<a;i++)n=r[i].type,typeof s[n]!="undefined"?o+=s[n](r,i,t,e,this):o+=this.renderToken(r,i,t);return o};hr.prototype.renderInlineAsText=function(r,t,e){for(var n="",o=0,s=r.length;o<s;o++)r[o].type==="text"?n+=r[o].content:r[o].type==="image"?n+=this.renderInlineAsText(r[o].children,t,e):r[o].type==="softbreak"&&(n+=`
`);return n};hr.prototype.render=function(r,t,e){var n,o,s,i="",a=this.rules;for(n=0,o=r.length;n<o;n++)s=r[n].type,s==="inline"?i+=this.renderInline(r[n].children,t,e):typeof a[s]!="undefined"?i+=a[r[n].type](r,n,t,e,this):i+=this.renderToken(r,n,t,e);return i};var sK=hr;function Gt(){this.__rules__=[],this.__cache__=null}Gt.prototype.__find__=function(r){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===r)return t;return-1};Gt.prototype.__compile__=function(){var r=this,t=[""];r.__rules__.forEach(function(e){!e.enabled||e.alt.forEach(function(n){t.indexOf(n)<0&&t.push(n)})}),r.__cache__={},t.forEach(function(e){r.__cache__[e]=[],r.__rules__.forEach(function(n){!n.enabled||e&&n.alt.indexOf(e)<0||r.__cache__[e].push(n.fn)})})};Gt.prototype.at=function(r,t,e){var n=this.__find__(r),o=e||{};if(n===-1)throw new Error("Parser rule not found: "+r);this.__rules__[n].fn=t,this.__rules__[n].alt=o.alt||[],this.__cache__=null};Gt.prototype.before=function(r,t,e,n){var o=this.__find__(r),s=n||{};if(o===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:e,alt:s.alt||[]}),this.__cache__=null};Gt.prototype.after=function(r,t,e,n){var o=this.__find__(r),s=n||{};if(o===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:e,alt:s.alt||[]}),this.__cache__=null};Gt.prototype.push=function(r,t,e){var n=e||{};this.__rules__.push({name:r,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null};Gt.prototype.enable=function(r,t){Array.isArray(r)||(r=[r]);var e=[];return r.forEach(function(n){var o=this.__find__(n);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[o].enabled=!0,e.push(n)},this),this.__cache__=null,e};Gt.prototype.enableOnly=function(r,t){Array.isArray(r)||(r=[r]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(r,t)};Gt.prototype.disable=function(r,t){Array.isArray(r)||(r=[r]);var e=[];return r.forEach(function(n){var o=this.__find__(n);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[o].enabled=!1,e.push(n)},this),this.__cache__=null,e};Gt.prototype.getRules=function(r){return this.__cache__===null&&this.__compile__(),this.__cache__[r]||[]};var Un=Gt,iK=/\r\n?|\n/g,aK=/\0/g,cK=function(t){var e;e=t.src.replace(iK,`
`),e=e.replace(aK,"\uFFFD"),t.src=e},uK=function(t){var e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},lK=function(t){var e=t.tokens,n,o,s;for(o=0,s=e.length;o<s;o++)n=e[o],n.type==="inline"&&t.md.inline.parse(n.content,t.md,t.env,n.children)},fK=U.arrayReplaceAt;function pK(r){return/^<a[>\s]/i.test(r)}function hK(r){return/^<\/a\s*>/i.test(r)}var dK=function(t){var e,n,o,s,i,a,c,u,l,f,p,h,d,m,v,y,g=t.tokens,D;if(!!t.md.options.linkify){for(n=0,o=g.length;n<o;n++)if(!(g[n].type!=="inline"||!t.md.linkify.pretest(g[n].content)))for(s=g[n].children,d=0,e=s.length-1;e>=0;e--){if(a=s[e],a.type==="link_close"){for(e--;s[e].level!==a.level&&s[e].type!=="link_open";)e--;continue}if(a.type==="html_inline"&&(pK(a.content)&&d>0&&d--,hK(a.content)&&d++),!(d>0)&&a.type==="text"&&t.md.linkify.test(a.content)){for(l=a.content,D=t.md.linkify.match(l),c=[],h=a.level,p=0,u=0;u<D.length;u++)m=D[u].url,v=t.md.normalizeLink(m),t.md.validateLink(v)&&(y=D[u].text,D[u].schema?D[u].schema==="mailto:"&&!/^mailto:/i.test(y)?y=t.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=t.md.normalizeLinkText(y):y=t.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,""),f=D[u].index,f>p&&(i=new t.Token("text","",0),i.content=l.slice(p,f),i.level=h,c.push(i)),i=new t.Token("link_open","a",1),i.attrs=[["href",v]],i.level=h++,i.markup="linkify",i.info="auto",c.push(i),i=new t.Token("text","",0),i.content=y,i.level=h,c.push(i),i=new t.Token("link_close","a",-1),i.level=--h,i.markup="linkify",i.info="auto",c.push(i),p=D[u].lastIndex);p<l.length&&(i=new t.Token("text","",0),i.content=l.slice(p),i.level=h,c.push(i)),g[n].children=s=fK(s,e,c)}}}},Lu=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,mK=/\((c|tm|r|p)\)/i,gK=/\((c|tm|r|p)\)/ig,vK={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function yK(r,t){return vK[t.toLowerCase()]}function bK(r){var t,e,n=0;for(t=r.length-1;t>=0;t--)e=r[t],e.type==="text"&&!n&&(e.content=e.content.replace(gK,yK)),e.type==="link_open"&&e.info==="auto"&&n--,e.type==="link_close"&&e.info==="auto"&&n++}function kK(r){var t,e,n=0;for(t=r.length-1;t>=0;t--)e=r[t],e.type==="text"&&!n&&Lu.test(e.content)&&(e.content=e.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),e.type==="link_open"&&e.info==="auto"&&n--,e.type==="link_close"&&e.info==="auto"&&n++}var DK=function(t){var e;if(!!t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(mK.test(t.tokens[e].content)&&bK(t.tokens[e].children),Lu.test(t.tokens[e].content)&&kK(t.tokens[e].children))},ya=U.isWhiteSpace,ba=U.isPunctChar,ka=U.isMdAsciiPunct,CK=/['"]/,Da=/['"]/g,Ca="\u2019";function rn(r,t,e){return r.substr(0,t)+e+r.substr(t+1)}function xK(r,t){var e,n,o,s,i,a,c,u,l,f,p,h,d,m,v,y,g,D,b,A,k;for(b=[],e=0;e<r.length;e++){for(n=r[e],c=r[e].level,g=b.length-1;g>=0&&!(b[g].level<=c);g--);if(b.length=g+1,n.type!=="text")continue;o=n.content,i=0,a=o.length;t:for(;i<a&&(Da.lastIndex=i,s=Da.exec(o),!!s);){if(v=y=!0,i=s.index+1,D=s[0]==="'",l=32,s.index-1>=0)l=o.charCodeAt(s.index-1);else for(g=e-1;g>=0&&!(r[g].type==="softbreak"||r[g].type==="hardbreak");g--)if(!!r[g].content){l=r[g].content.charCodeAt(r[g].content.length-1);break}if(f=32,i<a)f=o.charCodeAt(i);else for(g=e+1;g<r.length&&!(r[g].type==="softbreak"||r[g].type==="hardbreak");g++)if(!!r[g].content){f=r[g].content.charCodeAt(0);break}if(p=ka(l)||ba(String.fromCharCode(l)),h=ka(f)||ba(String.fromCharCode(f)),d=ya(l),m=ya(f),m?v=!1:h&&(d||p||(v=!1)),d?y=!1:p&&(m||h||(y=!1)),f===34&&s[0]==='"'&&l>=48&&l<=57&&(y=v=!1),v&&y&&(v=p,y=h),!v&&!y){D&&(n.content=rn(n.content,s.index,Ca));continue}if(y){for(g=b.length-1;g>=0&&(u=b[g],!(b[g].level<c));g--)if(u.single===D&&b[g].level===c){u=b[g],D?(A=t.md.options.quotes[2],k=t.md.options.quotes[3]):(A=t.md.options.quotes[0],k=t.md.options.quotes[1]),n.content=rn(n.content,s.index,k),r[u.token].content=rn(r[u.token].content,u.pos,A),i+=k.length-1,u.token===e&&(i+=A.length-1),o=n.content,a=o.length,b.length=g;continue t}}v?b.push({token:e,pos:s.index,single:D,level:c}):y&&D&&(n.content=rn(n.content,s.index,Ca))}}}var AK=function(t){var e;if(!!t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!CK.test(t.tokens[e].content)||xK(t.tokens[e].children,t)};function dr(r,t,e){this.type=r,this.tag=t,this.attrs=null,this.map=null,this.nesting=e,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}dr.prototype.attrIndex=function(t){var e,n,o;if(!this.attrs)return-1;for(e=this.attrs,n=0,o=e.length;n<o;n++)if(e[n][0]===t)return n;return-1};dr.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};dr.prototype.attrSet=function(t,e){var n=this.attrIndex(t),o=[t,e];n<0?this.attrPush(o):this.attrs[n]=o};dr.prototype.attrGet=function(t){var e=this.attrIndex(t),n=null;return e>=0&&(n=this.attrs[e][1]),n};dr.prototype.attrJoin=function(t,e){var n=this.attrIndex(t);n<0?this.attrPush([t,e]):this.attrs[n][1]=this.attrs[n][1]+" "+e};var mr=dr;function Pu(r,t,e){this.src=r,this.env=e,this.tokens=[],this.inlineMode=!1,this.md=t}Pu.prototype.Token=mr;var EK=Pu,Io=[["normalize",cK],["block",uK],["inline",lK],["linkify",dK],["replacements",DK],["smartquotes",AK]];function ii(){this.ruler=new Un;for(var r=0;r<Io.length;r++)this.ruler.push(Io[r][0],Io[r][1])}ii.prototype.process=function(r){var t,e,n;for(n=this.ruler.getRules(""),t=0,e=n.length;t<e;t++)n[t](r)};ii.prototype.State=EK;var _K=ii,Lo=U.isSpace;function Po(r,t){var e=r.bMarks[t]+r.tShift[t],n=r.eMarks[t];return r.src.substr(e,n-e)}function xa(r){var t=[],e=0,n=r.length,o,s=!1,i=0,a="";for(o=r.charCodeAt(e);e<n;)o===124&&(s?(a+=r.substring(i,e-1),i=e):(t.push(a+r.substring(i,e)),a="",i=e+1)),s=o===92,e++,o=r.charCodeAt(e);return t.push(a+r.substring(i)),t}var wK=function(t,e,n,o){var s,i,a,c,u,l,f,p,h,d,m,v,y,g,D,b,A,k;if(e+2>n||(l=e+1,t.sCount[l]<t.blkIndent)||t.sCount[l]-t.blkIndent>=4||(a=t.bMarks[l]+t.tShift[l],a>=t.eMarks[l])||(A=t.src.charCodeAt(a++),A!==124&&A!==45&&A!==58)||a>=t.eMarks[l]||(k=t.src.charCodeAt(a++),k!==124&&k!==45&&k!==58&&!Lo(k))||A===45&&Lo(k))return!1;for(;a<t.eMarks[l];){if(s=t.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!Lo(s))return!1;a++}for(i=Po(t,e+1),f=i.split("|"),d=[],c=0;c<f.length;c++){if(m=f[c].trim(),!m){if(c===0||c===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?d.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?d.push("left"):d.push("")}if(i=Po(t,e).trim(),i.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4||(f=xa(i),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),p=f.length,p===0||p!==d.length))return!1;if(o)return!0;for(g=t.parentType,t.parentType="table",b=t.md.block.ruler.getRules("blockquote"),h=t.push("table_open","table",1),h.map=v=[e,0],h=t.push("thead_open","thead",1),h.map=[e,e+1],h=t.push("tr_open","tr",1),h.map=[e,e+1],c=0;c<f.length;c++)h=t.push("th_open","th",1),d[c]&&(h.attrs=[["style","text-align:"+d[c]]]),h=t.push("inline","",0),h.content=f[c].trim(),h.children=[],h=t.push("th_close","th",-1);for(h=t.push("tr_close","tr",-1),h=t.push("thead_close","thead",-1),l=e+2;l<n&&!(t.sCount[l]<t.blkIndent);l++){for(D=!1,c=0,u=b.length;c<u;c++)if(b[c](t,l,n,!0)){D=!0;break}if(D||(i=Po(t,l).trim(),!i)||t.sCount[l]-t.blkIndent>=4)break;for(f=xa(i),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),l===e+2&&(h=t.push("tbody_open","tbody",1),h.map=y=[e+2,0]),h=t.push("tr_open","tr",1),h.map=[l,l+1],c=0;c<p;c++)h=t.push("td_open","td",1),d[c]&&(h.attrs=[["style","text-align:"+d[c]]]),h=t.push("inline","",0),h.content=f[c]?f[c].trim():"",h.children=[],h=t.push("td_close","td",-1);h=t.push("tr_close","tr",-1)}return y&&(h=t.push("tbody_close","tbody",-1),y[1]=l),h=t.push("table_close","table",-1),v[1]=l,t.parentType=g,t.line=l,!0},SK=function(t,e,n){var o,s,i;if(t.sCount[e]-t.blkIndent<4)return!1;for(s=o=e+1;o<n;){if(t.isEmpty(o)){o++;continue}if(t.sCount[o]-t.blkIndent>=4){o++,s=o;continue}break}return t.line=s,i=t.push("code_block","code",0),i.content=t.getLines(e,s,4+t.blkIndent,!1)+`
`,i.map=[e,t.line],!0},MK=function(t,e,n,o){var s,i,a,c,u,l,f,p=!1,h=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||h+3>d||(s=t.src.charCodeAt(h),s!==126&&s!==96)||(u=h,h=t.skipChars(h,s),i=h-u,i<3)||(f=t.src.slice(u,h),a=t.src.slice(h,d),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(o)return!0;for(c=e;c++,!(c>=n||(h=u=t.bMarks[c]+t.tShift[c],d=t.eMarks[c],h<d&&t.sCount[c]<t.blkIndent));)if(t.src.charCodeAt(h)===s&&!(t.sCount[c]-t.blkIndent>=4)&&(h=t.skipChars(h,s),!(h-u<i)&&(h=t.skipSpaces(h),!(h<d)))){p=!0;break}return i=t.sCount[e],t.line=c+(p?1:0),l=t.push("fence","code",0),l.info=a,l.content=t.getLines(e+1,c,i,!0),l.markup=f,l.map=[e,t.line],!0},Aa=U.isSpace,TK=function(t,e,n,o){var s,i,a,c,u,l,f,p,h,d,m,v,y,g,D,b,A,k,M,F,q=t.lineMax,O=t.bMarks[e]+t.tShift[e],K=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(O++)!==62)return!1;if(o)return!0;for(c=h=t.sCount[e]+1,t.src.charCodeAt(O)===32?(O++,c++,h++,s=!1,b=!0):t.src.charCodeAt(O)===9?(b=!0,(t.bsCount[e]+h)%4===3?(O++,c++,h++,s=!1):s=!0):b=!1,d=[t.bMarks[e]],t.bMarks[e]=O;O<K&&(i=t.src.charCodeAt(O),Aa(i));){i===9?h+=4-(h+t.bsCount[e]+(s?1:0))%4:h++;O++}for(m=[t.bsCount[e]],t.bsCount[e]=t.sCount[e]+1+(b?1:0),l=O>=K,g=[t.sCount[e]],t.sCount[e]=h-c,D=[t.tShift[e]],t.tShift[e]=O-t.bMarks[e],k=t.md.block.ruler.getRules("blockquote"),y=t.parentType,t.parentType="blockquote",p=e+1;p<n&&(F=t.sCount[p]<t.blkIndent,O=t.bMarks[p]+t.tShift[p],K=t.eMarks[p],!(O>=K));p++){if(t.src.charCodeAt(O++)===62&&!F){for(c=h=t.sCount[p]+1,t.src.charCodeAt(O)===32?(O++,c++,h++,s=!1,b=!0):t.src.charCodeAt(O)===9?(b=!0,(t.bsCount[p]+h)%4===3?(O++,c++,h++,s=!1):s=!0):b=!1,d.push(t.bMarks[p]),t.bMarks[p]=O;O<K&&(i=t.src.charCodeAt(O),Aa(i));){i===9?h+=4-(h+t.bsCount[p]+(s?1:0))%4:h++;O++}l=O>=K,m.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(b?1:0),g.push(t.sCount[p]),t.sCount[p]=h-c,D.push(t.tShift[p]),t.tShift[p]=O-t.bMarks[p];continue}if(l)break;for(A=!1,a=0,u=k.length;a<u;a++)if(k[a](t,p,n,!0)){A=!0;break}if(A){t.lineMax=p,t.blkIndent!==0&&(d.push(t.bMarks[p]),m.push(t.bsCount[p]),D.push(t.tShift[p]),g.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}d.push(t.bMarks[p]),m.push(t.bsCount[p]),D.push(t.tShift[p]),g.push(t.sCount[p]),t.sCount[p]=-1}for(v=t.blkIndent,t.blkIndent=0,M=t.push("blockquote_open","blockquote",1),M.markup=">",M.map=f=[e,0],t.md.block.tokenize(t,e,p),M=t.push("blockquote_close","blockquote",-1),M.markup=">",t.lineMax=q,t.parentType=y,f[1]=t.line,a=0;a<D.length;a++)t.bMarks[a+e]=d[a],t.tShift[a+e]=D[a],t.sCount[a+e]=g[a],t.bsCount[a+e]=m[a];return t.blkIndent=v,!0},OK=U.isSpace,FK=function(t,e,n,o){var s,i,a,c,u=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||(s=t.src.charCodeAt(u++),s!==42&&s!==45&&s!==95))return!1;for(i=1;u<l;){if(a=t.src.charCodeAt(u++),a!==s&&!OK(a))return!1;a===s&&i++}return i<3?!1:(o||(t.line=e+1,c=t.push("hr","hr",0),c.map=[e,t.line],c.markup=Array(i+1).join(String.fromCharCode(s))),!0)},qu=U.isSpace;function Ea(r,t){var e,n,o,s;return n=r.bMarks[t]+r.tShift[t],o=r.eMarks[t],e=r.src.charCodeAt(n++),e!==42&&e!==45&&e!==43||n<o&&(s=r.src.charCodeAt(n),!qu(s))?-1:n}function _a(r,t){var e,n=r.bMarks[t]+r.tShift[t],o=n,s=r.eMarks[t];if(o+1>=s||(e=r.src.charCodeAt(o++),e<48||e>57))return-1;for(;;){if(o>=s)return-1;if(e=r.src.charCodeAt(o++),e>=48&&e<=57){if(o-n>=10)return-1;continue}if(e===41||e===46)break;return-1}return o<s&&(e=r.src.charCodeAt(o),!qu(e))?-1:o}function NK(r,t){var e,n,o=r.level+2;for(e=t+2,n=r.tokens.length-2;e<n;e++)r.tokens[e].level===o&&r.tokens[e].type==="paragraph_open"&&(r.tokens[e+2].hidden=!0,r.tokens[e].hidden=!0,e+=2)}var BK=function(t,e,n,o){var s,i,a,c,u,l,f,p,h,d,m,v,y,g,D,b,A,k,M,F,q,O,K,kt,_,W,I,R,$t=!1,Yr=!0;if(t.sCount[e]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[e]-t.listIndent>=4&&t.sCount[e]<t.blkIndent)return!1;if(o&&t.parentType==="paragraph"&&t.sCount[e]>=t.blkIndent&&($t=!0),(K=_a(t,e))>=0){if(f=!0,_=t.bMarks[e]+t.tShift[e],y=Number(t.src.slice(_,K-1)),$t&&y!==1)return!1}else if((K=Ea(t,e))>=0)f=!1;else return!1;if($t&&t.skipSpaces(K)>=t.eMarks[e])return!1;if(v=t.src.charCodeAt(K-1),o)return!0;for(m=t.tokens.length,f?(R=t.push("ordered_list_open","ol",1),y!==1&&(R.attrs=[["start",y]])):R=t.push("bullet_list_open","ul",1),R.map=d=[e,0],R.markup=String.fromCharCode(v),D=e,kt=!1,I=t.md.block.ruler.getRules("list"),k=t.parentType,t.parentType="list";D<n;){for(O=K,g=t.eMarks[D],l=b=t.sCount[D]+K-(t.bMarks[e]+t.tShift[e]);O<g;){if(s=t.src.charCodeAt(O),s===9)b+=4-(b+t.bsCount[D])%4;else if(s===32)b++;else break;O++}if(i=O,i>=g?u=1:u=b-l,u>4&&(u=1),c=l+u,R=t.push("list_item_open","li",1),R.markup=String.fromCharCode(v),R.map=p=[e,0],f&&(R.info=t.src.slice(_,K-1)),q=t.tight,F=t.tShift[e],M=t.sCount[e],A=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=c,t.tight=!0,t.tShift[e]=i-t.bMarks[e],t.sCount[e]=b,i>=g&&t.isEmpty(e+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,e,n,!0),(!t.tight||kt)&&(Yr=!1),kt=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=A,t.tShift[e]=F,t.sCount[e]=M,t.tight=q,R=t.push("list_item_close","li",-1),R.markup=String.fromCharCode(v),D=e=t.line,p[1]=D,i=t.bMarks[e],D>=n||t.sCount[D]<t.blkIndent||t.sCount[e]-t.blkIndent>=4)break;for(W=!1,a=0,h=I.length;a<h;a++)if(I[a](t,D,n,!0)){W=!0;break}if(W)break;if(f){if(K=_a(t,D),K<0)break;_=t.bMarks[D]+t.tShift[D]}else if(K=Ea(t,D),K<0)break;if(v!==t.src.charCodeAt(K-1))break}return f?R=t.push("ordered_list_close","ol",-1):R=t.push("bullet_list_close","ul",-1),R.markup=String.fromCharCode(v),d[1]=D,t.line=D,t.parentType=k,Yr&&NK(t,m),!0},RK=U.normalizeReference,nn=U.isSpace,IK=function(t,e,n,o){var s,i,a,c,u,l,f,p,h,d,m,v,y,g,D,b,A=0,k=t.bMarks[e]+t.tShift[e],M=t.eMarks[e],F=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(k)!==91)return!1;for(;++k<M;)if(t.src.charCodeAt(k)===93&&t.src.charCodeAt(k-1)!==92){if(k+1===M||t.src.charCodeAt(k+1)!==58)return!1;break}for(c=t.lineMax,D=t.md.block.ruler.getRules("reference"),d=t.parentType,t.parentType="reference";F<c&&!t.isEmpty(F);F++)if(!(t.sCount[F]-t.blkIndent>3)&&!(t.sCount[F]<0)){for(g=!1,l=0,f=D.length;l<f;l++)if(D[l](t,F,c,!0)){g=!0;break}if(g)break}for(y=t.getLines(e,F,t.blkIndent,!1).trim(),M=y.length,k=1;k<M;k++){if(s=y.charCodeAt(k),s===91)return!1;if(s===93){h=k;break}else s===10?A++:s===92&&(k++,k<M&&y.charCodeAt(k)===10&&A++)}if(h<0||y.charCodeAt(h+1)!==58)return!1;for(k=h+2;k<M;k++)if(s=y.charCodeAt(k),s===10)A++;else if(!nn(s))break;if(m=t.md.helpers.parseLinkDestination(y,k,M),!m.ok||(u=t.md.normalizeLink(m.str),!t.md.validateLink(u)))return!1;for(k=m.pos,A+=m.lines,i=k,a=A,v=k;k<M;k++)if(s=y.charCodeAt(k),s===10)A++;else if(!nn(s))break;for(m=t.md.helpers.parseLinkTitle(y,k,M),k<M&&v!==k&&m.ok?(b=m.str,k=m.pos,A+=m.lines):(b="",k=i,A=a);k<M&&(s=y.charCodeAt(k),!!nn(s));)k++;if(k<M&&y.charCodeAt(k)!==10&&b)for(b="",k=i,A=a;k<M&&(s=y.charCodeAt(k),!!nn(s));)k++;return k<M&&y.charCodeAt(k)!==10||(p=RK(y.slice(1,h)),!p)?!1:(o||(typeof t.env.references=="undefined"&&(t.env.references={}),typeof t.env.references[p]=="undefined"&&(t.env.references[p]={title:b,href:u}),t.parentType=d,t.line=e+A+1),!0)},LK=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],PK="[a-zA-Z_:][a-zA-Z0-9:._-]*",qK="[^\"'=<>`\\x00-\\x20]+",zK="'[^']*'",VK='"[^"]*"',HK="(?:"+qK+"|"+zK+"|"+VK+")",jK="(?:\\s+"+PK+"(?:\\s*=\\s*"+HK+")?)",zu="<[A-Za-z][A-Za-z0-9\\-]*"+jK+"*\\s*\\/?>",Vu="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",UK="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",JK="<[?][\\s\\S]*?[?]>",KK="<![A-Z]+\\s+[^>]*>",WK="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",GK=new RegExp("^(?:"+zu+"|"+Vu+"|"+UK+"|"+JK+"|"+KK+"|"+WK+")"),$K=new RegExp("^(?:"+zu+"|"+Vu+")"),ZK=GK,YK=$K,Hu={HTML_TAG_RE:ZK,HTML_OPEN_CLOSE_TAG_RE:YK},QK=Hu.HTML_OPEN_CLOSE_TAG_RE,Je=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+LK.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(QK.source+"\\s*$"),/^$/,!1]],XK=function(t,e,n,o){var s,i,a,c,u=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(u)!==60)return!1;for(c=t.src.slice(u,l),s=0;s<Je.length&&!Je[s][0].test(c);s++);if(s===Je.length)return!1;if(o)return Je[s][2];if(i=e+1,!Je[s][1].test(c)){for(;i<n&&!(t.sCount[i]<t.blkIndent);i++)if(u=t.bMarks[i]+t.tShift[i],l=t.eMarks[i],c=t.src.slice(u,l),Je[s][1].test(c)){c.length!==0&&i++;break}}return t.line=i,a=t.push("html_block","",0),a.map=[e,i],a.content=t.getLines(e,i,t.blkIndent,!0),!0},wa=U.isSpace,tW=function(t,e,n,o){var s,i,a,c,u=t.bMarks[e]+t.tShift[e],l=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||(s=t.src.charCodeAt(u),s!==35||u>=l))return!1;for(i=1,s=t.src.charCodeAt(++u);s===35&&u<l&&i<=6;)i++,s=t.src.charCodeAt(++u);return i>6||u<l&&!wa(s)?!1:(o||(l=t.skipSpacesBack(l,u),a=t.skipCharsBack(l,35,u),a>u&&wa(t.src.charCodeAt(a-1))&&(l=a),t.line=e+1,c=t.push("heading_open","h"+String(i),1),c.markup="########".slice(0,i),c.map=[e,t.line],c=t.push("inline","",0),c.content=t.src.slice(u,l).trim(),c.map=[e,t.line],c.children=[],c=t.push("heading_close","h"+String(i),-1),c.markup="########".slice(0,i)),!0)},eW=function(t,e,n){var o,s,i,a,c,u,l,f,p,h=e+1,d,m=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;for(d=t.parentType,t.parentType="paragraph";h<n&&!t.isEmpty(h);h++)if(!(t.sCount[h]-t.blkIndent>3)){if(t.sCount[h]>=t.blkIndent&&(u=t.bMarks[h]+t.tShift[h],l=t.eMarks[h],u<l&&(p=t.src.charCodeAt(u),(p===45||p===61)&&(u=t.skipChars(u,p),u=t.skipSpaces(u),u>=l)))){f=p===61?1:2;break}if(!(t.sCount[h]<0)){for(s=!1,i=0,a=m.length;i<a;i++)if(m[i](t,h,n,!0)){s=!0;break}if(s)break}}return f?(o=t.getLines(e,h,t.blkIndent,!1).trim(),t.line=h+1,c=t.push("heading_open","h"+String(f),1),c.markup=String.fromCharCode(p),c.map=[e,t.line],c=t.push("inline","",0),c.content=o,c.map=[e,t.line-1],c.children=[],c=t.push("heading_close","h"+String(f),-1),c.markup=String.fromCharCode(p),t.parentType=d,!0):!1},rW=function(t,e){var n,o,s,i,a,c,u=e+1,l=t.md.block.ruler.getRules("paragraph"),f=t.lineMax;for(c=t.parentType,t.parentType="paragraph";u<f&&!t.isEmpty(u);u++)if(!(t.sCount[u]-t.blkIndent>3)&&!(t.sCount[u]<0)){for(o=!1,s=0,i=l.length;s<i;s++)if(l[s](t,u,f,!0)){o=!0;break}if(o)break}return n=t.getLines(e,u,t.blkIndent,!1).trim(),t.line=u,a=t.push("paragraph_open","p",1),a.map=[e,t.line],a=t.push("inline","",0),a.content=n,a.map=[e,t.line],a.children=[],a=t.push("paragraph_close","p",-1),t.parentType=c,!0},lo=U.isSpace;function ie(r,t,e,n){var o,s,i,a,c,u,l,f;for(this.src=r,this.md=t,this.env=e,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,f=!1,i=a=u=l=0,c=s.length;a<c;a++){if(o=s.charCodeAt(a),!f)if(lo(o)){u++,o===9?l+=4-l%4:l++;continue}else f=!0;(o===10||a===c-1)&&(o!==10&&a++,this.bMarks.push(i),this.eMarks.push(a),this.tShift.push(u),this.sCount.push(l),this.bsCount.push(0),f=!1,u=0,l=0,i=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ie.prototype.push=function(r,t,e){var n=new mr(r,t,e);return n.block=!0,e<0&&this.level--,n.level=this.level,e>0&&this.level++,this.tokens.push(n),n};ie.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ie.prototype.skipEmptyLines=function(t){for(var e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ie.prototype.skipSpaces=function(t){for(var e,n=this.src.length;t<n&&(e=this.src.charCodeAt(t),!!lo(e));t++);return t};ie.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!lo(this.src.charCodeAt(--t)))return t+1;return t};ie.prototype.skipChars=function(t,e){for(var n=this.src.length;t<n&&this.src.charCodeAt(t)===e;t++);return t};ie.prototype.skipCharsBack=function(t,e,n){if(t<=n)return t;for(;t>n;)if(e!==this.src.charCodeAt(--t))return t+1;return t};ie.prototype.getLines=function(t,e,n,o){var s,i,a,c,u,l,f,p=t;if(t>=e)return"";for(l=new Array(e-t),s=0;p<e;p++,s++){for(i=0,f=c=this.bMarks[p],p+1<e||o?u=this.eMarks[p]+1:u=this.eMarks[p];c<u&&i<n;){if(a=this.src.charCodeAt(c),lo(a))a===9?i+=4-(i+this.bsCount[p])%4:i++;else if(c-f<this.tShift[p])i++;else break;c++}i>n?l[s]=new Array(i-n+1).join(" ")+this.src.slice(c,u):l[s]=this.src.slice(c,u)}return l.join("")};ie.prototype.Token=mr;var nW=ie,on=[["table",wK,["paragraph","reference"]],["code",SK],["fence",MK,["paragraph","reference","blockquote","list"]],["blockquote",TK,["paragraph","reference","blockquote","list"]],["hr",FK,["paragraph","reference","blockquote","list"]],["list",BK,["paragraph","reference","blockquote"]],["reference",IK],["html_block",XK,["paragraph","reference","blockquote"]],["heading",tW,["paragraph","reference","blockquote"]],["lheading",eW],["paragraph",rW]];function fo(){this.ruler=new Un;for(var r=0;r<on.length;r++)this.ruler.push(on[r][0],on[r][1],{alt:(on[r][2]||[]).slice()})}fo.prototype.tokenize=function(r,t,e){for(var n,o,s=this.ruler.getRules(""),i=s.length,a=t,c=!1,u=r.md.options.maxNesting;a<e&&(r.line=a=r.skipEmptyLines(a),!(a>=e||r.sCount[a]<r.blkIndent));){if(r.level>=u){r.line=e;break}for(o=0;o<i&&(n=s[o](r,a,e,!1),!n);o++);r.tight=!c,r.isEmpty(r.line-1)&&(c=!0),a=r.line,a<e&&r.isEmpty(a)&&(c=!0,a++,r.line=a)}};fo.prototype.parse=function(r,t,e,n){var o;!r||(o=new this.State(r,t,e,n),this.tokenize(o,o.line,o.lineMax))};fo.prototype.State=nW;var oW=fo;function sW(r){switch(r){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var iW=function(t,e){for(var n=t.pos;n<t.posMax&&!sW(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)},aW=U.isSpace,cW=function(t,e){var n,o,s,i=t.pos;if(t.src.charCodeAt(i)!==10)return!1;if(n=t.pending.length-1,o=t.posMax,!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){for(s=n-1;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(i++;i<o&&aW(t.src.charCodeAt(i));)i++;return t.pos=i,!0},uW=U.isSpace,ai=[];for(var Sa=0;Sa<256;Sa++)ai.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(r){ai[r.charCodeAt(0)]=1});var lW=function(t,e){var n,o=t.pos,s=t.posMax;if(t.src.charCodeAt(o)!==92)return!1;if(o++,o<s){if(n=t.src.charCodeAt(o),n<256&&ai[n]!==0)return e||(t.pending+=t.src[o]),t.pos+=2,!0;if(n===10){for(e||t.push("hardbreak","br",0),o++;o<s&&(n=t.src.charCodeAt(o),!!uW(n));)o++;return t.pos=o,!0}}return e||(t.pending+="\\"),t.pos++,!0},fW=function(t,e){var n,o,s,i,a,c,u,l,f=t.pos,p=t.src.charCodeAt(f);if(p!==96)return!1;for(n=f,f++,o=t.posMax;f<o&&t.src.charCodeAt(f)===96;)f++;if(s=t.src.slice(n,f),u=s.length,t.backticksScanned&&(t.backticks[u]||0)<=n)return e||(t.pending+=s),t.pos+=u,!0;for(a=c=f;(a=t.src.indexOf("`",c))!==-1;){for(c=a+1;c<o&&t.src.charCodeAt(c)===96;)c++;if(l=c-a,l===u)return e||(i=t.push("code_inline","code",0),i.markup=s,i.content=t.src.slice(f,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=c,!0;t.backticks[l]=a}return t.backticksScanned=!0,e||(t.pending+=s),t.pos+=u,!0},pW=function(t,e){var n,o,s,i,a,c=t.pos,u=t.src.charCodeAt(c);if(e||u!==126||(o=t.scanDelims(t.pos,!0),i=o.length,a=String.fromCharCode(u),i<2))return!1;for(i%2&&(s=t.push("text","",0),s.content=a,i--),n=0;n<i;n+=2)s=t.push("text","",0),s.content=a+a,t.delimiters.push({marker:u,length:0,token:t.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return t.pos+=o.length,!0};function Ma(r,t){var e,n,o,s,i,a=[],c=t.length;for(e=0;e<c;e++)o=t[e],o.marker===126&&o.end!==-1&&(s=t[o.end],i=r.tokens[o.token],i.type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",i=r.tokens[s.token],i.type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="",r.tokens[s.token-1].type==="text"&&r.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(e=a.pop(),n=e+1;n<r.tokens.length&&r.tokens[n].type==="s_close";)n++;n--,e!==n&&(i=r.tokens[n],r.tokens[n]=r.tokens[e],r.tokens[e]=i)}}var hW=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(Ma(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&Ma(t,n[e].delimiters)},ju={tokenize:pW,postProcess:hW},dW=function(t,e){var n,o,s,i=t.pos,a=t.src.charCodeAt(i);if(e||a!==95&&a!==42)return!1;for(o=t.scanDelims(t.pos,a===42),n=0;n<o.length;n++)s=t.push("text","",0),s.content=String.fromCharCode(a),t.delimiters.push({marker:a,length:o.length,token:t.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return t.pos+=o.length,!0};function Ta(r,t){var e,n,o,s,i,a,c=t.length;for(e=c-1;e>=0;e--)n=t[e],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(o=t[n.end],a=e>0&&t[e-1].end===n.end+1&&t[e-1].marker===n.marker&&t[e-1].token===n.token-1&&t[n.end+1].token===o.token+1,i=String.fromCharCode(n.marker),s=r.tokens[n.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?i+i:i,s.content="",s=r.tokens[o.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?i+i:i,s.content="",a&&(r.tokens[t[e-1].token].content="",r.tokens[t[n.end+1].token].content="",e--))}var mW=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(Ta(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&Ta(t,n[e].delimiters)},Uu={tokenize:dW,postProcess:mW},gW=U.normalizeReference,qo=U.isSpace,vW=function(t,e){var n,o,s,i,a,c,u,l,f,p="",h="",d=t.pos,m=t.posMax,v=t.pos,y=!0;if(t.src.charCodeAt(t.pos)!==91||(a=t.pos+1,i=t.md.helpers.parseLinkLabel(t,t.pos,!0),i<0))return!1;if(c=i+1,c<m&&t.src.charCodeAt(c)===40){for(y=!1,c++;c<m&&(o=t.src.charCodeAt(c),!(!qo(o)&&o!==10));c++);if(c>=m)return!1;if(v=c,u=t.md.helpers.parseLinkDestination(t.src,c,t.posMax),u.ok){for(p=t.md.normalizeLink(u.str),t.md.validateLink(p)?c=u.pos:p="",v=c;c<m&&(o=t.src.charCodeAt(c),!(!qo(o)&&o!==10));c++);if(u=t.md.helpers.parseLinkTitle(t.src,c,t.posMax),c<m&&v!==c&&u.ok)for(h=u.str,c=u.pos;c<m&&(o=t.src.charCodeAt(c),!(!qo(o)&&o!==10));c++);}(c>=m||t.src.charCodeAt(c)!==41)&&(y=!0),c++}if(y){if(typeof t.env.references=="undefined")return!1;if(c<m&&t.src.charCodeAt(c)===91?(v=c+1,c=t.md.helpers.parseLinkLabel(t,c),c>=0?s=t.src.slice(v,c++):c=i+1):c=i+1,s||(s=t.src.slice(a,i)),l=t.env.references[gW(s)],!l)return t.pos=d,!1;p=l.href,h=l.title}return e||(t.pos=a,t.posMax=i,f=t.push("link_open","a",1),f.attrs=n=[["href",p]],h&&n.push(["title",h]),t.md.inline.tokenize(t),f=t.push("link_close","a",-1)),t.pos=c,t.posMax=m,!0},yW=U.normalizeReference,zo=U.isSpace,bW=function(t,e){var n,o,s,i,a,c,u,l,f,p,h,d,m,v="",y=t.pos,g=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91||(c=t.pos+2,a=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),a<0))return!1;if(u=a+1,u<g&&t.src.charCodeAt(u)===40){for(u++;u<g&&(o=t.src.charCodeAt(u),!(!zo(o)&&o!==10));u++);if(u>=g)return!1;for(m=u,f=t.md.helpers.parseLinkDestination(t.src,u,t.posMax),f.ok&&(v=t.md.normalizeLink(f.str),t.md.validateLink(v)?u=f.pos:v=""),m=u;u<g&&(o=t.src.charCodeAt(u),!(!zo(o)&&o!==10));u++);if(f=t.md.helpers.parseLinkTitle(t.src,u,t.posMax),u<g&&m!==u&&f.ok)for(p=f.str,u=f.pos;u<g&&(o=t.src.charCodeAt(u),!(!zo(o)&&o!==10));u++);else p="";if(u>=g||t.src.charCodeAt(u)!==41)return t.pos=y,!1;u++}else{if(typeof t.env.references=="undefined")return!1;if(u<g&&t.src.charCodeAt(u)===91?(m=u+1,u=t.md.helpers.parseLinkLabel(t,u),u>=0?i=t.src.slice(m,u++):u=a+1):u=a+1,i||(i=t.src.slice(c,a)),l=t.env.references[yW(i)],!l)return t.pos=y,!1;v=l.href,p=l.title}return e||(s=t.src.slice(c,a),t.md.inline.parse(s,t.md,t.env,d=[]),h=t.push("image","img",0),h.attrs=n=[["src",v],["alt",""]],h.children=d,h.content=s,p&&n.push(["title",p])),t.pos=u,t.posMax=g,!0},kW=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,DW=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,CW=function(t,e){var n,o,s,i,a,c,u=t.pos;if(t.src.charCodeAt(u)!==60)return!1;for(a=t.pos,c=t.posMax;;){if(++u>=c||(i=t.src.charCodeAt(u),i===60))return!1;if(i===62)break}return n=t.src.slice(a+1,u),DW.test(n)?(o=t.md.normalizeLink(n),t.md.validateLink(o)?(e||(s=t.push("link_open","a",1),s.attrs=[["href",o]],s.markup="autolink",s.info="auto",s=t.push("text","",0),s.content=t.md.normalizeLinkText(n),s=t.push("link_close","a",-1),s.markup="autolink",s.info="auto"),t.pos+=n.length+2,!0):!1):kW.test(n)?(o=t.md.normalizeLink("mailto:"+n),t.md.validateLink(o)?(e||(s=t.push("link_open","a",1),s.attrs=[["href",o]],s.markup="autolink",s.info="auto",s=t.push("text","",0),s.content=t.md.normalizeLinkText(n),s=t.push("link_close","a",-1),s.markup="autolink",s.info="auto"),t.pos+=n.length+2,!0):!1):!1},xW=Hu.HTML_TAG_RE;function AW(r){var t=r|32;return t>=97&&t<=122}var EW=function(t,e){var n,o,s,i,a=t.pos;return!t.md.options.html||(s=t.posMax,t.src.charCodeAt(a)!==60||a+2>=s)||(n=t.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!AW(n))||(o=t.src.slice(a).match(xW),!o)?!1:(e||(i=t.push("html_inline","",0),i.content=t.src.slice(a,a+o[0].length)),t.pos+=o[0].length,!0)},_W=U.has,wW=U.isValidEntityCode,Oa=U.fromCodePoint,SW=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,MW=/^&([a-z][a-z0-9]{1,31});/i,TW=function(t,e){var n,o,s,i=t.pos,a=t.posMax;if(t.src.charCodeAt(i)!==38)return!1;if(i+1<a){if(n=t.src.charCodeAt(i+1),n===35){if(s=t.src.slice(i).match(SW),s)return e||(o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),t.pending+=wW(o)?Oa(o):Oa(65533)),t.pos+=s[0].length,!0}else if(s=t.src.slice(i).match(MW),s&&_W(Hn,s[1]))return e||(t.pending+=Hn[s[1]]),t.pos+=s[0].length,!0}return e||(t.pending+="&"),t.pos++,!0};function Fa(r,t){var e,n,o,s,i,a,c,u,l={},f=t.length;if(!!f){var p=0,h=-2,d=[];for(e=0;e<f;e++)if(o=t[e],d.push(0),(t[p].marker!==o.marker||h!==o.token-1)&&(p=e),h=o.token,o.length=o.length||0,!!o.close){for(l.hasOwnProperty(o.marker)||(l[o.marker]=[-1,-1,-1,-1,-1,-1]),i=l[o.marker][(o.open?3:0)+o.length%3],n=p-d[p]-1,a=n;n>i;n-=d[n]+1)if(s=t[n],s.marker===o.marker&&s.open&&s.end<0&&(c=!1,(s.close||o.open)&&(s.length+o.length)%3===0&&(s.length%3!==0||o.length%3!==0)&&(c=!0),!c)){u=n>0&&!t[n-1].open?d[n-1]+1:0,d[e]=e-n+u,d[n]=u,o.open=!1,s.end=e,s.close=!1,a=-1,h=-2;break}a!==-1&&(l[o.marker][(o.open?3:0)+(o.length||0)%3]=a)}}}var OW=function(t){var e,n=t.tokens_meta,o=t.tokens_meta.length;for(Fa(t,t.delimiters),e=0;e<o;e++)n[e]&&n[e].delimiters&&Fa(t,n[e].delimiters)},FW=function(t){var e,n,o=0,s=t.tokens,i=t.tokens.length;for(e=n=0;e<i;e++)s[e].nesting<0&&o--,s[e].level=o,s[e].nesting>0&&o++,s[e].type==="text"&&e+1<i&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==n&&(s[n]=s[e]),n++);e!==n&&(s.length=n)},Na=U.isWhiteSpace,Ba=U.isPunctChar,Ra=U.isMdAsciiPunct;function $r(r,t,e,n){this.src=r,this.env=e,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}$r.prototype.pushPending=function(){var r=new mr("text","",0);return r.content=this.pending,r.level=this.pendingLevel,this.tokens.push(r),this.pending="",r};$r.prototype.push=function(r,t,e){this.pending&&this.pushPending();var n=new mr(r,t,e),o=null;return e<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,e>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(o),n};$r.prototype.scanDelims=function(r,t){var e=r,n,o,s,i,a,c,u,l,f,p=!0,h=!0,d=this.posMax,m=this.src.charCodeAt(r);for(n=r>0?this.src.charCodeAt(r-1):32;e<d&&this.src.charCodeAt(e)===m;)e++;return s=e-r,o=e<d?this.src.charCodeAt(e):32,u=Ra(n)||Ba(String.fromCharCode(n)),f=Ra(o)||Ba(String.fromCharCode(o)),c=Na(n),l=Na(o),l?p=!1:f&&(c||u||(p=!1)),c?h=!1:u&&(l||f||(h=!1)),t?(i=p,a=h):(i=p&&(!h||u),a=h&&(!p||f)),{can_open:i,can_close:a,length:s}};$r.prototype.Token=mr;var NW=$r,Vo=[["text",iW],["newline",cW],["escape",lW],["backticks",fW],["strikethrough",ju.tokenize],["emphasis",Uu.tokenize],["link",vW],["image",bW],["autolink",CW],["html_inline",EW],["entity",TW]],Ho=[["balance_pairs",OW],["strikethrough",ju.postProcess],["emphasis",Uu.postProcess],["text_collapse",FW]];function Zr(){var r;for(this.ruler=new Un,r=0;r<Vo.length;r++)this.ruler.push(Vo[r][0],Vo[r][1]);for(this.ruler2=new Un,r=0;r<Ho.length;r++)this.ruler2.push(Ho[r][0],Ho[r][1])}Zr.prototype.skipToken=function(r){var t,e,n=r.pos,o=this.ruler.getRules(""),s=o.length,i=r.md.options.maxNesting,a=r.cache;if(typeof a[n]!="undefined"){r.pos=a[n];return}if(r.level<i)for(e=0;e<s&&(r.level++,t=o[e](r,!0),r.level--,!t);e++);else r.pos=r.posMax;t||r.pos++,a[n]=r.pos};Zr.prototype.tokenize=function(r){for(var t,e,n=this.ruler.getRules(""),o=n.length,s=r.posMax,i=r.md.options.maxNesting;r.pos<s;){if(r.level<i)for(e=0;e<o&&(t=n[e](r,!1),!t);e++);if(t){if(r.pos>=s)break;continue}r.pending+=r.src[r.pos++]}r.pending&&r.pushPending()};Zr.prototype.parse=function(r,t,e,n){var o,s,i,a=new this.State(r,t,e,n);for(this.tokenize(a),s=this.ruler2.getRules(""),i=s.length,o=0;o<i;o++)s[o](a)};Zr.prototype.State=NW;var BW=Zr,RW=function(r){var t={};t.src_Any=Bu.source,t.src_Cc=Ru.source,t.src_Z=Iu.source,t.src_P=si.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var e="[><\uFF5C]";return t.src_pseudo_letter="(?:(?!"+e+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+e+"|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+e+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(r&&r["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+e+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+t.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+t.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t};function ds(r){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(e){!e||Object.keys(e).forEach(function(n){r[n]=e[n]})}),r}function po(r){return Object.prototype.toString.call(r)}function IW(r){return po(r)==="[object String]"}function LW(r){return po(r)==="[object Object]"}function PW(r){return po(r)==="[object RegExp]"}function Ia(r){return po(r)==="[object Function]"}function qW(r){return r.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Ju={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function zW(r){return Object.keys(r||{}).reduce(function(t,e){return t||Ju.hasOwnProperty(e)},!1)}var VW={"http:":{validate:function(r,t,e){var n=r.slice(t);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(n)?n.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(r,t,e){var n=r.slice(t);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(n)?t>=3&&r[t-3]===":"||t>=3&&r[t-3]==="/"?0:n.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(r,t,e){var n=r.slice(t);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(n)?n.match(e.re.mailto)[0].length:0}}},HW="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",jW="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function UW(r){r.__index__=-1,r.__text_cache__=""}function JW(r){return function(t,e){var n=t.slice(e);return r.test(n)?n.match(r)[0].length:0}}function La(){return function(r,t){t.normalize(r)}}function Jn(r){var t=r.re=RW(r.__opts__),e=r.__tlds__.slice();r.onCompile(),r.__tlds_replaced__||e.push(HW),e.push(t.src_xn),t.src_tlds=e.join("|");function n(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");var o=[];r.__compiled__={};function s(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(r.__schemas__).forEach(function(a){var c=r.__schemas__[a];if(c!==null){var u={validate:null,link:null};if(r.__compiled__[a]=u,LW(c)){PW(c.validate)?u.validate=JW(c.validate):Ia(c.validate)?u.validate=c.validate:s(a,c),Ia(c.normalize)?u.normalize=c.normalize:c.normalize?s(a,c):u.normalize=La();return}if(IW(c)){o.push(a);return}s(a,c)}}),o.forEach(function(a){!r.__compiled__[r.__schemas__[a]]||(r.__compiled__[a].validate=r.__compiled__[r.__schemas__[a]].validate,r.__compiled__[a].normalize=r.__compiled__[r.__schemas__[a]].normalize)}),r.__compiled__[""]={validate:null,normalize:La()};var i=Object.keys(r.__compiled__).filter(function(a){return a.length>0&&r.__compiled__[a]}).map(qW).join("|");r.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+t.src_ZPCc+"))("+i+")","i"),r.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+t.src_ZPCc+"))("+i+")","ig"),r.re.pretest=RegExp("("+r.re.schema_test.source+")|("+r.re.host_fuzzy_test.source+")|@","i"),UW(r)}function KW(r,t){var e=r.__index__,n=r.__last_index__,o=r.__text_cache__.slice(e,n);this.schema=r.__schema__.toLowerCase(),this.index=e+t,this.lastIndex=n+t,this.raw=o,this.text=o,this.url=o}function Pa(r,t){var e=new KW(r,t);return r.__compiled__[e.schema].normalize(e,r),e}function Pt(r,t){if(!(this instanceof Pt))return new Pt(r,t);t||zW(r)&&(t=r,r={}),this.__opts__=ds({},Ju,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ds({},VW,r),this.__compiled__={},this.__tlds__=jW,this.__tlds_replaced__=!1,this.re={},Jn(this)}Pt.prototype.add=function(t,e){return this.__schemas__[t]=e,Jn(this),this};Pt.prototype.set=function(t){return this.__opts__=ds(this.__opts__,t),this};Pt.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var e,n,o,s,i,a,c,u,l;if(this.re.schema_test.test(t)){for(c=this.re.schema_search,c.lastIndex=0;(e=c.exec(t))!==null;)if(s=this.testSchemaAt(t,e[2],c.lastIndex),s){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=n.index+n[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=t.indexOf("@"),l>=0&&(o=t.match(this.re.email_fuzzy))!==null&&(i=o.index+o[1].length,a=o.index+o[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=a))),this.__index__>=0};Pt.prototype.pretest=function(t){return this.re.pretest.test(t)};Pt.prototype.testSchemaAt=function(t,e,n){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,n,this):0};Pt.prototype.match=function(t){var e=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(Pa(this,e)),e=this.__last_index__);for(var o=e?t.slice(e):t;this.test(o);)n.push(Pa(this,e)),o=o.slice(this.__last_index__),e+=this.__last_index__;return n.length?n:null};Pt.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(n,o,s){return n!==s[o-1]}).reverse(),Jn(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Jn(this),this)};Pt.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Pt.prototype.onCompile=function(){};var WW=Pt;const rr=2147483647,Xt=36,ci=1,Ur=26,GW=38,$W=700,Ku=72,Wu=128,Gu="-",ZW=/^xn--/,YW=/[^\0-\x7E]/,QW=/[\x2E\u3002\uFF0E\uFF61]/g,XW={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},jo=Xt-ci,te=Math.floor,Uo=String.fromCharCode;function Fe(r){throw new RangeError(XW[r])}function tG(r,t){const e=[];let n=r.length;for(;n--;)e[n]=t(r[n]);return e}function $u(r,t){const e=r.split("@");let n="";e.length>1&&(n=e[0]+"@",r=e[1]),r=r.replace(QW,".");const o=r.split("."),s=tG(o,t).join(".");return n+s}function Zu(r){const t=[];let e=0;const n=r.length;for(;e<n;){const o=r.charCodeAt(e++);if(o>=55296&&o<=56319&&e<n){const s=r.charCodeAt(e++);(s&64512)==56320?t.push(((o&1023)<<10)+(s&1023)+65536):(t.push(o),e--)}else t.push(o)}return t}const eG=r=>String.fromCodePoint(...r),rG=function(r){return r-48<10?r-22:r-65<26?r-65:r-97<26?r-97:Xt},qa=function(r,t){return r+22+75*(r<26)-((t!=0)<<5)},Yu=function(r,t,e){let n=0;for(r=e?te(r/$W):r>>1,r+=te(r/t);r>jo*Ur>>1;n+=Xt)r=te(r/jo);return te(n+(jo+1)*r/(r+GW))},Qu=function(r){const t=[],e=r.length;let n=0,o=Wu,s=Ku,i=r.lastIndexOf(Gu);i<0&&(i=0);for(let a=0;a<i;++a)r.charCodeAt(a)>=128&&Fe("not-basic"),t.push(r.charCodeAt(a));for(let a=i>0?i+1:0;a<e;){let c=n;for(let l=1,f=Xt;;f+=Xt){a>=e&&Fe("invalid-input");const p=rG(r.charCodeAt(a++));(p>=Xt||p>te((rr-n)/l))&&Fe("overflow"),n+=p*l;const h=f<=s?ci:f>=s+Ur?Ur:f-s;if(p<h)break;const d=Xt-h;l>te(rr/d)&&Fe("overflow"),l*=d}const u=t.length+1;s=Yu(n-c,u,c==0),te(n/u)>rr-o&&Fe("overflow"),o+=te(n/u),n%=u,t.splice(n++,0,o)}return String.fromCodePoint(...t)},Xu=function(r){const t=[];r=Zu(r);let e=r.length,n=Wu,o=0,s=Ku;for(const c of r)c<128&&t.push(Uo(c));let i=t.length,a=i;for(i&&t.push(Gu);a<e;){let c=rr;for(const l of r)l>=n&&l<c&&(c=l);const u=a+1;c-n>te((rr-o)/u)&&Fe("overflow"),o+=(c-n)*u,n=c;for(const l of r)if(l<n&&++o>rr&&Fe("overflow"),l==n){let f=o;for(let p=Xt;;p+=Xt){const h=p<=s?ci:p>=s+Ur?Ur:p-s;if(f<h)break;const d=f-h,m=Xt-h;t.push(Uo(qa(h+d%m,0))),f=te(d/m)}t.push(Uo(qa(f,0))),s=Yu(o,u,a==i),o=0,++a}++o,++n}return t.join("")},nG=function(r){return $u(r,function(t){return ZW.test(t)?Qu(t.slice(4).toLowerCase()):t})},oG=function(r){return $u(r,function(t){return YW.test(t)?"xn--"+Xu(t):t})},sG={version:"2.1.0",ucs2:{decode:Zu,encode:eG},decode:Qu,encode:Xu,toASCII:oG,toUnicode:nG};var tl=sG,iG={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},aG={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},cG={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},uG={default:iG,zero:aG,commonmark:cG},lG=/^(vbscript|javascript|file|data):/,fG=/^data:image\/(gif|png|jpeg|webp);/;function pG(r){var t=r.trim().toLowerCase();return lG.test(t)?!!fG.test(t):!0}var el=["http:","https:","mailto:"];function hG(r){var t=be.parse(r,!0);if(t.hostname&&(!t.protocol||el.indexOf(t.protocol)>=0))try{t.hostname=tl.toASCII(t.hostname)}catch{}return be.encode(be.format(t))}function dG(r){var t=be.parse(r,!0);if(t.hostname&&(!t.protocol||el.indexOf(t.protocol)>=0))try{t.hostname=tl.toUnicode(t.hostname)}catch{}return be.decode(be.format(t),be.decode.defaultChars+"%")}function qt(r,t){if(!(this instanceof qt))return new qt(r,t);t||U.isString(r)||(t=r||{},r="default"),this.inline=new BW,this.block=new oW,this.core=new _K,this.renderer=new sK,this.linkify=new WW,this.validateLink=pG,this.normalizeLink=hG,this.normalizeLinkText=dG,this.utils=U,this.helpers=U.assign({},rK),this.options={},this.configure(r),t&&this.set(t)}qt.prototype.set=function(r){return U.assign(this.options,r),this};qt.prototype.configure=function(r){var t=this,e;if(U.isString(r)&&(e=r,r=uG[e],!r))throw new Error('Wrong `markdown-it` preset "'+e+'", check name');if(!r)throw new Error("Wrong `markdown-it` preset, can't be empty");return r.options&&t.set(r.options),r.components&&Object.keys(r.components).forEach(function(n){r.components[n].rules&&t[n].ruler.enableOnly(r.components[n].rules),r.components[n].rules2&&t[n].ruler2.enableOnly(r.components[n].rules2)}),this};qt.prototype.enable=function(r,t){var e=[];Array.isArray(r)||(r=[r]),["core","block","inline"].forEach(function(o){e=e.concat(this[o].ruler.enable(r,!0))},this),e=e.concat(this.inline.ruler2.enable(r,!0));var n=r.filter(function(o){return e.indexOf(o)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};qt.prototype.disable=function(r,t){var e=[];Array.isArray(r)||(r=[r]),["core","block","inline"].forEach(function(o){e=e.concat(this[o].ruler.disable(r,!0))},this),e=e.concat(this.inline.ruler2.disable(r,!0));var n=r.filter(function(o){return e.indexOf(o)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};qt.prototype.use=function(r){var t=[this].concat(Array.prototype.slice.call(arguments,1));return r.apply(r,t),this};qt.prototype.parse=function(r,t){if(typeof r!="string")throw new Error("Input data should be a String");var e=new this.core.State(r,this,t);return this.core.process(e),e.tokens};qt.prototype.render=function(r,t){return t=t||{},this.renderer.render(this.parse(r,t),this.options,t)};qt.prototype.parseInline=function(r,t){var e=new this.core.State(r,this,t);return e.inlineMode=!0,this.core.process(e),e.tokens};qt.prototype.renderInline=function(r,t){return t=t||{},this.renderer.render(this.parseInline(r,t),this.options,t)};var mG=qt,gG=mG,vG=new Ee({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(r){return{params:r.getAttribute("data-params")||""}}}],toDOM:function(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ol",{start:t.attrs.order==1?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(r){return{tight:r.hasAttribute("data-tight")}}}],toDOM:function(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(r){return r=="italic"&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(r){return/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});function yG(r,t){if(r.isText&&t.isText&&V.sameSet(r.marks,t.marks))return r.withText(r.text+t.text)}var ae=function(t,e){this.schema=t,this.stack=[{type:t.topNodeType,content:[]}],this.marks=V.none,this.tokenHandlers=e};ae.prototype.top=function(){return this.stack[this.stack.length-1]};ae.prototype.push=function(t){this.stack.length&&this.top().content.push(t)};ae.prototype.addText=function(t){if(!!t){var e=this.top().content,n=e[e.length-1],o=this.schema.text(t,this.marks),s;n&&(s=yG(n,o))?e[e.length-1]=s:e.push(o)}};ae.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)};ae.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)};ae.prototype.parseTokens=function(t){for(var e=0;e<t.length;e++){var n=t[e],o=this.tokenHandlers[n.type];if(!o)throw new Error("Token type `"+n.type+"` not supported by Markdown parser");o(this,n,t,e)}};ae.prototype.addNode=function(t,e,n){var o=t.createAndFill(e,n,this.marks);return o?(this.push(o),o):null};ae.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})};ae.prototype.closeNode=function(){this.marks.length&&(this.marks=V.none);var t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)};function Cr(r,t,e,n){return r.getAttrs?r.getAttrs(t,e,n):r.attrs instanceof Function?r.attrs(t):r.attrs}function Jo(r,t){return r.noCloseToken||t=="code_inline"||t=="code_block"||t=="fence"}function za(r){return r[r.length-1]==`
`?r.slice(0,r.length-1):r}function Ko(){}function bG(r,t){var e=Object.create(null),n=function(s){var i=t[s];if(i.block){var a=r.nodeType(i.block);Jo(i,s)?e[s]=function(l,f,p,h){l.openNode(a,Cr(i,f,p,h)),l.addText(za(f.content)),l.closeNode()}:(e[s+"_open"]=function(l,f,p,h){return l.openNode(a,Cr(i,f,p,h))},e[s+"_close"]=function(l){return l.closeNode()})}else if(i.node){var c=r.nodeType(i.node);e[s]=function(l,f,p,h){return l.addNode(c,Cr(i,f,p,h))}}else if(i.mark){var u=r.marks[i.mark];Jo(i,s)?e[s]=function(l,f,p,h){l.openMark(u.create(Cr(i,f,p,h))),l.addText(za(f.content)),l.closeMark(u)}:(e[s+"_open"]=function(l,f,p,h){return l.openMark(u.create(Cr(i,f,p,h)))},e[s+"_close"]=function(l){return l.closeMark(u)})}else if(i.ignore)Jo(i,s)?e[s]=Ko:(e[s+"_open"]=Ko,e[s+"_close"]=Ko);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))};for(var o in t)n(o);return e.text=function(s,i){return s.addText(i.content)},e.inline=function(s,i){return s.parseTokens(i.children)},e.softbreak=e.softbreak||function(s){return s.addText(`
`)},e}var ui=function(t,e,n){this.tokens=n,this.schema=t,this.tokenizer=e,this.tokenHandlers=bG(t,n)};ui.prototype.parse=function(t){var e=new ae(this.schema,this.tokenHandlers),n;e.parseTokens(this.tokenizer.parse(t,{}));do n=e.closeNode();while(e.stack.length);return n||this.schema.topNodeType.createAndFill()};function Va(r,t){for(;++t<r.length;)if(r[t].type!="list_item_open")return r[t].hidden;return!1}var rl=new ui(vG,gG("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:function(r,t,e){return{tight:Va(t,e)}}},ordered_list:{block:"ordered_list",getAttrs:function(r,t,e){return{order:+r.attrGet("start")||1,tight:Va(t,e)}}},heading:{block:"heading",getAttrs:function(r){return{level:+r.tag.slice(1)}}},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:function(r){return{params:r.info||""}},noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(r){return{src:r.attrGet("src"),title:r.attrGet("title")||null,alt:r.children[0]&&r.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(r){return{href:r.attrGet("href"),title:r.attrGet("title")||null}}},code_inline:{mark:"code",noCloseToken:!0}}),li=function(t,e){this.nodes=t,this.marks=e};li.prototype.serialize=function(t,e){var n=new ft(this.nodes,this.marks,e);return n.renderContent(t),n.out};var _t=new li({blockquote:function(t,e){t.wrapBlock("> ",null,e,function(){return t.renderContent(e)})},code_block:function(t,e){t.write("```"+(e.attrs.params||"")+`
`),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},heading:function(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:function(t,e){t.renderList(e,"  ",function(){return(e.attrs.bullet||"*")+" "})},ordered_list:function(t,e){var n=e.attrs.order||1,o=String(n+e.childCount-1).length,s=t.repeat(" ",o+2);t.renderList(e,s,function(i){var a=String(n+i);return t.repeat(" ",o-a.length)+a+". "})},list_item:function(t,e){t.renderContent(e)},paragraph:function(t,e){t.renderInline(e),t.closeBlock(e)},image:function(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+e.attrs.src+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break:function(t,e,n,o){for(var s=o+1;s<n.childCount;s++)if(n.child(s).type!=e.type){t.write(`\\
`);return}},text:function(t,e){t.text(e.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:function(t,e,n,o){return ja(e,n,o,1)?"<":"["},close:function(t,e,n,o){return ja(e,n,o,-1)?">":"]("+e.attrs.href+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")"}},code:{open:function(t,e,n,o){return Ha(n.child(o),-1)},close:function(t,e,n,o){return Ha(n.child(o-1),1)},escape:!1}});function Ha(r,t){var e=/`+/g,n,o=0;if(r.isText)for(;n=e.exec(r.text);)o=Math.max(o,n[0].length);for(var s=o>0&&t>0?" `":"`",i=0;i<o;i++)s+="`";return o>0&&t<0&&(s+=" "),s}function ja(r,t,e,n){if(r.attrs.title||!/^\w+:/.test(r.attrs.href))return!1;var o=t.child(e+(n<0?-1:0));if(!o.isText||o.text!=r.attrs.href||o.marks[o.marks.length-1]!=r)return!1;if(e==(n<0?1:t.childCount-1))return!0;var s=t.child(e+(n<0?-2:1));return!r.isInSet(s.marks)}var ft=function(t,e,n){this.nodes=t,this.marks=e,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=n||{},typeof this.options.tightLists=="undefined"&&(this.options.tightLists=!1)};ft.prototype.flushClose=function(t){if(this.closed){if(this.atBlank()||(this.out+=`
`),t==null&&(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var o=1;o<t;o++)this.out+=e+`
`}this.closed=!1}};ft.prototype.wrapBlock=function(t,e,n,o){var s=this.delim;this.write(e||t),this.delim+=t,o(),this.delim=s,this.closeBlock(n)};ft.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)};ft.prototype.ensureNewLine=function(){this.atBlank()||(this.out+=`
`)};ft.prototype.write=function(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)};ft.prototype.closeBlock=function(t){this.closed=t};ft.prototype.text=function(t,e){for(var n=t.split(`
`),o=0;o<n.length;o++){var s=this.atBlank()||this.closed;this.write(),this.out+=e!==!1?this.esc(n[o],s):n[o],o!=n.length-1&&(this.out+=`
`)}};ft.prototype.render=function(t,e,n){if(typeof e=="number")throw new Error("!");if(!this.nodes[t.type.name])throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");this.nodes[t.type.name](this,t,e,n)};ft.prototype.renderContent=function(t){var e=this;t.forEach(function(n,o,s){return e.render(n,t,s)})};ft.prototype.renderInline=function(t){var e=this,n=[],o="",s=function(i,a,c){var u=i?i.marks:[];i&&i.type.name==="hard_break"&&(u=u.filter(function(F){if(c+1==t.childCount)return!1;var q=t.child(c+1);return F.isInSet(q.marks)&&(!q.isText||/\S/.test(q.text))}));var l=o;if(o="",i&&i.isText&&u.some(function(F){var q=e.marks[F.type.name];return q&&q.expelEnclosingWhitespace})){var f=/^(\s*)(.*?)(\s*)$/m.exec(i.text),p=f[1],h=f[2],d=f[3];l+=p,o=d,(p||d)&&(i=h?i.withText(h):null,i||(u=n))}var m=u.length&&u[u.length-1],v=m&&e.marks[m.type.name].escape===!1,y=u.length-(v?1:0);t:for(var g=0;g<y;g++){var D=u[g];if(!e.marks[D.type.name].mixable)break;for(var b=0;b<n.length;b++){var A=n[b];if(!e.marks[A.type.name].mixable)break;if(D.eq(A)){g>b?u=u.slice(0,b).concat(D).concat(u.slice(b,g)).concat(u.slice(g+1,y)):b>g&&(u=u.slice(0,g).concat(u.slice(g+1,b)).concat(D).concat(u.slice(b,y)));continue t}}}for(var k=0;k<Math.min(n.length,y)&&u[k].eq(n[k]);)++k;for(;k<n.length;)e.text(e.markString(n.pop(),!1,t,c),!1);if(l&&e.text(l),i){for(;n.length<y;){var M=u[n.length];n.push(M),e.text(e.markString(M,!0,t,c),!1)}v&&i.isText?e.text(e.markString(m,!0,t,c)+i.text+e.markString(m,!1,t,c+1),!1):e.render(i,t,c)}};t.forEach(s),s(null,null,t.childCount)};ft.prototype.renderList=function(t,e,n){var o=this;this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var s=typeof t.attrs.tight!="undefined"?t.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=s,t.forEach(function(a,c,u){u&&s&&o.flushClose(1),o.wrapBlock(e,n(u),t,function(){return o.render(a,t,u)})}),this.inTightList=i};ft.prototype.esc=function(t,e){return t=t.replace(/[`*\\~\[\]_]/g,"\\$&"),e&&(t=t.replace(/^[:#\-*+>]/,"\\$&").replace(/^(\s*\d+)\./,"$1\\.")),t};ft.prototype.quote=function(t){var e=t.indexOf('"')==-1?'""':t.indexOf("'")==-1?"''":"()";return e[0]+t+e[1]};ft.prototype.repeat=function(t,e){for(var n="",o=0;o<e;o++)n+=t;return n};ft.prototype.markString=function(t,e,n,o){var s=this.marks[t.type.name],i=e?s.open:s.close;return typeof i=="string"?i:i(this,t,n,o)};ft.prototype.getEnclosingWhitespace=function(t){return{leading:(t.match(/^(\s+)/)||[])[0],trailing:(t.match(/(\s+)$/)||[])[0]}};const Ua={marks:{em:_t.marks.em,[Sr.name]:_t.marks.strong,[Us.name]:_t.marks.code,[Mr.name]:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},[Nu.name]:_t.marks.link,[Zs.name]:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}},nodes:Object.assign(Object.assign({},_t.nodes),{[Hs.name]:(r,t)=>{t.attrs.multiline?(r.write(">>>"),r.ensureNewLine(),r.renderContent(t),r.ensureNewLine(),r.write(">>>"),r.closeBlock(t)):r.wrapBlock("> ",null,t,()=>r.renderContent(t))},[kn.name]:_t.nodes.code_block,[Cu.name]:_t.nodes.heading,[Js.name]:_t.nodes.hard_break,[Ks.name]:_t.nodes.horizontal_rule,[js.name]:_t.nodes.bullet_list,[Gs.name]:_t.nodes.ordered_list,[Ws.name]:_t.nodes.list_item,[$s.name]:_t.nodes.paragraph,[Text.name]:_t.nodes.text})},{bullet_list:kG,ordered_list:DG,link:CG,heading:xG,fence:AG}=rl.tokens,EG={blockquote:{block:Hs.name},paragraph:{block:$s.name},list_item:{block:Ws.name},bullet_list:Object.assign(Object.assign({},kG),{block:js.name}),ordered_list:Object.assign(Object.assign({},DG),{block:Gs.name}),heading:xG,code_block:{block:kn.name,noCloseToken:!0},fence:Object.assign(Object.assign({},AG),{block:kn.name}),hr:{node:Ks.name},hardbreak:{node:Js.name},[Mr.name]:{mark:Mr.name},em:{mark:Mr.name},[Sr.name]:{mark:Sr.name},strong:{mark:Sr.name},link:CG,code_inline:{mark:Us.name,noCloseToken:!0},s:{mark:Zs.name}},_G=new li(Ua.nodes,Ua.marks);let Wo=null;const Ja={serialize:r=>_G.serialize(r,{tightLists:!0}),parse:(r,t)=>(Wo||(Wo=new ui(t,rl.tokenizer.enable("strikethrough"),EG)),Wo.parse(r))};var L;(function(r){r[r.ITALIC=0]="ITALIC",r[r.BOLD=1]="BOLD",r[r.H1=2]="H1",r[r.H2=3]="H2",r[r.STRIKE=4]="STRIKE",r[r.OL=5]="OL",r[r.UL=6]="UL",r[r.LINK=7]="LINK",r[r.CODE_BLOCK=8]="CODE_BLOCK",r[r.BLOCKQUOTE=9]="BLOCKQUOTE"})(L||(L={}));const Zt=r=>r.chain().focus();function wG(r,t){switch(t){case L.H1:Zt(r).toggleHeading({level:1}).run();break;case L.H2:Zt(r).toggleHeading({level:2}).run();break;case L.BOLD:Zt(r).toggleBold().run();break;case L.ITALIC:Zt(r).toggleItalic().run();break;case L.STRIKE:Zt(r).toggleStrike().run();break;case L.LINK:Zt(r).unsetLink().run();break;case L.OL:Zt(r).toggleOrderedList().run();break;case L.UL:Zt(r).toggleBulletList().run();break;case L.BLOCKQUOTE:Zt(r).toggleBlockquote().run();break;case L.CODE_BLOCK:Zt(r).toggleCodeBlock().run();break;default:console.warn("case missing:",t)}}function SG(r,t){if(!r)return!1;switch(t){case L.H1:return r.isActive("heading",{level:1});case L.H2:return r.isActive("heading",{level:2});case L.BOLD:return r.isActive("bold");case L.ITALIC:return r.isActive("italic");case L.STRIKE:return r.isActive("strike");case L.LINK:return r.isActive("link");case L.OL:return r.isActive("orderedList");case L.UL:return r.isActive("bulletList");case L.BLOCKQUOTE:return r.isActive("blockquote");case L.CODE_BLOCK:return r.isActive("code");default:console.warn("case missing:",t)}}const MG="ino-markdown-editor .markdown-editor{border-radius:10px}ino-markdown-editor .markdown-editor--readonly .markdown-editor__toolbar{display:none}ino-markdown-editor .markdown-editor--readonly .ProseMirror{padding:0;border:0}ino-markdown-editor .markdown-editor--readonly .ProseMirror-focused{outline:none}ino-markdown-editor .markdown-editor__error-text{display:block;padding:10px;color:#9f0028}ino-markdown-editor .markdown-editor__toolbar{display:grid;grid-template-columns:auto auto;justify-content:space-between;border-radius:10px;background-color:#f9f9f9;padding:10px 20px;margin-bottom:10px}ino-markdown-editor .toolbar__action-button{--ino-icon-color-primary:#9d9d9d;border:0;margin:0;padding:1px 2px;border-radius:10px;background-color:transparent;font-size:22px}ino-markdown-editor .toolbar__action-button:hover{--ino-icon-color-primary:#0d10f3;background-color:rgba(13, 16, 243, 0.1);color:#0d10f3;cursor:pointer}ino-markdown-editor .toolbar__action-button--active{--ino-icon-color-primary:#0d10f3;background-color:rgba(13, 16, 243, 0.1);color:#0d10f3;box-shadow:inset 0 3px 6px rgba(0, 0, 0, 0.16)}ino-markdown-editor .toolbar__action-button ino-icon{vertical-align:middle;padding:5px}ino-markdown-editor .toolbar__view-mode{border-radius:0;margin:0}ino-markdown-editor .toolbar__view-mode:first-of-type{border-radius:10px 0 0 10px}ino-markdown-editor .toolbar__view-mode:last-of-type{border-radius:0 10px 10px 0}ino-markdown-editor .toolbar__text-format--show{display:block}ino-markdown-editor .toolbar__text-format--hide{display:none}ino-markdown-editor .markdown-editor__content__container{height:100%;width:100%}ino-markdown-editor .markdown-editor__content{overflow:auto;max-height:var(--ino-markdown-editor-max-height, none)}ino-markdown-editor .markdown-editor__content ino-textarea{width:100%;height:100%}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined{display:flex}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:#e7e7e7}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#9b9b9b}ino-markdown-editor .markdown-editor__content ino-textarea .mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{min-height:var(--ino-markdown-editor-min-height, 100px)}ino-markdown-editor .show-editor{display:block}ino-markdown-editor .hide-editor{display:none}ino-markdown-editor .ProseMirror{min-height:var(--ino-markdown-editor-min-height, 100px);padding:15px 16px;border-radius:4px;border:1px solid #e7e7e7}ino-markdown-editor .ProseMirror:hover:not(ino-markdown-editor .ProseMirror-focused){border-color:#9b9b9b}ino-markdown-editor .ProseMirror-focused{outline:#3d40f5 auto 1px}ino-markdown-editor .ProseMirror *:first-child{margin-top:0;padding-top:0}ino-markdown-editor .ProseMirror *:last-child{margin-bottom:0;padding-bottom:0}ino-markdown-editor .ProseMirror blockquote{padding-left:10px;border-left:3px solid #c1c1c1}ino-markdown-editor .ProseMirror p{margin-top:0}ino-markdown-editor .ProseMirror pre code{display:block;background-color:rgba(193, 193, 193, 0.15);white-space:pre;-webkit-overflow-scrolling:touch;overflow-x:auto;max-width:100%;min-width:100px;padding:6px 8px}";let TG=class{constructor(r){il(this,r),this.viewModeChange=ho(this,"viewModeChange",7),this.valueChange=ho(this,"valueChange",7),this.inoBlur=ho(this,"inoBlur",3),this.viewMode="preview",this.toolbarActionsState=new Set,this.errorMessage="",this.handlePreviewBlur=()=>{const t=this.htmlToMarkdown();this.errorMessage||this.valueChange.emit(t),this.inoBlur.emit()},this.onEditorTransaction=()=>{this.toolbarActionsState=new Set(Object.values(L).filter(t=>typeof t=="number"&&SG(this.editor,t)))},this.onTextareaChange=t=>{t.stopPropagation(),this.textareaRef.value=t.detail},this.handleMarkdownBlur=t=>{t.stopPropagation(),this.editor.commands.setContent(this.markdownToHtml(this.textareaRef.value)),this.errorMessage||this.valueChange.emit(this.textareaRef.value),this.inoBlur.emit()}}handleInitialValueChange(r){this.initializeEditor(r)}handleViewModeChange(r){var t;r===It.MARKDOWN&&this.textareaRef?(this.textareaRef.value=this.htmlToMarkdown(),this.textareaRef.rows=this.textareaRef.value.split(`
`).length):(t=this.editor)===null||t===void 0||t.setEditable(r!==It.READONLY)}componentDidLoad(){this.createEditor(),this.initialValue&&this.initializeEditor(this.initialValue),this.textareaRef.addEventListener("valueChange",this.onTextareaChange),this.textareaRef.addEventListener("inoBlur",this.handleMarkdownBlur)}disconnectedCallback(){var r;(r=this.editor)===null||r===void 0||r.destroy(),this.textareaRef.removeEventListener("valueChange",this.onTextareaChange),this.textareaRef.removeEventListener("inoBlur",this.handleMarkdownBlur)}initializeEditor(r){this.editor.commands.setContent(this.markdownToHtml(r),!0),this.textareaRef.value=this.htmlToMarkdown(),this.textareaRef.rows=this.textareaRef.value.split(`
`).length}createEditor(){this.editor=new em({element:this.editorRef,extensions:[Jm,Nu],onBlur:this.handlePreviewBlur,onTransaction:this.onEditorTransaction,editable:this.viewMode!==It.READONLY})}htmlToMarkdown(){return this.tryParse(()=>{const r=this.editor.schema.nodeFromJSON(this.editor.getJSON());return Ja.serialize(r)},this.textareaRef.value)}markdownToHtml(r=this.initialValue){return this.tryParse(()=>Ja.parse(r,this.editor.schema).toJSON(),this.editor.state)}tryParse(r,t){try{return this.errorMessage="",r()}catch(e){return this.errorMessage=e.message,console.error(e),t}}handleViewModeBtnClick(r){this.errorMessage||this.viewModeChange.emit(r)}handleToolbarActionClick(r){wG(this.editor,r)}render(){const r=this.viewMode===It.READONLY,t=r||this.viewMode===It.PREVIEW,e=this.viewMode===It.MARKDOWN,n=je({"markdown-editor":!0,"markdown-editor--readonly":r}),o=je({"markdown-editor__content__container":!0,"show-editor":t,"hide-editor":e}),s=je({"show-editor":e,"hide-editor":t}),i=u=>je({"toolbar__action-button":!0,"toolbar__view-mode":!0,"toolbar__action-button--active":this.viewMode===u}),a=je({"toolbar__text-format":!0,"toolbar__text-format--show":t,"toolbar__text-format--hide":e}),c=u=>je({"toolbar__action-button":!0,"toolbar__action-button--active":this.toolbarActionsState.has(u)});return J("div",{class:n},J("div",{class:"markdown-editor__toolbar"},J("div",null,J("button",{class:i(It.PREVIEW),onClick:()=>this.handleViewModeBtnClick(It.PREVIEW)},J("ino-icon",{icon:"edit_text"})),J("button",{class:i(It.MARKDOWN),onClick:()=>this.handleViewModeBtnClick(It.MARKDOWN)},J("ino-icon",{icon:"code"}))),J("div",{class:a},J("button",{class:c(L.H1),onClick:()=>this.handleToolbarActionClick(L.H1)},J("ino-icon",{icon:"headline_one"})),J("button",{class:c(L.H2),onClick:()=>this.handleToolbarActionClick(L.H2)},J("ino-icon",{icon:"headline_two"})),J("button",{class:c(L.BOLD),onClick:()=>this.handleToolbarActionClick(L.BOLD)},J("ino-icon",{icon:"bold"})),J("button",{class:c(L.ITALIC),onClick:()=>this.handleToolbarActionClick(L.ITALIC)},J("ino-icon",{icon:"italic"})),J("button",{class:c(L.STRIKE),onClick:()=>this.handleToolbarActionClick(L.STRIKE)},J("ino-icon",{icon:"strikethrough"})),J("button",{class:c(L.LINK),onClick:()=>this.handleToolbarActionClick(L.LINK)},J("ino-icon",{icon:"link"})),J("button",{class:c(L.UL),onClick:()=>this.handleToolbarActionClick(L.UL)},J("ino-icon",{icon:"bullet_list"})),J("button",{class:c(L.OL),onClick:()=>this.handleToolbarActionClick(L.OL)},J("ino-icon",{icon:"numeric_list"})),J("button",{class:c(L.BLOCKQUOTE),onClick:()=>this.handleToolbarActionClick(L.BLOCKQUOTE)},J("ino-icon",{icon:"quote"})),J("button",{class:c(L.CODE_BLOCK),onClick:()=>this.handleToolbarActionClick(L.CODE_BLOCK)},J("ino-icon",{icon:"code_block"}))),J("ino-popover",{placement:"top-start","color-scheme":"transparent",controlled:!0,visible:Boolean(this.errorMessage)},J("span",{class:"markdown-editor__error-text"},this.errorMessage))),J("div",{class:"markdown-editor__content"},J("div",{class:o,ref:u=>this.editorRef=u}),J("ino-textarea",{ref:u=>this.textareaRef=u,class:s,cols:100,autogrow:!0,outline:!0})))}static get watchers(){return{initialValue:["handleInitialValueChange"],viewMode:["handleViewModeChange"]}}};TG.style=MG;export{TG as ino_markdown_editor};
